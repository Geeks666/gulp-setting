'use strict';

define(['jquery', 'service'], function ($, service) {
  /**
   *
   * @param appId
   * @param kindCode 1:客户端 2：浏览器
   */
  function verifyApp(appId, kindCode, url, openTarget) {
    var w = openTarget ? window : window.open('about:blank');
    if (kindCode == '1') {
      w = window;
    }
    $.ajax({
      url: service.htmlHost + "/pf/api/app/verifyJp.jsonp",
      type: "get",
      dataType: "jsonp",
      jsonp: "callback",
      data: { "appId": appId },
      success: function success(data) {
        data = data.result;
        if (data.code == "success") {
          if (url) w.location.href = url;else w.location.href = data.data;
        } else if (data.code == "failed") {
          if (kindCode == '2') {
            w.close();
          }
          layer.alert(data.msg, { icon: 0 });
        }
      },
      error: function error(data) {

        layer.alert("请求失败", { icon: 0 });
      }
    });
  };

  return {
    'verifyApp': verifyApp
  };
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhlYWRlci9qcy9hcHBWZXJpZnkuanMiXSwibmFtZXMiOlsiZGVmaW5lIiwiJCIsInNlcnZpY2UiLCJ2ZXJpZnlBcHAiLCJhcHBJZCIsImtpbmRDb2RlIiwidXJsIiwib3BlblRhcmdldCIsInciLCJ3aW5kb3ciLCJvcGVuIiwiYWpheCIsImh0bWxIb3N0IiwidHlwZSIsImRhdGFUeXBlIiwianNvbnAiLCJkYXRhIiwic3VjY2VzcyIsInJlc3VsdCIsImNvZGUiLCJsb2NhdGlvbiIsImhyZWYiLCJjbG9zZSIsImxheWVyIiwiYWxlcnQiLCJtc2ciLCJpY29uIiwiZXJyb3IiXSwibWFwcGluZ3MiOiI7O0FBQUFBLE9BQU8sQ0FBQyxRQUFELEVBQVksU0FBWixDQUFQLEVBQWlDLFVBQVdDLENBQVgsRUFBZUMsT0FBZixFQUF5QjtBQUN0RDs7Ozs7QUFLQSxXQUFTQyxTQUFULENBQW9CQyxLQUFwQixFQUE0QkMsUUFBNUIsRUFBdUNDLEdBQXZDLEVBQTRDQyxVQUE1QyxFQUF1RDtBQUNyRCxRQUFJQyxJQUFJRCxhQUFXRSxNQUFYLEdBQWtCQSxPQUFPQyxJQUFQLENBQVksYUFBWixDQUExQjtBQUNBLFFBQUlMLFlBQVksR0FBaEIsRUFBb0I7QUFDbEJHLFVBQUlDLE1BQUo7QUFDRDtBQUNEUixNQUFFVSxJQUFGLENBQU87QUFDTEwsV0FBTUosUUFBUVUsUUFBUixHQUFtQiw0QkFEcEI7QUFFTEMsWUFBTyxLQUZGO0FBR0xDLGdCQUFZLE9BSFA7QUFJTEMsYUFBTyxVQUpGO0FBS0xDLFlBQU8sRUFBQyxTQUFVWixLQUFYLEVBTEY7QUFNTGEsZUFBUSxpQkFBU0QsSUFBVCxFQUFjO0FBQ3BCQSxlQUFPQSxLQUFLRSxNQUFaO0FBQ0EsWUFBSUYsS0FBS0csSUFBTCxJQUFhLFNBQWpCLEVBQTRCO0FBQzFCLGNBQUliLEdBQUosRUFDRUUsRUFBRVksUUFBRixDQUFXQyxJQUFYLEdBQWtCZixHQUFsQixDQURGLEtBR0VFLEVBQUVZLFFBQUYsQ0FBV0MsSUFBWCxHQUFrQkwsS0FBS0EsSUFBdkI7QUFDSCxTQUxELE1BS00sSUFBSUEsS0FBS0csSUFBTCxJQUFhLFFBQWpCLEVBQTJCO0FBQy9CLGNBQUlkLFlBQVksR0FBaEIsRUFBb0I7QUFDbEJHLGNBQUVjLEtBQUY7QUFDRDtBQUNEQyxnQkFBTUMsS0FBTixDQUFhUixLQUFLUyxHQUFsQixFQUF3QixFQUFDQyxNQUFNLENBQVAsRUFBeEI7QUFDRDtBQUNGLE9BbkJJO0FBb0JMQyxhQUFRLGVBQVdYLElBQVgsRUFBa0I7O0FBRXhCTyxjQUFNQyxLQUFOLENBQWEsTUFBYixFQUFzQixFQUFDRSxNQUFNLENBQVAsRUFBdEI7QUFDRDtBQXZCSSxLQUFQO0FBeUJEOztBQUVILFNBQU87QUFDTCxpQkFBY3ZCO0FBRFQsR0FBUDtBQUdELENBekNEIiwiZmlsZSI6ImhlYWRlci9qcy9hcHBWZXJpZnktYTQ4ZjAxZTVmNS5qcyIsInNvdXJjZXNDb250ZW50IjpbImRlZmluZShbJ2pxdWVyeScgLCAnc2VydmljZScgXSAsIGZ1bmN0aW9uICggJCAsIHNlcnZpY2UgKSB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYXBwSWRcclxuICAgICAqIEBwYXJhbSBraW5kQ29kZSAxOuWuouaIt+erryAy77ya5rWP6KeI5ZmoXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHZlcmlmeUFwcCggYXBwSWQgLCBraW5kQ29kZSAsIHVybCAsb3BlblRhcmdldCl7XHJcbiAgICAgIHZhciB3ID0gb3BlblRhcmdldD93aW5kb3c6d2luZG93Lm9wZW4oJ2Fib3V0OmJsYW5rJyk7XHJcbiAgICAgIGlmKCBraW5kQ29kZSA9PSAnMScpe1xyXG4gICAgICAgIHcgPSB3aW5kb3c7XHJcbiAgICAgIH1cclxuICAgICAgJC5hamF4KHtcclxuICAgICAgICB1cmwgOiBzZXJ2aWNlLmh0bWxIb3N0ICsgXCIvcGYvYXBpL2FwcC92ZXJpZnlKcC5qc29ucFwiLFxyXG4gICAgICAgIHR5cGUgOiBcImdldFwiLFxyXG4gICAgICAgIGRhdGFUeXBlIDogIFwianNvbnBcIixcclxuICAgICAgICBqc29ucDogXCJjYWxsYmFja1wiLFxyXG4gICAgICAgIGRhdGEgOiB7XCJhcHBJZFwiIDogYXBwSWR9LFxyXG4gICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICBkYXRhID0gZGF0YS5yZXN1bHQ7XHJcbiAgICAgICAgICBpZiggZGF0YS5jb2RlID09IFwic3VjY2Vzc1wiICl7XHJcbiAgICAgICAgICAgIGlmKCB1cmwgKVxyXG4gICAgICAgICAgICAgIHcubG9jYXRpb24uaHJlZiA9IHVybDtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgIHcubG9jYXRpb24uaHJlZiA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgIH1lbHNlIGlmKCBkYXRhLmNvZGUgPT0gXCJmYWlsZWRcIiApe1xyXG4gICAgICAgICAgICBpZigga2luZENvZGUgPT0gJzInKXtcclxuICAgICAgICAgICAgICB3LmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGF5ZXIuYWxlcnQoIGRhdGEubXNnICwge2ljb246IDB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVycm9yIDogZnVuY3Rpb24gKCBkYXRhICkge1xyXG5cclxuICAgICAgICAgIGxheWVyLmFsZXJ0KCBcIuivt+axguWksei0pVwiICwge2ljb246IDB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgICd2ZXJpZnlBcHAnIDogdmVyaWZ5QXBwLFxyXG4gIH07XHJcbn0pO1xyXG4iXX0=
