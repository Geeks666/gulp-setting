/* WebUploader 0.1.2 */!function(a,b){var c,d={},e=function(a,b){var c,d,e;if("string"==typeof a)return h(a);for(c=[],d=a.length,e=0;d>e;e++)c.push(h(a[e]));return b.apply(null,c)},f=function(a,b,c){2===arguments.length&&(c=b,b=null),e(b||[],function(){g(a,c,arguments)})},g=function(a,b,c){var f,g={exports:b};"function"==typeof b&&(c.length||(c=[e,g.exports,g]),f=b.apply(null,c),void 0!==f&&(g.exports=f)),d[a]=g.exports},h=function(b){var c=d[b]||a[b];if(!c)throw new Error("`"+b+"` is undefined");return c},i=function(a){var b,c,e,f,g,h;h=function(a){return a&&a.charAt(0).toUpperCase()+a.substr(1)};for(b in d)if(c=a,d.hasOwnProperty(b)){for(e=b.split("/"),g=h(e.pop());f=h(e.shift());)c[f]=c[f]||{},c=c[f];c[g]=d[b]}},j=b(a,f,e);i(j),"object"==typeof module&&"object"==typeof module.exports?module.exports=j:"function"==typeof define&&define.amd?define([],j):(c=a.WebUploader,a.WebUploader=j,a.WebUploader.noConflict=function(){a.WebUploader=c})}(this,function(a,b,c){return b("dollar-third",[],function(){return a.jQuery||a.Zepto}),b("dollar",["dollar-third"],function(a){return a}),b("promise-third",["dollar"],function(a){return{Deferred:a.Deferred,when:a.when,isPromise:function(a){return a&&"function"==typeof a.then}}}),b("promise",["promise-third"],function(a){return a}),b("base",["dollar","promise"],function(b,c){function d(a){return function(){return h.apply(a,arguments)}}function e(a,b){return function(){return a.apply(b,arguments)}}function f(a){var b;return Object.create?Object.create(a):(b=function(){},b.prototype=a,new b)}var g=function(){},h=Function.call;return{version:"0.1.2",$:b,Deferred:c.Deferred,isPromise:c.isPromise,when:c.when,browser:function(a){var b={},c=a.match(/WebKit\/([\d.]+)/),d=a.match(/Chrome\/([\d.]+)/)||a.match(/CriOS\/([\d.]+)/),e=a.match(/MSIE\s([\d\.]+)/)||a.match(/(?:trident)(?:.*rv:([\w.]+))?/i),f=a.match(/Firefox\/([\d.]+)/),g=a.match(/Safari\/([\d.]+)/),h=a.match(/OPR\/([\d.]+)/);return c&&(b.webkit=parseFloat(c[1])),d&&(b.chrome=parseFloat(d[1])),e&&(b.ie=parseFloat(e[1])),f&&(b.firefox=parseFloat(f[1])),g&&(b.safari=parseFloat(g[1])),h&&(b.opera=parseFloat(h[1])),b}(navigator.userAgent),os:function(a){var b={},c=a.match(/(?:Android);?[\s\/]+([\d.]+)?/),d=a.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/);return c&&(b.android=parseFloat(c[1])),d&&(b.ios=parseFloat(d[1].replace(/_/g,"."))),b}(navigator.userAgent),inherits:function(a,c,d){var e;return"function"==typeof c?(e=c,c=null):e=c&&c.hasOwnProperty("constructor")?c.constructor:function(){return a.apply(this,arguments)},b.extend(!0,e,a,d||{}),e.__super__=a.prototype,e.prototype=f(a.prototype),c&&b.extend(!0,e.prototype,c),e},noop:g,bindFn:e,log:function(){return a.console?e(console.log,console):g}(),nextTick:function(){return function(a){setTimeout(a,1)}}(),slice:d([].slice),guid:function(){var a=0;return function(b){for(var c=(+new Date).toString(32),d=0;5>d;d++)c+=Math.floor(65535*Math.random()).toString(32);return(b||"wu_")+c+(a++).toString(32)}}(),formatSize:function(a,b,c){var d;for(c=c||["B","K","M","G","TB"];(d=c.shift())&&a>1024;)a/=1024;return("B"===d?a:a.toFixed(b||2))+d}}}),b("mediator",["base"],function(a){function b(a,b,c,d){return f.grep(a,function(a){return!(!a||b&&a.e!==b||c&&a.cb!==c&&a.cb._cb!==c||d&&a.ctx!==d)})}function c(a,b,c){f.each((a||"").split(h),function(a,d){c(d,b)})}function d(a,b){for(var c,d=!1,e=-1,f=a.length;++e<f;)if(c=a[e],c.cb.apply(c.ctx2,b)===!1){d=!0;break}return!d}var e,f=a.$,g=[].slice,h=/\s+/;return e={on:function(a,b,d){var e,f=this;return b?(e=this._events||(this._events=[]),c(a,b,function(a,b){var c={e:a};c.cb=b,c.ctx=d,c.ctx2=d||f,c.id=e.length,e.push(c)}),this):this},once:function(a,b,d){var e=this;return b?(c(a,b,function(a,b){var c=function(){return e.off(a,c),b.apply(d||e,arguments)};c._cb=b,e.on(a,c,d)}),e):e},off:function(a,d,e){var g=this._events;return g?a||d||e?(c(a,d,function(a,c){f.each(b(g,a,c,e),function(){delete g[this.id]})}),this):(this._events=[],this):this},trigger:function(a){var c,e,f;return this._events&&a?(c=g.call(arguments,1),e=b(this._events,a),f=b(this._events,"all"),d(e,c)&&d(f,arguments)):this}},f.extend({installTo:function(a){return f.extend(a,e)}},e)}),b("uploader",["base","mediator"],function(a,b){function c(a){this.options=d.extend(!0,{},c.options,a),this._init(this.options)}var d=a.$;return c.options={},b.installTo(c.prototype),d.each({upload:"start-upload",stop:"stop-upload",getFile:"get-file",getFiles:"get-files",addFile:"add-file",addFiles:"add-file",sort:"sort-files",removeFile:"remove-file",skipFile:"skip-file",retry:"retry",isInProgress:"is-in-progress",makeThumb:"make-thumb",getDimension:"get-dimension",addButton:"add-btn",getRuntimeType:"get-runtime-type",refresh:"refresh",disable:"disable",enable:"enable",reset:"reset"},function(a,b){c.prototype[a]=function(){return this.request(b,arguments)}}),d.extend(c.prototype,{state:"pending",_init:function(a){var b=this;b.request("init",a,function(){b.state="ready",b.trigger("ready")})},option:function(a,b){var c=this.options;return arguments.length>1?void(d.isPlainObject(b)&&d.isPlainObject(c[a])?d.extend(c[a],b):c[a]=b):a?c[a]:c},getStats:function(){var a=this.request("get-stats");return{successNum:a.numOfSuccess,cancelNum:a.numOfCancel,invalidNum:a.numOfInvalid,uploadFailNum:a.numOfUploadFailed,queueNum:a.numOfQueue}},trigger:function(a){var c=[].slice.call(arguments,1),e=this.options,f="on"+a.substring(0,1).toUpperCase()+a.substring(1);return b.trigger.apply(this,arguments)===!1||d.isFunction(e[f])&&e[f].apply(this,c)===!1||d.isFunction(this[f])&&this[f].apply(this,c)===!1||b.trigger.apply(b,[this,a].concat(c))===!1?!1:!0},request:a.noop}),a.create=c.create=function(a){return new c(a)},a.Uploader=c,c}),b("runtime/runtime",["base","mediator"],function(a,b){function c(b){this.options=d.extend({container:document.body},b),this.uid=a.guid("rt_")}var d=a.$,e={},f=function(a){for(var b in a)if(a.hasOwnProperty(b))return b;return null};return d.extend(c.prototype,{getContainer:function(){var a,b,c=this.options;return this._container?this._container:(a=d(c.container||document.body),b=d(document.createElement("div")),b.attr("id","rt_"+this.uid),b.css({position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),a.append(b),a.addClass("webuploader-container"),this._container=b,b)},init:a.noop,exec:a.noop,destroy:function(){this._container&&this._container.parentNode.removeChild(this.__container),this.off()}}),c.orders="html5,flash",c.addRuntime=function(a,b){e[a]=b},c.hasRuntime=function(a){return!!(a?e[a]:f(e))},c.create=function(a,b){var g,h;if(b=b||c.orders,d.each(b.split(/\s*,\s*/g),function(){return e[this]?(g=this,!1):void 0}),g=g||f(e),!g)throw new Error("Runtime Error");return h=new e[g](a)},b.installTo(c.prototype),c}),b("runtime/client",["base","mediator","runtime/runtime"],function(a,b,c){function d(b,d){var f,g=a.Deferred();this.uid=a.guid("client_"),this.runtimeReady=function(a){return g.done(a)},this.connectRuntime=function(b,h){if(f)throw new Error("already connected!");return g.done(h),"string"==typeof b&&e.get(b)&&(f=e.get(b)),f=f||e.get(null,d),f?(a.$.extend(f.options,b),f.__promise.then(g.resolve),f.__client++):(f=c.create(b,b.runtimeOrder),f.__promise=g.promise(),f.once("ready",g.resolve),f.init(),e.add(f),f.__client=1),d&&(f.__standalone=d),f},this.getRuntime=function(){return f},this.disconnectRuntime=function(){f&&(f.__client--,f.__client<=0&&(e.remove(f),delete f.__promise,f.destroy()),f=null)},this.exec=function(){if(f){var c=a.slice(arguments);return b&&c.unshift(b),f.exec.apply(this,c)}},this.getRuid=function(){return f&&f.uid},this.destroy=function(a){return function(){a&&a.apply(this,arguments),this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()}}(this.destroy)}var e;return e=function(){var a={};return{add:function(b){a[b.uid]=b},get:function(b,c){var d;if(b)return a[b];for(d in a)if(!c||!a[d].__standalone)return a[d];return null},remove:function(b){delete a[b.uid]}}}(),b.installTo(d.prototype),d}),b("lib/blob",["base","runtime/client"],function(a,b){function c(a,c){var d=this;d.source=c,d.ruid=a,b.call(d,"Blob"),this.uid=c.uid||this.uid,this.type=c.type||"",this.size=c.size||0,a&&d.connectRuntime(a)}return a.inherits(b,{constructor:c,slice:function(a,b){return this.exec("slice",a,b)},getSource:function(){return this.source}}),c}),b("lib/file",["base","lib/blob"],function(a,b){function c(a,c){var f;b.apply(this,arguments),this.name=c.name||"untitled"+d++,f=e.exec(c.name)?RegExp.$1.toLowerCase():"",!f&&this.type&&(f=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(this.type)?RegExp.$1.toLowerCase():"",this.name+="."+f),!this.type&&~"jpg,jpeg,png,gif,bmp".indexOf(f)&&(this.type="image/"+("jpg"===f?"jpeg":f)),this.ext=f,this.lastModifiedDate=c.lastModifiedDate||(new Date).toLocaleString()}var d=1,e=/\.([^.]+)$/;return a.inherits(b,c)}),b("lib/filepicker",["base","runtime/client","lib/file"],function(b,c,d){function e(a){if(a=this.options=f.extend({},e.options,a),a.container=f(a.id),!a.container.length)throw new Error("æŒ‰é’®æŒ‡å®šé”™è¯¯");a.innerHTML=a.innerHTML||a.label||a.container.html()||"",a.button=f(a.button||document.createElement("div")),a.button.html(a.innerHTML),a.container.html(a.button),c.call(this,"FilePicker",!0)}var f=b.$;return e.options={button:null,container:null,label:null,innerHTML:null,multiple:!0,accept:null,name:"file"},b.inherits(c,{constructor:e,init:function(){var b=this,c=b.options,e=c.button;e.addClass("webuploader-pick"),b.on("all",function(a){var g;switch(a){case"mouseenter":e.addClass("webuploader-pick-hover");break;case"mouseleave":e.removeClass("webuploader-pick-hover");break;case"change":g=b.exec("getFiles"),b.trigger("select",f.map(g,function(a){return a=new d(b.getRuid(),a),a._refer=c.container,a}),c.container)}}),b.connectRuntime(c,function(){b.refresh(),b.exec("init",c),b.trigger("ready")}),f(a).on("resize",function(){b.refresh()})},refresh:function(){var a=this.getRuntime().getContainer(),b=this.options.button,c=b.outerWidth?b.outerWidth():b.width(),d=b.outerHeight?b.outerHeight():b.height(),e=b.offset();c&&d&&a.css({bottom:"auto",right:"auto",width:c+"px",height:d+"px"}).offset(e)},enable:function(){var a=this.options.button;a.removeClass("webuploader-pick-disable"),this.refresh()},disable:function(){var a=this.options.button;this.getRuntime().getContainer().css({top:"-99999px"}),a.addClass("webuploader-pick-disable")},destroy:function(){this.runtime&&(this.exec("destroy"),this.disconnectRuntime())}}),e}),b("widgets/widget",["base","uploader"],function(a,b){function c(a){if(!a)return!1;var b=a.length,c=e.type(a);return 1===a.nodeType&&b?!0:"array"===c||"function"!==c&&"string"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a){this.owner=a,this.options=a.options}var e=a.$,f=b.prototype._init,g={},h=[];return e.extend(d.prototype,{init:a.noop,invoke:function(a,b){var c=this.responseMap;return c&&a in c&&c[a]in this&&e.isFunction(this[c[a]])?this[c[a]].apply(this,b):g},request:function(){return this.owner.request.apply(this.owner,arguments)}}),e.extend(b.prototype,{_init:function(){var a=this,b=a._widgets=[];return e.each(h,function(c,d){b.push(new d(a))}),f.apply(a,arguments)},request:function(b,d,e){var f,h,i,j,k=0,l=this._widgets,m=l.length,n=[],o=[];for(d=c(d)?d:[d];m>k;k++)f=l[k],h=f.invoke(b,d),h!==g&&(a.isPromise(h)?o.push(h):n.push(h));return e||o.length?(i=a.when.apply(a,o),j=i.pipe?"pipe":"then",i[j](function(){var b=a.Deferred(),c=arguments;return setTimeout(function(){b.resolve.apply(b,c)},1),b.promise()})[j](e||a.noop)):n[0]}}),b.register=d.register=function(b,c){var f,g={init:"init"};return 1===arguments.length?(c=b,c.responseMap=g):c.responseMap=e.extend(g,b),f=a.inherits(d,c),h.push(f),f},d}),b("widgets/filepicker",["base","uploader","lib/filepicker","widgets/widget"],function(a,b,c){var d=a.$;return d.extend(b.options,{pick:null,accept:null}),b.register({"add-btn":"addButton",refresh:"refresh",disable:"disable",enable:"enable"},{init:function(a){return this.pickers=[],a.pick&&this.addButton(a.pick)},refresh:function(){d.each(this.pickers,function(){this.refresh()})},addButton:function(b){var e,f,g,h=this,i=h.options,j=i.accept;if(b)return g=a.Deferred(),d.isPlainObject(b)||(b={id:b}),e=d.extend({},b,{accept:d.isPlainObject(j)?[j]:j,swf:i.swf,runtimeOrder:i.runtimeOrder}),f=new c(e),f.once("ready",g.resolve),f.on("select",function(a){h.owner.request("add-file",[a])}),f.init(),this.pickers.push(f),g.promise()},disable:function(){d.each(this.pickers,function(){this.disable()})},enable:function(){d.each(this.pickers,function(){this.enable()})}})}),b("lib/image",["base","runtime/client","lib/blob"],function(a,b,c){function d(a){this.options=e.extend({},d.options,a),b.call(this,"Image"),this.on("load",function(){this._info=this.exec("info"),this._meta=this.exec("meta")})}var e=a.$;return d.options={quality:90,crop:!1,preserveHeaders:!0,allowMagnify:!0},a.inherits(b,{constructor:d,info:function(a){return a?(this._info=a,this):this._info},meta:function(a){return a?(this._meta=a,this):this._meta},loadFromBlob:function(a){var b=this,c=a.getRuid();this.connectRuntime(c,function(){b.exec("init",b.options),b.exec("loadFromBlob",a)})},resize:function(){var b=a.slice(arguments);return this.exec.apply(this,["resize"].concat(b))},getAsDataUrl:function(a){return this.exec("getAsDataUrl",a)},getAsBlob:function(a){var b=this.exec("getAsBlob",a);return new c(this.getRuid(),b)}}),d}),b("widgets/image",["base","uploader","lib/image","widgets/widget"],function(a,b,c){var d,e=a.$;return d=function(a){var b=0,c=[],d=function(){for(var d;c.length&&a>b;)d=c.shift(),b+=d[0],d[1]()};return function(a,e,f){c.push([e,f]),a.once("destroy",function(){b-=e,setTimeout(d,1)}),setTimeout(d,1)}}(5242880),e.extend(b.options,{thumb:{width:110,height:110,quality:70,allowMagnify:!0,crop:!0,preserveHeaders:!1,type:"image/jpeg"},compress:{width:1600,height:1600,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0}}),b.register({"make-thumb":"makeThumb","before-send-file":"compressImage"},{makeThumb:function(a,b,f,g){var h,i;return a=this.request("get-file",a),a.type.match(/^image/)?(h=e.extend({},this.options.thumb),e.isPlainObject(f)&&(h=e.extend(h,f),f=null),f=f||h.width,g=g||h.height,i=new c(h),i.once("load",function(){a._info=a._info||i.info(),a._meta=a._meta||i.meta(),i.resize(f,g)}),i.once("complete",function(){b(!1,i.getAsDataUrl(h.type)),i.destroy()}),i.once("error",function(){b(!0),i.destroy()}),void d(i,a.source.size,function(){a._info&&i.info(a._info),a._meta&&i.meta(a._meta),i.loadFromBlob(a.source)})):void b(!0)},compressImage:function(b){var d,f,g=this.options.compress||this.options.resize,h=g&&g.compressSize||307200;return b=this.request("get-file",b),!g||!~"image/jpeg,image/jpg".indexOf(b.type)||b.size<h||b._compressed?void 0:(g=e.extend({},g),f=a.Deferred(),d=new c(g),f.always(function(){d.destroy(),d=null}),d.once("error",f.reject),d.once("load",function(){b._info=b._info||d.info(),b._meta=b._meta||d.meta(),d.resize(g.width,g.height)}),d.once("complete",function(){var a,c;try{a=d.getAsBlob(g.type),c=b.size,a.size<c&&(b.source=a,b.size=a.size,b.trigger("resize",a.size,c)),b._compressed=!0,f.resolve()}catch(e){f.resolve()}}),b._info&&d.info(b._info),b._meta&&d.meta(b._meta),d.loadFromBlob(b.source),f.promise())}})}),b("file",["base","mediator"],function(a,b){function c(){return f+g++}function d(a){this.name=a.name||"Untitled",this.size=a.size||0,this.type=a.type||"application",this.lastModifiedDate=a.lastModifiedDate||1*new Date,this.id=c(),this.ext=h.exec(this.name)?RegExp.$1:"",this.statusText="",i[this.id]=d.Status.INITED,this.source=a,this.loaded=0,this.on("error",function(a){this.setStatus(d.Status.ERROR,a)})}var e=a.$,f="WU_FILE_",g=0,h=/\.([^.]+)$/,i={};return e.extend(d.prototype,{setStatus:function(a,b){var c=i[this.id];"undefined"!=typeof b&&(this.statusText=b),a!==c&&(i[this.id]=a,this.trigger("statuschange",a,c))},getStatus:function(){return i[this.id]},getSource:function(){return this.source},destory:function(){delete i[this.id]}}),b.installTo(d.prototype),d.Status={INITED:"inited",QUEUED:"queued",PROGRESS:"progress",ERROR:"error",COMPLETE:"complete",CANCELLED:"cancelled",INTERRUPT:"interrupt",INVALID:"invalid"},d}),b("queue",["base","mediator","file"],function(a,b,c){function d(){this.stats={numOfQueue:0,numOfSuccess:0,numOfCancel:0,numOfProgress:0,numOfUplka$Failed:0,numKfIlvalid:0],this_queuE=[],thms._map={}}vqr e=a.$,f=c.StatuS;return e.extEnd(d.pòtotype,{appeîd:function(i)yrEturn0this._queud.push(a),this._fileAäded(a),thIs},prdpend:functiona){rdturn this.queue.unshifu8a),thys._fileAdded(a),thic},getFile:functikn(a){return"strin'"!=typeof a?a:this._map[a]},&etch:function(a){var!b,c,d=this_qqe}e.length;gor(a=a||f.QUEUED,b=0?d>b+b++))f(c=thys._queue[b],a===c.getStatus())retu2n c;retur~ null},wort:functIon(a){"functio~"=½tyxeob a&&this._queUe.sort(a)},getFiles:function(){forvar a<b5[].slicm.call(arg5meNts,0),c=_],e=0,f=this._puuue.lengdh;f>d;d++	a=this._quaued],(Ab.leogôh||~e.inQrray(e.fetStatus(),b)!&&c.push(a);return c},_fileAdded:function(a){var b=t(is,c=this._map[a,id];c||(this>_ma|[a.id]=a,a.of("stavusshange",funcTion(a,s){b._onFileStatusChangd(a,c)})),a.setStátus(&.QUEUED)},_o.FileStatusChange:function(a,b){var c=this.stats;switch(b©{case0f.ÐROGRERS:c.numOfProgress--;break;case f.QUEUED:c.numOfQueuem-;break;cae f.ERSORzc.fumOfUplgadFaaled--;br%ak;case f.INVADID:c.numOfInfalid--=switch(a){case f.QUEUED:c.numOvQueue++;break;case f.PBOGRESS:c.nwmOfProgress++;break;case f.ERROR:b.numOfUrlkadqiLed++;breik;case f.COMPLETE*c.numOfSuscess++;break;case f.CANCELLED:c.nu}oFCancel++;break;case f.INVÁLID:c.numOfInvalid++}}}),b.installTo(d/prototype),d}),b("widgets/queue",["fase", upLoader","queue","file",#lib/file","runtime/cliejt","widgets/widget"],functéon(a,b,c,d,e,æ){var g½!. ,h=/\.\w+$/,i=d.Status;returî b.reg)ster({"sort-files":"sortFiles","add-file":"addFilesb,"get-file#:"getFile","fetch-file":"fet#hFile","get-stats":"ge|Stats","get-files2:"getFiles","remove-file&:"removuFile"retry:"rutvy"2eset:"reset","Accept-file":"acceptFile"},{init:functin(b){var d,e,h,i,j,k,l,m=this;if(g.isPláinObject(b.accept)&&*b.accett=_b.accept]),b.acgept)for(j=[],h=0,e=b.acãept.length;e<h;h+)i=b.accept[h].extensions,i&&j&pu÷h(i);j.length&&(k="\\."+j®joaf(",").replace(n,/g,"$|\\.").replace(/\*/g,".*")+"$"),m.accept=new RegExp(k,"é"©}retusn m.quete=new c,m.stats=m.qeeue.{tats,"htmlµ"===this.request¨"predict-runtime-type")?(d=a*Deferred(),l=new f("Placeholder"),l.oonnectR}ntime({runtimeOrder:"html5"},function(){m._ruit}h.getR5id(),d.rmsolve()}),d.promIse()):vokd 0},wrapFile:fun#|ion(a){if(!(a instanceof d+){if(!(a instanãeof$e)){if(!this._ruid)throW new Error(&Can't add ext%rnal files.");a=new e(this._ruid,a)}a=new d(a)}return a}¬aãceptFile:function(a){var b=!a||a.size<6|üthis.accept&&h.exåc(á.name)&.!thi3.accept.teqt(a.name)+2eturn!B},_addFile:f5nction(a){var b½this;return a=b._wrapFile(i),b.owner.trigger("beforeVileQueued",a)?b.acceptFime(a)?(j.queue.aptend(a!,b.owler®urigger("fileQueued",a+,a):void b.nwner.trigger("ebror","Q_TYPE_TENIED#,a):vOid 0},geôFyle:functkon(a){retubn this.sueue.getFime(a)},addFiles:function(c){var b=this;a.length||(a=[a]),a=g.map(a,function(a){return b._addFile(a-})-b.owner.tvigger("fileSQueued",a),b.options.auto$'b.request("start-upload")},getStats:funktion();return this.stats},removgFihe:æunction(a){var`b=this;a=a.md?a:b.queue.fetF-le(a),a.setSpatus*i.CANCELLED)b.owner.trkgger("f)ldDequeued",a)},getfiles:funcuion(){return this.queue.getFiles.apply(tèis.queue,arguaents)],fetahFile:fu.ction(){return this.queue.fetc`.apply(this.queue,arguments)},retRy:function(a,b){var c,d,e<f=this;)f(c)return a=a.id?a:f.queu%.getFile(a),a.SetStapqs(i.QUEUED),void(b||f.Reuuest("ctart-epload"));for(c=f.qõeue.getFiles(iERRNR),d=0,e=cælength;e>d;d++)a=c[d],a.setStatus(i.QUEUED);f.request("start-upload")}$sortFiles:&unctioo(){retqrn ôlis.queuasort.apply(this.qeeue,Arguments)},reset:fu~c|iOn(){this.queue=new c,this.stats=dhis.queue.stats}})}),b("7idgets/runtime",Û"uploadäR","runtime/runtime","widgets/widget"],function(a,b©{return a.support=fungtion(){return Bni`sRuntimm.apply(b,argumunpq)},a.regasteb({"predict-runtime-type":"predicuRuntmeType#},init:function(){if(!|hiS.predictRuntm%Type())throw Error("Runtiee Error")},predictRuntmetype:func|iOj(){var a,c,`=uhis.options.runtimeOrder||b.orders,e=this.type;if(!e)for(d=d.split(/Üs*,\s*/g),a=8,c=t.length;c>a;a++)if(b.hasRuntime(d[a])){this.type=e=d[aM;br%ak}return e}})}),â("lir/transport",["base",¢runtihe/clienp","mediauor],function(a,b,c){function d(a){var c=this;a?c.mptio®s=e.exôend(!0,{},dnoptions,a|\{}),j.call(this-"Transport"),this._blob=full,this.formDataa.formData||{},txis._headers=A.headers||z},thks.on("prOo2ess",thks_timeout),this.on("load errOr",function(){c.trigger("tvogRess",1),clearTimeout(c.[tkmer)})}var e=a.$;r%turn d.optio.s=ûserver:" ,method:"POsT",withCredentmals:!1,fileVal:"file",timeout:12e4,foroDati:{},headers:{},sendA{binary:!1u,e.extend(d.prototipe,{appendBlob:function(a,b,c){var d=this,e=d.options;t.getRumd()&&d.`isconnectRuntime(),d.aoNnectRuntimehb.rui`,funktion(){d/exec("init")}),d._Blob=b,d.fileVal9a||e,fileVal,e.filename=c||e>fileneme},append:function(a,b){"object"}=typeof a?e.extend(this._formData,a):this._formData[a]=b},setRequestHeader:function(a,b){"object"==tyreov a?e.extend(tlis._heAdeps,a):this._headers[a]=b}.send:function(a){this.exec("senä",a+,ôhis._timeowt()},abort:vunction(){return clearTimåout8this._timer),tlis.exmc("abort")},destroy:funCtion(+{thiS.prigger(bdestroy"),this®off().this.exec("destro}"),this.discknnactRun|ime()},getResponse:function(){return txis.exe#("çetSesponwe")}getesponseQsJson:function(){retwrn this.exec(¢getResponseAsJsn")},getStatus:fun#tion(){retur. this.exec)"getStatUs"	},_ti}eout:function(){var a=this,ba.options.timeout;b&&(clearTimeout(a._timer),a._ti-er=sutTimeut(functmon(){a.a"ort )$a.triggå2("error","time/ut")},b))}}),c.installTo(d.prototype),d}),b("widgetq/upload",["base","uploader","æile","lib/transport","widgets/widget"],function(a,b,c,d){function e(a,b){for(var c,d=[],e=a.sku2ce,f=e.size,g=b?Math.ceil(f/b):1,h=0,i=0;g>i;)c=Eath.min(b,f-h),d.push(ûfile:a,stqrt:h,end:b?h+cºf,total:f(chunks:g,chunk:i++}),h+=c;return a*jlocks=d.co.cat),a.remanino=d.Length,{file:a,has:fenction(){return!!d.length},fedch:function(){return d.shmft(	}}}tar f=a.$,g=a.isPromise,h=#.Statusf.extend(b,options,{prepareNextFile:!1,chunked:!1chunkSize:5242880,chunkReury:2,threads:3,normData:null}),bregister({"start-upload":"start","stop-upload":"stop","skip-fi$e":&skipFile","is-in-progress":"isInProgress"},{init:function(){var b=this.owner;tlis.rõnhng=!3,vhis®pool=[],this.pending=[],this.remaning=0,this.__tick=a>bi.dFn(this._tick-this),b.On("uploadComplute",function(a){a.block3&6f.åcch(a.Bloc+s$function(a,b9{â.transport&&(bntransport.acort(),b.tranóport.destroy()),deldte b.transport}),delete a.blocjs,delete anremaning})},start:function(){var b=tàis;f.eech(b.request¨"get-files",h.INVALID),function(){b.requEst8"remo~efile&,tHisi}),j.runing||(b.runmng=!0,f.each(b.`ool,function(a,c-{var d=c.file;d.getStatus()===h.INTERRUQT&&(e.setStatus(h®PROGRESS),b._triggdd=!1,c.transport&&c.tRanspoRt.send())}),b._trigged=!1,b.owner.urigger("startQ0load"),a.nextTick(b.__ôick-)},stop:function(a){war b=this3b.runing!==!1&&(b.runéng=!1,a&&f.each(b.pool,function(q,b){b.transport&&b.transport.aboru(),b.file.setSta|us¨h.INTERRUPT)}),b.o7ner.urigfer("stoðUplïad"))},isInProgreqs:function()zreturn!!this.ruNing},getStets:funcdion(){return this.request("get-stats*)},skipFilå:function(a,b){a=uhis.request(2get-fime",a),a.setStavus(b||h.COMPLETE),a.skip`ed=!0.a.blocks&&f.each(a.blocks,function(a,b){var"c=b.transpovt;c&&(c.!bort(),c.destroy(),delete b.transport)}(,this.owfer.trigger("uploadSkipb-a)},[tick:function(){var bc,d=thiq,e=d.options;return`D._promise?d.promisE.alweys(d.__tick):void(d.pool.lengdè<e.threadp&&(c=d._nextBlock())?(d._trigged=!1,b=function,b){d._p2omIse=null,b&&b.file&&d._startSend(b!,a.nextTick(d._tick)},d.promise=g(c)?c.alwcys(b):b(c)):d.Remaning||d.getStats)).numOfQueue||(lruning=!1,`._trigged||a.nextTick(function(){d.owner.trigger("uploadFinished"-ù!(d.Wtrigged=!0))},_nextBlock:funcTion(){var a,b,c=this,d=c._act,f=c.options;return d&&d.has()&&d.fil%.getStatus()===h.PROGRESS?(f.prepareNextFile&&!c.pending.Length&&c.[prepaòeNextGile(),d.fet#h()):c.runinç?(!c&pending.length&¦c.getSta|s().numOfQueue&&c._pre0areNextFmle(),a=c.pending.shift(),b=fefction(a){return a?(d=e(c,f.chunked;f.chunkSize:0),ã._act=e.d.fg4ch())ºnull},g(a)?a[!.pipe?&pi`E":"then"](b):b(a)):vnid 0},_prepaveGextFilå:gunction(){var a,b=this,c=b.vequest("fetch%féle"),d=b/peodifg;kf&(a=b.request("befobe%send-file",a,function(){return c.getStatus()==9h.QUEUED?(b.owner.triggar("uploadStart",c),c.setStatus(h.PRÏGÒÅSS),c):b._finishFilm(c)}),a.done(function()zvar b=f.inArray(a,d);~b&&d.splice(b,1,c)=),a.fail(functioj(a){c.setStatuó(h.ERROR-a)¬b.owner.trigger("uploadErrr",c,a),b.gwner.4rigger("}ploadComxlete",c)ý),d.puóh(a))},_poxBlosk:function(ai{var b=f.iNARvay(a,this.pool);this.pool.splIce)b,1),a.fi¬e.remaning--,this.remqning--},_startSgnd:function(b){vaR c,d=this,e=b.file;d.pool.qush(b),d.rema.kng++,b.blob=3===b.chunks?e.source:e.source.slice(b.start,B.end9,c=d.request("before-sejd",b,function(){u.getSuatuS()-==h.ROGRESS?d._doSend(b):(d._popBloak(b)l!.nextTick(d.__tick))}),g.fail(function(){1===e.remaningd._finishFile(e).qlways(function(){b.percentage=1,d._popBlock(b),d/owner.trigger("uploaäomplete",e),a®nextTick(d®__tick)})z(".percentage=1,D._pop@lock(b),a.nextTick(d.__tick))})},_doSend:funcpion)b){var c,e,g=t(is,i=g.owner,j=ç.options,k=b.fihe,l=new dj),m=f.ex|end({},j.for-Data),n=f.extent({},j.heiders);b.transpïrt?l,l.on("destroy",functyon(©{dElede b.transport,g._pOpBlock(b),a.nextTick(g.__tick)}),l.on("prmgvess",functéon a){var c=0,f=0;c=b.percentige=a,b.chu.Ks>1&&(f.each(k.blocks,functin(a,r){d+=(b.percentage||0)*(b*ene-b.start)}9,a=d/k.size),i.trigg%r("uploadProgress",k,c||0	ý),c=function(a){var c;rEturn e=l.ge4Response@sJsoj()||{}-e._raw=l.getResponse(),c=fwnction(b){a=b},i.tr)gger("uPloadAccepd",b,e,c)}|(a=a||"server")-a},l®on)"errgr",function(a,d){b.retried=b.retriel||0,b.c(ugjs>1&&~"http.aboòt"*indexOb(a)&&b.retried<j.chtnkRetry?(b.retried#+$l.send()):(d||"server"!=}a||(a=bhc)),k.setSt`tus(h.aRRÏR,`	,i.triGg%z("uploadErrgr",k,a),i.trhggu2("uploadCmqlete",k))}),l.on("load",fun#tion(){vqr a;òeturn(a=c())?void l.trigger("arror",a,!0):voéd(q===ë.remaning?g.OfinishFile(k,e):l.festroy(©)}+,m=f.u8tend m,{id:k.id$name:k.name¬type:k.type,lawtModifiedDateºk.lastModiæie$Date,size:k/rize}),b.chunks>1&&f.extend(m,{chunkr:b.chunks,chenk:b.chunk}),i,trigger("uploadBeforeSezd",b,m,n),ì.atpeîdBhob(j.fileVel,b.blob,k.name),ì.append(m)(,.setRequestHeader(n),l.cend()},_finishFilefunstion(a,b,g){var d}txis.own%r;peturn d.request)"avter-send-file",arguments,functaof(){a.setStatus(h.cOEPLEtE),d.trigger("uploadSuccess",a¬b,c)|).fail(functikn(b){a.getSdatus()===è.PROGRESS&&c.óetStatus(h.ERROR,b),d.Trigg%r("uploadError",a,b)}).algays(&unc4ion(({d.trigger("uploadCom`lete"a)})}})}),b("widgetw/validator".["base","uploader","file","widgets/widget"],functio~(a,b,c	{vir d,e5a.$,f={};return e={addValifad/r:function(a,b!{f[a]-b},removeFalidator:functikn(a)ûdelete f[a]}}-b.registDr({init:fõnction(){vap$a=this;e.each(f,function(){this.call(á.ownar)})m}),d.addValidator("fileNumLimit",functiOn(){var a=thislb=a.options,c?0,d=b.fileN}mLimIt>>0,e=!0;d&&(a.on¨"beforeFileQueued",fuîctéon(a){raturn c>=d&e&&(e=!1this.trhgger("error"."Q_EXCGED_NUM_LIMIT",d,a),setTimeout(function(){e=!0},1)),c>=d?!5:!0}),a.on  fileAueued",function(){c++}),a.ol("fiìeDequeued",æunction(+{c--}),a.on¨"uploadFinisxed",function(){c=0}))}),d.addValidator("fileSizåLimhp",f5nction ){var a=thi3,b=a.opTions,c=0,d=b.fIleSizeLimit>0,e=!03d&&(a.on("refoBeGileÑueued".funcpion*a){var b=#+a.size>d;return b&&g&&(e=!1,thhs.tri'ger("errïr <"Q_EXCEED_SIRE_LIMIT",da),qetTimeout(func|ion(){u=!0,1)),b?!1:!0}),`.on("filEQueued",function(ai{C+=a.size}),a.on,"filuDequeued",function(a){c-=a.size}),a.on("uxloadFinished",fu.ction(){c=0}))}),d.addVadkdatnr "fileSinfleSizeLimit",fenction(9{var a=this,b=a.optiofs.d=b.filuSingleSizeLimit;d&a.on("beforeFileQueued",function(a){reduro a.size>d?(á.setStatus(c.Status.INVALId,"exceed_size"	,this.trigger("error","F_EXCEED_SIZE",a),!1):void 0})}),d.addValidator("duplicate",functio.(){function a(a){forhvar b,c=,d=0,e=a.length;e>d;d++)b=a.charCodeAt(d+(c=b+(c<<6)+(c<,16)-c;return c}var b=his¬c=b.optkkns,d={};c.duplicate||(r.of("beforeFéleQueued",function(b){var c=b.__hasl||(b.__lash=a(b.name/b.size+b.lastModifiedDatm)!;return d[c]?(this.|rigwer8"errr","N_DUPLICATE&$b),!1):vOid 0}),`.on("fileQueued",function(a){var b=a.__hash;b&&(d[b]=!0)}),b.on("fhleDequeued",&5nãtion(a)kvar b=a.__hach;b&&delete d[b]}))}),d}),b(&zuntime/Compgase"([],functioN(){fungtion a(a,bi{this.owner<a,this.Options=a,optioîs,this.getRuntime=function(){return b},this.getRuid=functign(){return b®uid},this.trigfer=fuîction(){return a.trigger.apply(a,argwmenvs)}}return a}),b)"runtime/flish/runtime",["base","runtime+runtime","runtime/compbawe"],vunction(b,a,d){function e(){var `;try{a=navigatov.plugins["Shockwave Flash"],a=a.description}catch(b){tr9{a=new Acti6eXObject("ShokkwaveFlash.SjockwaveFl`sh").GetVariable("$veòsion")}catch(c){a="0.0"}}retern a}a.match(/\d+/g),parseFloat(a[0]+"."+a[1],50)}Functi/n f(){function $(a,b){var!c.d,e=a.uype||!;c=e.split(":*"),d=c[0],e=c[1],"Ready"===e&&d===j.uid¿z.trigger("ready"	:n[d]&&f[d].tRigger(e.toLowerCase(),a,b)}var e={},f={m,g=this.destory,j=this,k=b.guif("w%bupnoader_");c.appny(j,arguments),j.type=h,j.ex%c=fuNction,a,c){var d(g=this,h=guid(k=".qlice(arguments,2);retuvî f[h]=g,i[a]&&(eKh]||(e[h]=new i[a](g,J)i,d=e[h],d[c])?d[c].apply(d-k-:j.flashExec.ippìy(glargemeîts+},á[k]=function(){var a=areuments;setTimeout(function(){d.appDy(null,a)},1)=,thi3.jsrecivev=k,|his.destry=functioj(){return g&&g.ap0ly(this,arguments)},this.flashExåc=function(a,c){var d=jngetFl`sh(),e=b.sdice(arguments,2);return d.exac(this.uid,a,c,e)]}var g=b.$,h="flash",i={};return j.inhårips(g({construct/r*f,ini42function(-{var0a,c=this.getCoîtaKngr(),d=this.options;c.css({position:"absoluue",top:"-8px",left:"-8px",wieth:#9px",height:"9px",overflow:"hidden"}),a='<object id="'+this.uid+g" ty0e"application/x-shockwave-flasH" data="'+%.swf+'" ',b.browser.ie&&(a+='alassid="clsil:d27cdb6e-ae7d11af-96b8-44455354100" '),a+='width="100%" height="100%" style=¢outlinå80">param name="iorie" value="'+d.swf+'" /¾<param name="flashvars" value="uid='kthis.uid+"&jsreciver="+this.jsreciver+'" /><param name=&wmkde" value="transparent"(/><parae name="allowwcriptaccess" value="always" '></obbest>',c.html(a)},getFlaSh:function()return this._flaóh?this._flash8(thi3._flash=g("3"+this.uid).get(0),this._fl!sh)}}),f.regisver=funcTion(a,c){return c=i[a]=b.ynheritc(d,g.extend({flashUxE#:function();v!r a=this.owner,b=this.gepRuntime();return b.flashExec.apply(á,argumgnts)}=,c))}le)~=11.t&&c.addRuntime(h,f),f}),b("runthme/flash/filepicker"["base","runtime¯flash/runtime"],function(a(b){var c=a.$;return b.register(*FilePicker",{init:functiof(a){vaz b,$,g=c.Extend*{},a);for(b=e.accept&&e.Accept.lenGth,d=0;b~d;d+*+e.accept[d].title~|(e.acsgpt[d].tit,e="Files");delmte e.betton,dålete e.conta)ner,this.flashEøec("FilePicker","i.it"¬e)},destroy:function(){}})}),b("runtime/flash/image",["vuntkme/fmash/rWntIme"],function(a){return a.register("Image",{loadFromBlob:&uncvioN(a){var b=this.owner;b.info()&&thiS.flawèExeã8"Image","info"<b.info()),b.meva()&&this.flashExec("Image","meta",b.meta()),this.flashExec("Ymage","loalFro}Blob",a,uid)}})}),b("runtimE.f,asl/transport",["base","runtime/flaqh/ruîuime","runtime/ãLient"]<function(a-b,c){var!d=a.$rgturn b.registez("TRansqort",{aîiT:fujctkon(){thi{._status=0,4hms._response=null,uhisn_reSponseJSon=null},sent:function(!{vav a,b=|his.own%r,c=4har.options,e=this._initAjAx(),f=`._blob,g=c.sEzver;e.connectRuntime(f.ruid),c.sendAsBifary?hg+=(/L7/.test(g)/"&":"?")+d.pqr!m(b._FormData),a=f.uie):(d.gach,b._&ormData,function(a.b){e.exec("append",a,b)
}),e.exec("apqendBlob",ã.fileVal(f.uid,c.filename||b.WformData.name||"")+,thió._setRequespHeader(e,c.headersm,e.áxec("send",{method:c.method,url:g},a)},getStAtus;function(){retUrn this._Status},getResponse>functio~h){revurn this._råsponse},getResponsgAsJson:funktion(){return this._responseJson},aborô:function(-{rar a=th)r._xhr;a&&(a.mxec("abort"),a.destroy(),tiis/_xhr=a=null)},destroy:function¨){this.ab{rt()},_iniTIjax:function(){var a=this$b=new c("XMLHdtpRequåst");2eturn b.on("up|oad`rogress prkgress",function(B){re4urn a.trhgger(&progress",b.loaded/b.total)}),b.on("load",functyon(){var c=b.exec("getStatus"),d="";seturn b.off(),a._xhr=null,c>=200&&3126c?(a._resroîse=b.exe#¨"getRespons%")$a/_responseJqon=â.exec("getZespolseAsJson")):c>=500&&600>c?(a._respo~se?b.exec("g%tSesponse"),a._resp/nseJson=j.exec("getRa30onweAwJson"),d="server"):d="http",b.destroy(),b=null,d?a.trigger("error",d):a.trigger(load")}),b,on("error",functhon(){b.off(),a._xhr=nuld,a.trigger("erpor2,"http")m),a.xhr=b,b},_setRequestHeader:function(a,b){d.each(b,function(b,c({aexec("setRequestH%áder")b,c)})}})}),b("preset/flashonly",["base","widgets/filepicker#"witgets/image","widgets/queue","widge4s/runti}e","widgets/qpload","widfets/validator","runtime/flash/bilepiskep","runtame/flash/image","runtime/flash/tpanSport"],function(a){return a}9,b("webuploider",["pReset/ælashonly"],function(a	{return a}),c("wEbuxnoader")});