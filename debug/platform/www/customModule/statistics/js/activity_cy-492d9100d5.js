'use strict';

require.config({
  baseUrl: '../',
  paths: {
    'customConf': 'statistics/js/customConf.js'
  }
});
require(['customConf'], function (configpaths) {
  // configpaths.paths.dialog = "myspace/js/appDialog.js";
  require.config(configpaths);

  define('', ['jquery', 'service', 'common', 'select', 'page'], function ($, service, common, select, Page) {
    //切换不是当前学年的时候，不可查看最近七天，最近三十天
    $('body').on('click', '#schoolYear li', function () {
      if ($(this).index() != 0) {
        $('#cyList').next().find('li').hide().eq(0).show();
        $('#cyList span').text('全学年');
      } else {
        $('#cyList').next().find('li').show();
      }
    });

    /**
     * @description       参与的详细情况
     * @param areaId      市id
     * @param time        时间段(yesterday:昨天，lastseven：最近七天，lastthirty：最近三十天)
     * @param phaseId     学段id
     * @param subjectId   学科id
     * @param gradeId     年级id
     * @param schoolYear  学年
     */
    function cyList(time, phaseId, subjectId, gradeId, schoolYear, currentPage, isPaging, spaceTable) {
      currentPage = currentPage || 1;
      var url = "";
      if (common.role == 'city') {
        url = '/jy/open?path=/api/statistic/area/city_areadata_area?areaId=' + common.areaid;
      } else if (common.role == 'county') {
        url = '/jy/open?path=/api/statistic/area/area_areadata_org?areaId=' + common.areaid;
      }
      $.getJSON(service.prefix + url + '&time=' + time + '&phaseId=' + phaseId + '&subjectId=' + subjectId + '&gradeId=' + gradeId + '&schoolYear=' + schoolYear + '&pageSize=10' + '&currentPage=' + currentPage + '&errorDomId=' + spaceTable).success(function (result) {
        if (result['code'] == 1) {
          var html1 = "",
              html2 = "";
          $.each(result.data.datalist, function (index, item) {
            if (index % 2 == 0) {
              trColor = "odd";
            } else {
              trColor = "even";
            }
            if (common.role == 'city') {
              html1 += "<tr class='" + trColor + "'><td>" + item.areaName + "</td><td>" + (item.jxyt_join + item.zxgk_join + item.zjzd_join + item.ktpj_join + item.xjjy_area_join) + "</td><td>" + item.jxyt_join + "</td><td>" + item.zxgk_join + "</td><td>" + item.zjzd_join + "</td><td>" + item.ktpj_join + "</td><td>" + item.xjjy_area_join + "</td></tr>";
            } else if (common.role == 'county') {
              html2 += "<tr class='" + trColor + "'><td>" + item.orgName + "</td><td>" + (item.jxyt_join + item.zxgk_join + item.zjzd_join + item.ktpj_join + item.xjjy_area_join) + "</td><td>" + item.jxyt_join + "</td><td>" + item.zxgk_join + "</td><td>" + item.zjzd_join + "</td><td>" + item.ktpj_join + "</td><td>" + item.xjjy_area_join + "</td></tr>";
            }
          });
          $('#activityFqTableCity tbody').html(html1);
          $('#activityFqTableCounty tbody').html(html2);
          if (!isPaging) {
            $('#pageTool1').html('');
          }
          if (result['data']['totalPages'] > 1 && !isPaging) renderPage('pageTool1', result['data']['totalCount']);
        }
      });
    }

    function renderPage(domId, total) {
      var p = new Page();
      p.init({
        target: '#' + domId, pagesize: 10, pageCount: 8,
        count: total, callback: function callback(current) {
          cyList($('#cyList').attr('data-value'), $('#studySection .selectTop').attr('data-value'), $('#subject .selectTop').attr('data-value'), $('#grade .selectTop').attr('data-value'), $('#schoolYear .selectTop').attr('data-value'), current, true, $('.role-' + common.role + '.activityFqTable tbody').attr('id'));
        }
      });
    }

    $('body').on('selectChange', '#cyList', function () {
      cyList($('#cyList').attr('data-value'), $('#studySection .selectTop').attr('data-value'), $('#subject .selectTop').attr('data-value'), $('#grade .selectTop').attr('data-value'), $('#schoolYear .selectTop').attr('data-value'), 1, '', $('.role-' + common.role + '.activityFqTable tbody').attr('id'));
    });
    $('body').on('click', '#searchBtn', function () {
      cyList($('#cyList').attr('data-value'), $('#studySection .selectTop').attr('data-value'), $('#subject .selectTop').attr('data-value'), $('#grade .selectTop').attr('data-value'), $('#schoolYear .selectTop').attr('data-value'), 1, '', $('.role-' + common.role + '.activityFqTable tbody').attr('id'));
    });
    $('#searchBtn').trigger('click');
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbU1vZHVsZS9zdGF0aXN0aWNzL2pzL2FjdGl2aXR5X2N5LmpzIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJjb25maWciLCJiYXNlVXJsIiwicGF0aHMiLCJjb25maWdwYXRocyIsImRlZmluZSIsIiQiLCJzZXJ2aWNlIiwiY29tbW9uIiwic2VsZWN0IiwiUGFnZSIsIm9uIiwiaW5kZXgiLCJuZXh0IiwiZmluZCIsImhpZGUiLCJlcSIsInNob3ciLCJ0ZXh0IiwiY3lMaXN0IiwidGltZSIsInBoYXNlSWQiLCJzdWJqZWN0SWQiLCJncmFkZUlkIiwic2Nob29sWWVhciIsImN1cnJlbnRQYWdlIiwiaXNQYWdpbmciLCJzcGFjZVRhYmxlIiwidXJsIiwicm9sZSIsImFyZWFpZCIsImdldEpTT04iLCJwcmVmaXgiLCJzdWNjZXNzIiwicmVzdWx0IiwiaHRtbDEiLCJodG1sMiIsImVhY2giLCJkYXRhIiwiZGF0YWxpc3QiLCJpdGVtIiwidHJDb2xvciIsImFyZWFOYW1lIiwianh5dF9qb2luIiwienhna19qb2luIiwiemp6ZF9qb2luIiwia3Rwal9qb2luIiwieGpqeV9hcmVhX2pvaW4iLCJvcmdOYW1lIiwiaHRtbCIsInJlbmRlclBhZ2UiLCJkb21JZCIsInRvdGFsIiwicCIsImluaXQiLCJ0YXJnZXQiLCJwYWdlc2l6ZSIsInBhZ2VDb3VudCIsImNvdW50IiwiY2FsbGJhY2siLCJjdXJyZW50IiwiYXR0ciIsInRyaWdnZXIiXSwibWFwcGluZ3MiOiI7O0FBQUFBLFFBQVFDLE1BQVIsQ0FBZTtBQUNiQyxXQUFTLEtBREk7QUFFYkMsU0FBTztBQUNMLGtCQUFjO0FBRFQ7QUFGTSxDQUFmO0FBTUFILFFBQVEsQ0FBQyxZQUFELENBQVIsRUFBd0IsVUFBVUksV0FBVixFQUF1QjtBQUM3QztBQUNBSixVQUFRQyxNQUFSLENBQWVHLFdBQWY7O0FBRUFDLFNBQU8sRUFBUCxFQUFXLENBQUMsUUFBRCxFQUFXLFNBQVgsRUFBc0IsUUFBdEIsRUFBZ0MsUUFBaEMsRUFB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LENBQTFGLEVBQ0V2RCxFQUFFLG1CQUFGLEVBQXVCdUQsSUFBdkIsQ0FBNEIsWUFBNUIsQ0FERixFQUM2Q3ZELEVBQUUsd0JBQUYsRUFBNEJ1RCxJQUE1QixDQUFpQyxZQUFqQyxDQUQ3QyxFQUM2RixDQUQ3RixFQUNnRyxFQURoRyxFQUVFdkQsRUFBRSxXQUFXRSxPQUFPcUIsSUFBbEIsR0FBeUIsd0JBQTNCLEVBQXFEZ0MsSUFBckQsQ0FBMEQsSUFBMUQsQ0FGRjtBQUdELEtBSkQ7QUFLQXZELE1BQUUsWUFBRixFQUFnQndELE9BQWhCLENBQXdCLE9BQXhCO0FBQ0QsR0F6Rkg7QUEwRkQsQ0E5RkQiLCJmaWxlIjoiY3VzdG9tTW9kdWxlL3N0YXRpc3RpY3MvanMvYWN0aXZpdHlfY3ktNDkyZDkxMDBkNS5qcyIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUuY29uZmlnKHtcclxuICBiYXNlVXJsOiAnLi4vJyxcclxuICBwYXRoczoge1xyXG4gICAgJ2N1c3RvbUNvbmYnOiAnc3RhdGlzdGljcy9qcy9jdXN0b21Db25mLmpzJ1xyXG4gIH1cclxufSk7XHJcbnJlcXVpcmUoWydjdXN0b21Db25mJ10sIGZ1bmN0aW9uIChjb25maWdwYXRocykge1xyXG4gIC8vIGNvbmZpZ3BhdGhzLnBhdGhzLmRpYWxvZyA9IFwibXlzcGFjZS9qcy9hcHBEaWFsb2cuanNcIjtcclxuICByZXF1aXJlLmNvbmZpZyhjb25maWdwYXRocyk7XHJcblxyXG4gIGRlZmluZSgnJywgWydqcXVlcnknLCAnc2VydmljZScsICdjb21tb24nLCAnc2VsZWN0JywgJ3BhZ2UnXSxcclxuICAgIGZ1bmN0aW9uICgkLCBzZXJ2aWNlLCBjb21tb24sIHNlbGVjdCwgUGFnZSkge1xyXG4gICAgICAvL+WIh+aNouS4jeaYr+W9k+WJjeWtpuW5tOeahOaXtuWAme+8jOS4jeWPr+afpeeci+acgOi/keS4g+Wkqe+8jOacgOi/keS4ieWNgeWkqVxyXG4gICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJyNzY2hvb2xZZWFyIGxpJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmluZGV4KCkgIT0gMCkge1xyXG4gICAgICAgICAgJCgnI2N5TGlzdCcpLm5leHQoKS5maW5kKCdsaScpLmhpZGUoKS5lcSgwKS5zaG93KCk7XHJcbiAgICAgICAgICAkKCcjY3lMaXN0IHNwYW4nKS50ZXh0KCflhajlrablubQnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJCgnI2N5TGlzdCcpLm5leHQoKS5maW5kKCdsaScpLnNob3coKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvbiAgICAgICDlj4LkuI7nmoTor6bnu4bmg4XlhrVcclxuICAgICAgICogQHBhcmFtIGFyZWFJZCAgICAgIOW4gmlkXHJcbiAgICAgICAqIEBwYXJhbSB0aW1lICAgICAgICDml7bpl7TmrrUoeWVzdGVyZGF5OuaYqOWkqe+8jGxhc3RzZXZlbu+8muacgOi/keS4g+Wkqe+8jGxhc3R0aGlydHnvvJrmnIDov5HkuInljYHlpKkpXHJcbiAgICAgICAqIEBwYXJhbSBwaGFzZUlkICAgICDlrabmrrVpZFxyXG4gICAgICAgKiBAcGFyYW0gc3ViamVjdElkICAg5a2m56eRaWRcclxuICAgICAgICogQHBhcmFtIGdyYWRlSWQgICAgIOW5tOe6p2lkXHJcbiAgICAgICAqIEBwYXJhbSBzY2hvb2xZZWFyICDlrablubRcclxuICAgICAgICovXHJcbiAgICAgIGZ1bmN0aW9uIGN5TGlzdCh0aW1lLCBwaGFzZUlkLCBzdWJqZWN0SWQsIGdyYWRlSWQsIHNjaG9vbFllYXIsIGN1cnJlbnRQYWdlLCBpc1BhZ2luZywgc3BhY2VUYWJsZSkge1xyXG4gICAgICAgIGN1cnJlbnRQYWdlID0gY3VycmVudFBhZ2UgfHwgMTtcclxuICAgICAgICB2YXIgdXJsID0gXCJcIjtcclxuICAgICAgICBpZiAoY29tbW9uLnJvbGUgPT0gJ2NpdHknKSB7XHJcbiAgICAgICAgICB1cmwgPSAnL2p5L29wZW4/cGF0aD0vYXBpL3N0YXRpc3RpYy9hcmVhL2NpdHlfYXJlYWRhdGFfYXJlYT9hcmVhSWQ9JyArIGNvbW1vbi5hcmVhaWQ7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb21tb24ucm9sZSA9PSAnY291bnR5Jykge1xyXG4gICAgICAgICAgdXJsID0gJy9qeS9vcGVuP3BhdGg9L2FwaS9zdGF0aXN0aWMvYXJlYS9hcmVhX2FyZWFkYXRhX29yZz9hcmVhSWQ9JyArIGNvbW1vbi5hcmVhaWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQuZ2V0SlNPTihzZXJ2aWNlLnByZWZpeCArIHVybCArICcmdGltZT0nICsgdGltZSArICcmcGhhc2VJZD0nICsgcGhhc2VJZCArICcmc3ViamVjdElkPScgKyBzdWJqZWN0SWQgK1xyXG4gICAgICAgICAgJyZncmFkZUlkPScgKyBncmFkZUlkICsgJyZzY2hvb2xZZWFyPScgKyBzY2hvb2xZZWFyICsgJyZwYWdlU2l6ZT0xMCcgKyAnJmN1cnJlbnRQYWdlPScgKyBjdXJyZW50UGFnZSArXHJcbiAgICAgICAgICAnJmVycm9yRG9tSWQ9JyArIHNwYWNlVGFibGUpXHJcbiAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGh0bWwxID0gXCJcIiwgaHRtbDIgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICQuZWFjaChyZXN1bHQuZGF0YS5kYXRhbGlzdCwgZnVuY3Rpb24gKGluZGV4LCBpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggJSAyID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgdHJDb2xvciA9IFwib2RkXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgdHJDb2xvciA9IFwiZXZlblwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbW1vbi5yb2xlID09ICdjaXR5Jykge1xyXG4gICAgICAgICAgICAgICAgICBodG1sMSArPSBcIjx0ciBjbGFzcz0nXCIgKyB0ckNvbG9yICsgXCInPjx0ZD5cIiArIGl0ZW0uYXJlYU5hbWUgKyBcIjwvdGQ+PHRkPlwiICtcclxuICAgICAgICAgICAgICAgICAgICAoaXRlbS5qeHl0X2pvaW4gKyBpdGVtLnp4Z2tfam9pbiArIGl0ZW0uemp6ZF9qb2luICsgaXRlbS5rdHBqX2pvaW4gKyBpdGVtLnhqanlfYXJlYV9qb2luKSArXHJcbiAgICAgICAgICAgICAgICAgICAgXCI8L3RkPjx0ZD5cIiArIGl0ZW0uanh5dF9qb2luICsgXCI8L3RkPjx0ZD5cIiArIGl0ZW0uenhna19qb2luICsgXCI8L3RkPjx0ZD5cIiArIGl0ZW0uemp6ZF9qb2luICtcclxuICAgICAgICAgICAgICAgICAgICBcIjwvdGQ+PHRkPlwiICsgaXRlbS5rdHBqX2pvaW4gKyBcIjwvdGQ+PHRkPlwiICsgaXRlbS54amp5X2FyZWFfam9pbiArIFwiPC90ZD48L3RyPlwiO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb21tb24ucm9sZSA9PSAnY291bnR5Jykge1xyXG4gICAgICAgICAgICAgICAgICBodG1sMiArPSBcIjx0ciBjbGFzcz0nXCIgKyB0ckNvbG9yICsgXCInPjx0ZD5cIiArIGl0ZW0ub3JnTmFtZSArIFwiPC90ZD48dGQ+XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgIChpdGVtLmp4eXRfam9pbiArIGl0ZW0uenhna19qb2luICsgaXRlbS56anpkX2pvaW4gKyBpdGVtLmt0cGpfam9pbiArIGl0ZW0ueGpqeV9hcmVhX2pvaW4pICtcclxuICAgICAgICAgICAgICAgICAgICBcIjwvdGQ+PHRkPlwiICsgaXRlbS5qeHl0X2pvaW4gKyBcIjwvdGQ+PHRkPlwiICsgaXRlbS56eGdrX2pvaW4gKyBcIjwvdGQ+PHRkPlwiICsgaXRlbS56anpkX2pvaW4gK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiPC90ZD48dGQ+XCIgKyBpdGVtLmt0cGpfam9pbiArIFwiPC90ZD48dGQ+XCIgKyBpdGVtLnhqanlfYXJlYV9qb2luICsgXCI8L3RkPjwvdHI+XCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgJCgnI2FjdGl2aXR5RnFUYWJsZUNpdHkgdGJvZHknKS5odG1sKGh0bWwxKTtcclxuICAgICAgICAgICAgICAkKCcjYWN0aXZpdHlGcVRhYmxlQ291bnR5IHRib2R5JykuaHRtbChodG1sMik7XHJcbiAgICAgICAgICAgICAgaWYgKCFpc1BhZ2luZykge1xyXG4gICAgICAgICAgICAgICAgJCgnI3BhZ2VUb29sMScpLmh0bWwoJycpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAocmVzdWx0WydkYXRhJ11bJ3RvdGFsUGFnZXMnXSA+IDEgJiYgIWlzUGFnaW5nKVxyXG4gICAgICAgICAgICAgICAgcmVuZGVyUGFnZSgncGFnZVRvb2wxJywgcmVzdWx0WydkYXRhJ11bJ3RvdGFsQ291bnQnXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiByZW5kZXJQYWdlKGRvbUlkLCB0b3RhbCkge1xyXG4gICAgICAgIHZhciBwID0gbmV3IFBhZ2UoKTtcclxuICAgICAgICBwLmluaXQoe1xyXG4gICAgICAgICAgdGFyZ2V0OiAnIycgKyBkb21JZCwgcGFnZXNpemU6IDEwLCBwYWdlQ291bnQ6IDgsXHJcbiAgICAgICAgICBjb3VudDogdG90YWwsIGNhbGxiYWNrOiBmdW5jdGlvbiAoY3VycmVudCkge1xyXG4gICAgICAgICAgICBjeUxpc3QoJCgnI2N5TGlzdCcpLmF0dHIoJ2RhdGEtdmFsdWUnKSwgJCgnI3N0dWR5U2VjdGlvbiAuc2VsZWN0VG9wJykuYXR0cignZGF0YS12YWx1ZScpLCAkKCcjc3ViamVjdCAuc2VsZWN0VG9wJykuYXR0cignZGF0YS12YWx1ZScpLFxyXG4gICAgICAgICAgICAgICQoJyNncmFkZSAuc2VsZWN0VG9wJykuYXR0cignZGF0YS12YWx1ZScpLCAkKCcjc2Nob29sWWVhciAuc2VsZWN0VG9wJykuYXR0cignZGF0YS12YWx1ZScpLCBjdXJyZW50LCB0cnVlLFxyXG4gICAgICAgICAgICAgICQoJy5yb2xlLScgKyBjb21tb24ucm9sZSArICcuYWN0aXZpdHlGcVRhYmxlIHRib2R5JykuYXR0cignaWQnKSk7XHJcblxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkKCdib2R5Jykub24oJ3NlbGVjdENoYW5nZScsICcjY3lMaXN0JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGN5TGlzdCgkKCcjY3lMaXN0JykuYXR0cignZGF0YS12YWx1ZScpLCAkKCcjc3R1ZHlTZWN0aW9uIC5zZWxlY3RUb3AnKS5hdHRyKCdkYXRhLXZhbHVlJyksICQoJyNzdWJqZWN0IC5zZWxlY3RUb3AnKS5hdHRyKCdkYXRhLXZhbHVlJyksXHJcbiAgICAgICAgICAkKCcjZ3JhZGUgLnNlbGVjdFRvcCcpLmF0dHIoJ2RhdGEtdmFsdWUnKSwgJCgnI3NjaG9vbFllYXIgLnNlbGVjdFRvcCcpLmF0dHIoJ2RhdGEtdmFsdWUnKSwgMSwgJycsXHJcbiAgICAgICAgICAkKCcucm9sZS0nICsgY29tbW9uLnJvbGUgKyAnLmFjdGl2aXR5RnFUYWJsZSB0Ym9keScpLmF0dHIoJ2lkJykpO1xyXG4gICAgICB9KTtcclxuICAgICAgJCgnYm9keScpLm9uKCdjbGljaycsICcjc2VhcmNoQnRuJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGN5TGlzdCgkKCcjY3lMaXN0JykuYXR0cignZGF0YS12YWx1ZScpLCAkKCcjc3R1ZHlTZWN0aW9uIC5zZWxlY3RUb3AnKS5hdHRyKCdkYXRhLXZhbHVlJyksICQoJyNzdWJqZWN0IC5zZWxlY3RUb3AnKS5hdHRyKCdkYXRhLXZhbHVlJyksXHJcbiAgICAgICAgICAkKCcjZ3JhZGUgLnNlbGVjdFRvcCcpLmF0dHIoJ2RhdGEtdmFsdWUnKSwgJCgnI3NjaG9vbFllYXIgLnNlbGVjdFRvcCcpLmF0dHIoJ2RhdGEtdmFsdWUnKSwgMSwgJycsXHJcbiAgICAgICAgICAkKCcucm9sZS0nICsgY29tbW9uLnJvbGUgKyAnLmFjdGl2aXR5RnFUYWJsZSB0Ym9keScpLmF0dHIoJ2lkJykpO1xyXG4gICAgICB9KTtcclxuICAgICAgJCgnI3NlYXJjaEJ0bicpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICB9KTtcclxufSkiXX0=
