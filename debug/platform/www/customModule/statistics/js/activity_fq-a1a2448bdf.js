'use strict';

require.config({
  baseUrl: '../',
  paths: {
    'customConf': 'statistics/js/customConf.js'
  }
});
require(['customConf'], function (configpaths) {
  // configpaths.paths.dialog = "myspace/js/appDialog.js";
  require.config(configpaths);

  define('', ['jquery', 'service', 'common', 'select', 'page'], function ($, service, common, select, Page) {
    //切换不是当前学年的时候，不可查看最近七天，最近三十天
    $('body').on('click', '#schoolYear li', function () {
      if ($(this).index() != 0) {
        $('#fqList').next().find('li').hide().eq(0).show();
        $('#fqList span').text('全学年');
      } else {
        $('#fqList').next().find('li').show();
      }
    });
    /**
     * @description       发起详细情况
     * @param areaId      市id
     * @param time        时间段(yesterday:昨天，lastseven：最近七天，lastthirty：最近三十天)
     * @param phaseId     学段id
     * @param subjectId   学科id
     * @param gradeId     年级id
     * @param schoolYear  学年
     */
    var currentPage = 1;

    function fqList(time, phaseId, subjectId, gradeId, schoolYear, currentPage, isPaging, spaceTable) {
      currentPage = currentPage || 1;
      var url = "";
      if (common.role == 'city') {
        url = '/jy/open?path=/api/statistic/area/city_areadata_area?areaId=' + common.areaid;
      } else if (common.role == 'county') {
        url = '/jy/open?path=/api/statistic/area/area_areadata_subject?areaId=' + common.areaid;
      } else if (common.role == 'school') {
        url = '/jy/open?path=/api/statistic/org/sch_area_view?orgId=' + common.orgid;
      }
      $.getJSON(service.prefix + url + '&time=' + time + '&phaseId=' + phaseId + '&subjectId=' + subjectId + '&gradeId=' + gradeId + '&schoolYear=' + schoolYear + '&pageSize=10' + '&currentPage=' + currentPage + '&errorDomId=' + spaceTable).success(function (result) {
        if (result['code'] == 1) {
          var html1 = "",
              html2 = "",
              html3 = "";
          $.each(result.data.datalist, function (index, item) {
            if (index % 2 == 0) {
              trColor = "odd";
            } else {
              trColor = "even";
            }
            if (common.role == 'city') {
              html1 += "<tr class='" + trColor + "'><td>" + item.areaName + "</td><td>" + (item.jxyt_issue + item.zxgk_issue + item.zjzd_issue + item.ktpj_issue + item.xjjy_area_issue) + "</td><td>" + item.jxyt_issue + "</td><td>" + item.zxgk_issue + "</td><td>" + item.zjzd_issue + "</td><td>" + item.ktpj_issue + "</td><td>" + item.xjjy_area_issue + "</td></tr>";
            } else if (common.role == 'county') {
              html2 += "<tr class='" + trColor + "'><td>" + item.subjectName + "</td><td>" + (item.jxyt_issue + item.zxgk_issue + item.zjzd_issue + item.ktpj_issue + item.xjjy_area_issue) + "</td><td>" + item.jxyt_issue + "</td><td>" + item.zxgk_issue + "</td><td>" + item.zjzd_issue + "</td><td>" + item.ktpj_issue + "</td><td>" + item.xjjy_area_issue + "</td></tr>";
            } else if (common.role == 'school') {
              html3 += "<tr class='" + trColor + "'><td>" + item.userName + "</td><td>" + item.jxyt_join + "</td><td>" + item.zxgk_join + "</td><td>" + item.zjzd_join + "</td><td>" + item.ktpj_join + "</td><td>" + item.xjjy_area_join + "</td></tr>";
            }
          });
          if (common.role == 'city') {
            $('#activityFqTableCity tbody').html(html1);
          } else if (common.role == 'county') {
            $('#activityFqTableCounty tbody').html(html2);
          } else if (common.role == 'school') {
            $('#activityFqTableSchool tbody').html(html3);
          }
          if (!isPaging) {
            $('#pageTool1').html('');
          }
          if (result['data']['totalPages'] > 1 && !isPaging) renderPage('pageTool1', result['data']['totalCount']);
        }
      });
    }

    function renderPage(domId, total) {
      var p = new Page();
      p.init({
        target: '#' + domId, pagesize: 10, pageCount: 8,
        count: total, callback: function callback(current) {
          fqList($('#fqList').attr('data-value'), $('#studySection .selectTop').attr('data-value'), $('#subject .selectTop').attr('data-value'), $('#grade .selectTop').attr('data-value'), $('#schoolYear .selectTop').attr('data-value'), current, true, $('.role-' + common.role + '.activityFqTable tbody').attr('id'));
        }
      });
    }

    $('body').on('selectChange', '#fqList', function () {
      fqList($('#fqList').attr('data-value'), $('#studySection .selectTop').attr('data-value'), $('#subject .selectTop').attr('data-value'), $('#grade .selectTop').attr('data-value'), $('#schoolYear .selectTop').attr('data-value'), 1, '', $('.role-' + common.role + '.activityFqTable tbody').attr('id'));
    });

    $('body').on('click', '#searchBtn', function () {
      fqList($('#fqList').attr('data-value'), $('#studySection .selectTop').attr('data-value'), $('#subject .selectTop').attr('data-value'), $('#grade .selectTop').attr('data-value'), $('#schoolYear .selectTop').attr('data-value'), 1, '', $('.role-' + common.role + '.activityFqTable tbody').attr('id'));
    });
    $('#searchBtn').trigger('click');
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbU1vZHVsZS9zdGF0aXN0aWNzL2pzL2FjdGl2aXR5X2ZxLmpzIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJjb25maWciLCJiYXNlVXJsIiwicGF0aHMiLCJjb25maWdwYXRocyIsImRlZmluZSIsIiQiLCJzZXJ2aWNlIiwiY29tbW9uIiwic2VsZWN0IiwiUGFnZSIsIm9uIiwiaW5kZXgiLCJuZXh0IiwiZmluZCIsImhpZGUiLCJlcSIsInNob3ciLCJ0ZXh0IiwiY3VycmVudFBhZ2UiLCJmcUxpc3QiLCJ0aW1lIiwicGhhc2VJZCIsInN1YmplY3RJZCIsImdyYWRlSWQiLCJzY2hvb2xZZWFyIiwiaXNQYWdpbmciLCJzcGFjZVRhYmxlIiwidXJsIiwicm9sZSIsImFyZWFpZCIsIm9yZ2lkIiwiZ2V0SlNPTiIsInByZWZpeCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJodG1sMSIsImh0bWwyIiwiaHRtbDMiLCJlYWNoIiwiZGF0YSIsImRhdGFsaXN0IiwiaXRlbSIsInRyQ29sb3IiLCJhcmVhTmFtZSIsImp4eXRfaXNzdWUiLCJ6eGdrX2lzc3VlIiwiemp6ZF9pc3N1ZSIsImt0cGpfaXNzdWUiLCJ4amp5X2FyZWFfaXNzdWUiLCJzdWJqZWN0TmFtZSIsInVzZXJOYW1lIiwianh5dF9qb2luIiwienhna19qb2luIiwiemp6ZF9qb2luIiwia3Rwal9qb2luIiwieGpqeV9hcmVhX2pvaW4iLCJodG1sIiwicmVuZGVyUGFnZSIsImRvbUlkIiwidG90YWwiLCJwIiwiaW5pdCIsInRhcmdldCIsInBhZ2VzaXplIiwicGFnZUNvdW50IiwiY291bnQiLCJjYWxsYmFjayIsImN1cnJlbnQiLCJhdHRyIiwidHJpZ2dlciJdLCJtYXBwaW5ncyI6Ijs7QUFBQUEsUUFBUUMsTUFBUixDQUFlO0FBQ2JDLFdBQVMsS0FESTtBQUViQyxTQUFPO0FBQ0wsa0JBQWM7QUFEVDtBQUZNLENBQWY7QUFNQUgsUUFBUSxDQUFDLFlBQUQsQ0FBUixFQUF3QixVQUFVSSxXQUFWLEVBQXVCO0FB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LENBRkY7QUFHRCxLQUpEO0FBS0EvRCxNQUFFLFlBQUYsRUFBZ0JnRSxPQUFoQixDQUF3QixPQUF4QjtBQUNELEdBeEdIO0FBeUdELENBN0dEIiwiZmlsZSI6ImN1c3RvbU1vZHVsZS9zdGF0aXN0aWNzL2pzL2FjdGl2aXR5X2ZxLWExYTI0NDhiZGYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlLmNvbmZpZyh7XHJcbiAgYmFzZVVybDogJy4uLycsXHJcbiAgcGF0aHM6IHtcclxuICAgICdjdXN0b21Db25mJzogJ3N0YXRpc3RpY3MvanMvY3VzdG9tQ29uZi5qcydcclxuICB9XHJcbn0pO1xyXG5yZXF1aXJlKFsnY3VzdG9tQ29uZiddLCBmdW5jdGlvbiAoY29uZmlncGF0aHMpIHtcclxuICAvLyBjb25maWdwYXRocy5wYXRocy5kaWFsb2cgPSBcIm15c3BhY2UvanMvYXBwRGlhbG9nLmpzXCI7XHJcbiAgcmVxdWlyZS5jb25maWcoY29uZmlncGF0aHMpO1xyXG5cclxuICBkZWZpbmUoJycsIFsnanF1ZXJ5JywgJ3NlcnZpY2UnLCAnY29tbW9uJywgJ3NlbGVjdCcsICdwYWdlJ10sXHJcbiAgICBmdW5jdGlvbiAoJCwgc2VydmljZSwgY29tbW9uLCBzZWxlY3QsIFBhZ2UpIHtcclxuICAgICAgLy/liIfmjaLkuI3mmK/lvZPliY3lrablubTnmoTml7blgJnvvIzkuI3lj6/mn6XnnIvmnIDov5HkuIPlpKnvvIzmnIDov5HkuInljYHlpKlcclxuICAgICAgJCgnYm9keScpLm9uKCdjbGljaycsICcjc2Nob29sWWVhciBsaScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoJCh0aGlzKS5pbmRleCgpICE9IDApIHtcclxuICAgICAgICAgICQoJyNmcUxpc3QnKS5uZXh0KCkuZmluZCgnbGknKS5oaWRlKCkuZXEoMCkuc2hvdygpO1xyXG4gICAgICAgICAgJCgnI2ZxTGlzdCBzcGFuJykudGV4dCgn5YWo5a2m5bm0Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICQoJyNmcUxpc3QnKS5uZXh0KCkuZmluZCgnbGknKS5zaG93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEBkZXNjcmlwdGlvbiAgICAgICDlj5Hotbfor6bnu4bmg4XlhrVcclxuICAgICAgICogQHBhcmFtIGFyZWFJZCAgICAgIOW4gmlkXHJcbiAgICAgICAqIEBwYXJhbSB0aW1lICAgICAgICDml7bpl7TmrrUoeWVzdGVyZGF5OuaYqOWkqe+8jGxhc3RzZXZlbu+8muacgOi/keS4g+Wkqe+8jGxhc3R0aGlydHnvvJrmnIDov5HkuInljYHlpKkpXHJcbiAgICAgICAqIEBwYXJhbSBwaGFzZUlkICAgICDlrabmrrVpZFxyXG4gICAgICAgKiBAcGFyYW0gc3ViamVjdElkICAg5a2m56eRaWRcclxuICAgICAgICogQHBhcmFtIGdyYWRlSWQgICAgIOW5tOe6p2lkXHJcbiAgICAgICAqIEBwYXJhbSBzY2hvb2xZZWFyICDlrablubRcclxuICAgICAgICovXHJcbiAgICAgIHZhciBjdXJyZW50UGFnZSA9IDE7XHJcblxyXG4gICAgICBmdW5jdGlvbiBmcUxpc3QodGltZSwgcGhhc2VJZCwgc3ViamVjdElkLCBncmFkZUlkLCBzY2hvb2xZZWFyLCBjdXJyZW50UGFnZSwgaXNQYWdpbmcsIHNwYWNlVGFibGUpIHtcclxuICAgICAgICBjdXJyZW50UGFnZSA9IGN1cnJlbnRQYWdlIHx8IDE7XHJcbiAgICAgICAgdmFyIHVybCA9IFwiXCI7XHJcbiAgICAgICAgaWYgKGNvbW1vbi5yb2xlID09ICdjaXR5Jykge1xyXG4gICAgICAgICAgdXJsID0gJy9qeS9vcGVuP3BhdGg9L2FwaS9zdGF0aXN0aWMvYXJlYS9jaXR5X2FyZWFkYXRhX2FyZWE/YXJlYUlkPScgKyBjb21tb24uYXJlYWlkO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY29tbW9uLnJvbGUgPT0gJ2NvdW50eScpIHtcclxuICAgICAgICAgIHVybCA9ICcvankvb3Blbj9wYXRoPS9hcGkvc3RhdGlzdGljL2FyZWEvYXJlYV9hcmVhZGF0YV9zdWJqZWN0P2FyZWFJZD0nICsgY29tbW9uLmFyZWFpZDtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvbW1vbi5yb2xlID09ICdzY2hvb2wnKSB7XHJcbiAgICAgICAgICB1cmwgPSAnL2p5L29wZW4/cGF0aD0vYXBpL3N0YXRpc3RpYy9vcmcvc2NoX2FyZWFfdmlldz9vcmdJZD0nICsgY29tbW9uLm9yZ2lkO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkLmdldEpTT04oc2VydmljZS5wcmVmaXggKyB1cmwgKyAnJnRpbWU9JyArIHRpbWUgKyAnJnBoYXNlSWQ9JyArIHBoYXNlSWQgKyAnJnN1YmplY3RJZD0nICsgc3ViamVjdElkICtcclxuICAgICAgICAgICcmZ3JhZGVJZD0nICsgZ3JhZGVJZCArICcmc2Nob29sWWVhcj0nICsgc2Nob29sWWVhciArICcmcGFnZVNpemU9MTAnICsgJyZjdXJyZW50UGFnZT0nICsgY3VycmVudFBhZ2UgK1xyXG4gICAgICAgICAgJyZlcnJvckRvbUlkPScgKyBzcGFjZVRhYmxlKVxyXG4gICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT0gMSkge1xyXG4gICAgICAgICAgICAgIHZhciBodG1sMSA9IFwiXCIsIGh0bWwyID0gXCJcIiwgaHRtbDMgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICQuZWFjaChyZXN1bHQuZGF0YS5kYXRhbGlzdCwgZnVuY3Rpb24gKGluZGV4LCBpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggJSAyID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgdHJDb2xvciA9IFwib2RkXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgdHJDb2xvciA9IFwiZXZlblwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbW1vbi5yb2xlID09ICdjaXR5Jykge1xyXG4gICAgICAgICAgICAgICAgICBodG1sMSArPSBcIjx0ciBjbGFzcz0nXCIgKyB0ckNvbG9yICsgXCInPjx0ZD5cIiArIGl0ZW0uYXJlYU5hbWUgKyBcIjwvdGQ+PHRkPlwiICtcclxuICAgICAgICAgICAgICAgICAgICAoaXRlbS5qeHl0X2lzc3VlICsgaXRlbS56eGdrX2lzc3VlICsgaXRlbS56anpkX2lzc3VlICsgaXRlbS5rdHBqX2lzc3VlICsgaXRlbS54amp5X2FyZWFfaXNzdWUpICtcclxuICAgICAgICAgICAgICAgICAgICBcIjwvdGQ+PHRkPlwiICsgaXRlbS5qeHl0X2lzc3VlICsgXCI8L3RkPjx0ZD5cIiArIGl0ZW0uenhna19pc3N1ZSArIFwiPC90ZD48dGQ+XCIgKyBpdGVtLnpqemRfaXNzdWUgK1xyXG4gICAgICAgICAgICAgICAgICAgIFwiPC90ZD48dGQ+XCIgKyBpdGVtLmt0cGpfaXNzdWUgKyBcIjwvdGQ+PHRkPlwiICsgaXRlbS54amp5X2FyZWFfaXNzdWUgKyBcIjwvdGQ+PC90cj5cIjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tbW9uLnJvbGUgPT0gJ2NvdW50eScpIHtcclxuICAgICAgICAgICAgICAgICAgaHRtbDIgKz0gXCI8dHIgY2xhc3M9J1wiICsgdHJDb2xvciArIFwiJz48dGQ+XCIgKyBpdGVtLnN1YmplY3ROYW1lICsgXCI8L3RkPjx0ZD5cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgKGl0ZW0uanh5dF9pc3N1ZSArIGl0ZW0uenhna19pc3N1ZSArIGl0ZW0uemp6ZF9pc3N1ZSArIGl0ZW0ua3Rwal9pc3N1ZSArIGl0ZW0ueGpqeV9hcmVhX2lzc3VlKSArXHJcbiAgICAgICAgICAgICAgICAgICAgXCI8L3RkPjx0ZD5cIiArIGl0ZW0uanh5dF9pc3N1ZSArIFwiPC90ZD48dGQ+XCIgKyBpdGVtLnp4Z2tfaXNzdWUgKyBcIjwvdGQ+PHRkPlwiICsgaXRlbS56anpkX2lzc3VlICtcclxuICAgICAgICAgICAgICAgICAgICBcIjwvdGQ+PHRkPlwiICsgaXRlbS5rdHBqX2lzc3VlICsgXCI8L3RkPjx0ZD5cIiArIGl0ZW0ueGpqeV9hcmVhX2lzc3VlICsgXCI8L3RkPjwvdHI+XCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbW1vbi5yb2xlID09ICdzY2hvb2wnKSB7XHJcbiAgICAgICAgICAgICAgICAgIGh0bWwzICs9IFwiPHRyIGNsYXNzPSdcIiArIHRyQ29sb3IgKyBcIic+PHRkPlwiICsgaXRlbS51c2VyTmFtZSArXHJcbiAgICAgICAgICAgICAgICAgICAgXCI8L3RkPjx0ZD5cIiArIGl0ZW0uanh5dF9qb2luICsgXCI8L3RkPjx0ZD5cIiArIGl0ZW0uenhna19qb2luICsgXCI8L3RkPjx0ZD5cIiArIGl0ZW0uemp6ZF9qb2luICtcclxuICAgICAgICAgICAgICAgICAgICBcIjwvdGQ+PHRkPlwiICsgaXRlbS5rdHBqX2pvaW4gKyBcIjwvdGQ+PHRkPlwiICsgaXRlbS54amp5X2FyZWFfam9pbiArIFwiPC90ZD48L3RyPlwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIGlmIChjb21tb24ucm9sZSA9PSAnY2l0eScpIHtcclxuICAgICAgICAgICAgICAgICQoJyNhY3Rpdml0eUZxVGFibGVDaXR5IHRib2R5JykuaHRtbChodG1sMSk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb21tb24ucm9sZSA9PSAnY291bnR5Jykge1xyXG4gICAgICAgICAgICAgICAgJCgnI2FjdGl2aXR5RnFUYWJsZUNvdW50eSB0Ym9keScpLmh0bWwoaHRtbDIpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tbW9uLnJvbGUgPT0gJ3NjaG9vbCcpIHtcclxuICAgICAgICAgICAgICAgICQoJyNhY3Rpdml0eUZxVGFibGVTY2hvb2wgdGJvZHknKS5odG1sKGh0bWwzKTtcclxuXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmICghaXNQYWdpbmcpIHtcclxuICAgICAgICAgICAgICAgICQoJyNwYWdlVG9vbDEnKS5odG1sKCcnKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnZGF0YSddWyd0b3RhbFBhZ2VzJ10gPiAxICYmICFpc1BhZ2luZylcclxuICAgICAgICAgICAgICAgIHJlbmRlclBhZ2UoJ3BhZ2VUb29sMScsIHJlc3VsdFsnZGF0YSddWyd0b3RhbENvdW50J10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHJlbmRlclBhZ2UoZG9tSWQsIHRvdGFsKSB7XHJcbiAgICAgICAgdmFyIHAgPSBuZXcgUGFnZSgpO1xyXG4gICAgICAgIHAuaW5pdCh7XHJcbiAgICAgICAgICB0YXJnZXQ6ICcjJyArIGRvbUlkLCBwYWdlc2l6ZTogMTAsIHBhZ2VDb3VudDogOCxcclxuICAgICAgICAgIGNvdW50OiB0b3RhbCwgY2FsbGJhY2s6IGZ1bmN0aW9uIChjdXJyZW50KSB7XHJcbiAgICAgICAgICAgIGZxTGlzdCgkKCcjZnFMaXN0JykuYXR0cignZGF0YS12YWx1ZScpLCAkKCcjc3R1ZHlTZWN0aW9uIC5zZWxlY3RUb3AnKS5hdHRyKCdkYXRhLXZhbHVlJyksICQoJyNzdWJqZWN0IC5zZWxlY3RUb3AnKS5hdHRyKCdkYXRhLXZhbHVlJyksXHJcbiAgICAgICAgICAgICAgJCgnI2dyYWRlIC5zZWxlY3RUb3AnKS5hdHRyKCdkYXRhLXZhbHVlJyksICQoJyNzY2hvb2xZZWFyIC5zZWxlY3RUb3AnKS5hdHRyKCdkYXRhLXZhbHVlJyksIGN1cnJlbnQsIHRydWUsXHJcbiAgICAgICAgICAgICAgJCgnLnJvbGUtJyArIGNvbW1vbi5yb2xlICsgJy5hY3Rpdml0eUZxVGFibGUgdGJvZHknKS5hdHRyKCdpZCcpKTtcclxuXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICQoJ2JvZHknKS5vbignc2VsZWN0Q2hhbmdlJywgJyNmcUxpc3QnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZnFMaXN0KCQoJyNmcUxpc3QnKS5hdHRyKCdkYXRhLXZhbHVlJyksICQoJyNzdHVkeVNlY3Rpb24gLnNlbGVjdFRvcCcpLmF0dHIoJ2RhdGEtdmFsdWUnKSwgJCgnI3N1YmplY3QgLnNlbGVjdFRvcCcpLmF0dHIoJ2RhdGEtdmFsdWUnKSxcclxuICAgICAgICAgICQoJyNncmFkZSAuc2VsZWN0VG9wJykuYXR0cignZGF0YS12YWx1ZScpLCAkKCcjc2Nob29sWWVhciAuc2VsZWN0VG9wJykuYXR0cignZGF0YS12YWx1ZScpLCAxLCAnJyxcclxuICAgICAgICAgICQoJy5yb2xlLScgKyBjb21tb24ucm9sZSArICcuYWN0aXZpdHlGcVRhYmxlIHRib2R5JykuYXR0cignaWQnKSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgJCgnYm9keScpLm9uKCdjbGljaycsICcjc2VhcmNoQnRuJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZxTGlzdCgkKCcjZnFMaXN0JykuYXR0cignZGF0YS12YWx1ZScpLCAkKCcjc3R1ZHlTZWN0aW9uIC5zZWxlY3RUb3AnKS5hdHRyKCdkYXRhLXZhbHVlJyksICQoJyNzdWJqZWN0IC5zZWxlY3RUb3AnKS5hdHRyKCdkYXRhLXZhbHVlJyksXHJcbiAgICAgICAgICAkKCcjZ3JhZGUgLnNlbGVjdFRvcCcpLmF0dHIoJ2RhdGEtdmFsdWUnKSwgJCgnI3NjaG9vbFllYXIgLnNlbGVjdFRvcCcpLmF0dHIoJ2RhdGEtdmFsdWUnKSwgMSwgJycsXHJcbiAgICAgICAgICAkKCcucm9sZS0nICsgY29tbW9uLnJvbGUgKyAnLmFjdGl2aXR5RnFUYWJsZSB0Ym9keScpLmF0dHIoJ2lkJykpO1xyXG4gICAgICB9KTtcclxuICAgICAgJCgnI3NlYXJjaEJ0bicpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICB9KTtcclxufSkiXX0=
