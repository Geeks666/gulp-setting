'use strict';

require.config({
  baseUrl: '../',
  paths: {
    'platformConf': 'public/js/platformConf-541e3fb1ce.js'
  }
});
require(['platformConf'], function (configpaths) {
  // configpaths.paths.dialog = "myspace/js/appDialog.js";
  require.config(configpaths);
  define('', ['jquery', 'template', 'echarts', 'layer', 'service', 'orgConfig', 'tools', 'banner', 'textScroll', 'tab', 'ajaxBanner', 'secondNav', 'footer', 'header'], function ($, template, echarts, layer, service, orgConfig, tools, banner, textScroll, tab, ajaxBanner, secondNav, footer, header) {
    var colors = ['#f16c32', '#f19d32', '#f3d753', '#81ca4c', '#35a95d', '#14c7e0', '#4e8fe8', '#426db8', '#9053cf', '#cf539f', '#d7423d'];

    getTeacherData($(".teacher_list"), 'teacherRank');
    getUserRankData($(".user_rank_echart"), 'userRankEchart');
    getResourceRank($(".resource_rank_echart"), service.appIds['byqjyjg_appId'], '140', 'resourceRankEchart');
    getActivityRankData($(".activity_rank_echart"), 'activityRankEchart');
    getActivityWorksRankData($(".activity_works_rank_echart"), 'activityWorksRankEchart');

    /**
     *
     * @param $obj
     * @param temId
     * @param areaId
     */
    function getTeacherData($obj, temId) {
      $.ajax({
        url: service.htmlHost + '/pf/api/rank/teaR',
        type: 'GET',
        success: function success(data) {
          if (data && data.code == "success") {
            var html = "";
            if (data.data && data.data.list && data.data.list.length > 0) {
              for (var i = 0; i < data.data.list.length; i++) {
                data.data.list[i].showName = tools.hideTextByLen(data.data.list[i].name, 16);
              }
              html = template(temId, { 'data': data.data.list });
              $(".teacher_rank .total_num span").text(data.data.count);
            } else {
              html = showprompt();
            }
            $obj.html(html);
          } else {
            layer.alert(data.msg, { icon: 0 });
          }
        },
        error: function error(data) {
          layer.alert("获取教师数量排行异常。", { icon: 0 });
        }
      });
    };

    function getUserRankData($obj, id) {
      $.ajax({
        url: service.htmlHost + '/pf/api/rank/useR',
        type: 'GET',
        success: function success(data) {
          console.log(data);
          if (data && data.code == "success") {
            if (data.data && data.data.list && data.data.list.length > 0) {
              for (var i = 0; i < data.data.list.length; i++) {
                data.data.list[i].name = data.data.list[i].name;
              }
              $(".user_rank .total_num span").text(data.data.count);
              initUserRankEchart(data.data.list, id);
            } else {
              $obj.html(showprompt());
            }
          } else {
            layer.alert(data.msg, { icon: 0 });
          }
        },
        error: function error(data) {
          layer.alert("获取教师活跃度异常。", { icon: 0 });
        }
      });
    }

    function initUserRankEchart(data, id) {
      var user_rank_echart = echarts.init(document.getElementById(id));
      var option = {
        title: {},
        tooltip: {
          trigger: 'item',
          formatter: "{a} <br/>{b} : {c} ({d}%)"
        },
        color: colors.slice(0, data.length),
        legend: {
          left: '30',
          bottom: '30',
          data: []
        },
        series: [{
          name: '教师活跃度',
          type: 'pie',
          radius: '55%',
          center: ['50%', '38%'],
          data: data,
          itemStyle: {
            emphasis: {
              shadowBlur: 10,
              shadowOffsetX: 0,
              shadowColor: 'rgba(0, 0, 0, 0.5)'
            }
          }
        }]
      };

      for (var i = 0; i < data.length; i++) {
        option.legend.data[i] = data[i].name;
        option.series[0].data[i].label = {};
        option.series[0].data[i].label.normal = {};
        option.series[0].data[i].label.normal.formatter = tools.hideTextByLen(data[i].name, 12);
      }
      user_rank_echart.setOption(option);
    };

    function getResourceRank($obj, orgCode, phaseId, id) {
      var $data = {
        'orgCode': orgCode,
        'phaseId': phaseId
      };
      $.ajax({
        url: service.htmlHost + '/pf/api/direct/resI_subResRanking',
        type: 'GET',
        data: $data,
        success: function success(data) {
          if (data && data.success == true) {
            if (data.data && data.data.length > 0) {
              initResourceRankEchart(data.data, id);
            } else {
              $obj.html(showprompt());
            }
          } else {
            layer.alert("获取资源贡献排行数据异常", { icon: 0 });
          }
        },
        error: function error(data) {
          layer.alert("获取资源贡献排行数据异常。", { icon: 0 });
        }
      });
    }

    function initResourceRankEchart(data, id) {
      var resource_rank_echart = echarts.init(document.getElementById(id));
      option = {
        title: {},
        tooltip: {
          trigger: 'item',
          formatter: "{a} <br/>{b} : {c} ({d}%)"
        },
        color: colors.slice(0, data.length),
        legend: {
          orient: 'vertical',
          x: '70',
          y: 'middle',
          itemGap: 25,
          data: []
        },
        series: [{
          name: '资源贡献数',
          type: 'pie',
          radius: [30, 110],
          center: ['70%', '50%'],
          roseType: 'area',
          data: data
        }]
      };
      for (var i = 0; i < data.length; i++) {
        if (i < 10) {
          option.legend.data[i] = data[i].name;
          option.series[0].data[i].label = {};
          option.series[0].data[i].label.normal = {};
          option.series[0].data[i].label.normal.formatter = tools.hideTextByLen(data[i].name, 12);
        } else {
          if (i == 10) {
            option.legend.data[i] = '其它';
            option.series[0].data[i].name = '其它';
          } else {
            option.series[0].data[10].value += data[i].value;
          }
        }
      }
      option.series[0].data = option.series[0].data.slice(0, 11);
      resource_rank_echart.setOption(option);
    };

    function getActivityRankData($obj, id) {
      $.ajax({
        url: service.htmlHost + '/pf/api/direct/activity_teachers',
        type: 'GET',
        success: function success(data) {
          console.log(data);
          if (data && data.code == "success") {
            if (data.data && data.data.list && data.data.list.length > 0) {
              for (var i = 0; i < data.data.list.length; i++) {
                data.data.list[i].name = data.data.list[i].activityName;
                data.data.list[i].value = data.data.list[i].teacherCount;
              }
              $(".activity_rank .total_num span").text(data.data.teacherCount);
              initActivityRankEchart(data.data.list.slice(0, 10), id);
            } else {
              $obj.html(showprompt());
            }
          } else {
            layer.alert(data.msg, { icon: 0 });
          }
        },
        error: function error(data) {
          layer.alert("获取活动参与度排行异常。", { icon: 0 });
        }
      });
    }

    function initActivityRankEchart(data, id) {
      var activity_rank_echart = echarts.init(document.getElementById(id));
      option = {
        title: {},
        tooltip: {
          trigger: 'item',
          formatter: "{a} <br/>{b} : {c} ({d}%)"
        },
        color: colors.slice(0, data.length),
        series: [{
          name: '活动参与度排行',
          type: 'pie',
          radius: [25, 100],
          center: ['50%', '50%'],
          roseType: 'area',
          data: data
        }]
      };
      for (var i = 0; i < data.length; i++) {
        option.series[0].data[i].label = {};
        option.series[0].data[i].label.normal = {};
        option.series[0].data[i].label.normal.formatter = tools.hideTextByLen(data[i].name, 12);
      }
      activity_rank_echart.setOption(option);
    };

    function getActivityWorksRankData($obj, id) {
      $.ajax({
        url: service.htmlHost + '/pf/api/direct/activity_works',
        type: 'GET',
        success: function success(data) {
          console.log(data);
          if (data && data.code == "success") {
            if (data.data && data.data.list && data.data.list.length > 0) {
              for (var i = 0; i < data.data.list.length; i++) {
                data.data.list[i].name = data.data.list[i].activityName;
                data.data.list[i].value = data.data.list[i].worksCount;
              }
              $(".activity_works_rank .total_num span").text(data.data.worksCount);
              initActivityWorksRankEchart(data.data.list.slice(0, 10), id);
            } else {
              $obj.html(showprompt());
            }
          } else {
            layer.alert(data.msg, { icon: 0 });
          }
        },
        error: function error(data) {
          layer.alert("获取活动作品数排行异常。", { icon: 0 });
        }
      });
    }

    function initActivityWorksRankEchart(data, id) {
      var activity_works_rank_echart = echarts.init(document.getElementById(id));
      option = {
        title: {},
        tooltip: {
          trigger: 'item',
          formatter: "{a} <br/>{b} : {c} ({d}%)"
        },
        color: colors.slice(0, data.length),
        series: [{
          name: '作品数',
          type: 'pie',
          radius: [25, 100],
          center: ['50%', '50%'],
          roseType: 'area',
          data: data
        }]
      };
      for (var i = 0; i < data.length; i++) {
        option.series[0].data[i].label = {};
        option.series[0].data[i].label.normal = {};
        option.series[0].data[i].label.normal.formatter = tools.hideTextByLen(data[i].name, 12);
      }
      activity_works_rank_echart.setOption(option);
    };

    /**
     * 公用没有内容方法
     * @returns {string}
     */
    function showprompt() {
      return "<p id='no-content'>没有您查看的内容</p>";
    };
    $("body").delegate('.grade_select>span i', 'click', function (e) {
      e.stopPropagation();
      if ($(this).hasClass('arrow_up')) {
        $(this).removeClass('arrow_up');
        $(this).parents("span").siblings("div").hide();
      } else {
        $(this).addClass('arrow_up');
        $(this).parents("span").siblings("div").show();
      }
    });
    $("body").delegate('.grade_select ul li', 'click', function (e) {
      e.stopPropagation();
      $(this).parents(".grade_select").find("span strong").text($(this).text()).parents("span").attr("data-value", $(this).attr("data-value"));
      $(this).parents(".grade_select").find("div").hide().siblings("span").find("i").removeClass('arrow_up');
      getResourceRank($(".resource_rank_echart"), service.appIds['byqjyjg_appId'], $(this).attr("data-value"), 'resourceRankEchart');
    });
    $(document).click(function () {
      if ($('.grade_select>span i').hasClass('arrow_up')) {
        $('.grade_select>span i').removeClass('arrow_up');
        $('.grade_select>span i').parents('span').siblings("div").hide();
      }
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJhbmsvanMvYWxsUmFuay5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiY29uZmlnIiwiYmFzZVVybCIsInBhdGhzIiwiY29uZmlncGF0aHMiLCJkZWZpbmUiLCIkIiwidGVtcGxhdGUiLCJlY2hhcnRzIiwibGF5ZXIiLCJzZXJ2aWNlIiwib3JnQ29uZmlnIiwidG9vbHMiLCJiYW5uZXIiLCJ0ZXh0U2Nyb2xsIiwidGFiIiwiYWpheEJhbm5lciIsInNlY29uZE5hdiIsImZvb3RlciIsImhlYWRlciIsImNvbG9ycyIsImdldFRlYWNoZXJEYXRhIiwiZ2V0VXNlclJhbmtEYXRhIiwiZ2V0UmVzb3VyY2VSYW5rIiwiYXBwSWRzIiwiZ2V0QWN0aXZpdHlSYW5rRGF0YSIsImdldEFjdGl2aXR5V29ya3NSYW5rRGF0YSIsIiRvYmoiLCJ0ZW1JZCIsImFqYXgiLCJ1cmwiLCJodG1sSG9zdCIsInR5cGUiLCJzdWNjZXNzIiwiZGF0YSIsImNvZGUiLCJodG1sIiwibGlzdCIsImxlbmd0aCIsImkiLCJzaG93TmFtZSIsImhpZGVUZXh0QnlMZW4iLCJuYW1lIiwidGV4dCIsImNvdW50Iiwic2hvd3Byb21wdCIsImFsZXJ0IiwibXNnIiwiaWNvbiIsImVycm9yIiwiaWQiLCJjb25zb2xlIiwibG9nIiwiaW5pdFVzZXJSYW5rRWNoYXJ0IiwidXNlcl9yYW5rX2VjaGFydCIsImluaXQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwib3B0aW9uIiwidGl0bGUiLCJ0b29sdGlwIiwidHJpZ2dlciIsImZvcm1hdHRlciIsImNvbG9yIiwic2xpY2UiLCJsZWdlbmQiLCJsZWZ0IiwiYm90dG9tIiwic2VyaWVzIiwicmFkaXVzIiwiY2VudGVyIiwiaXRlbVN0eWxlIiwiZW1waGFzaXMiLCJzaGFkb3dCbHVyIiwic2hhZG93T2Zmc2V0WCIsInNoYWRvd0NvbG9yIiwibGFiZWwiLCJub3JtYWwiLCJzZXRPcHRpb24iLCJvcmdDb2RlIiwicGhhc2VJZCIsIiRkYXRhIiwiaW5pdFJlc291cmNlUmFua0VjaGFydCIsInJlc291cmNlX3JhbmtfZWNoYXJ0Iiwib3JpZW50IiwieCIsInkiLCJpdGVtR2FwIiwicm9zZVR5cGUiLCJ2YWx1ZSIsImFjdGl2aXR5TmFtZSIsInRlYWNoZXJDb3VudCIsImluaXRBY3Rpdml0eVJhbmtFY2hhcnQiLCJhY3Rpdml0eV9yYW5rX2VjaGFydCIsIndvcmtzQ291bnQiLCJpbml0QWN0aXZpdHlXb3Jrc1JhbmtFY2hhcnQiLCJhY3Rpdml0eV93b3Jrc19yYW5rX2VjaGFydCIsImRlbGVnYXRlIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsImhhc0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJwYXJlbnRzIiwic2libGluZ3MiLCJoaWRlIiwiYWRkQ2xhc3MiLCJzaG93IiwiZmluZCIsImF0dHIiLCJjbGljayJdLCJtYXBwaW5ncyI6Ijs7QUFBQUEsUUFBUUMsTUFBUixDQUFlO0FBQ2JDLFdBQVMsS0FESTtBQUViQyxTQUFPO0FBQ0wsb0JBQWdCO0FBRFg7QUFGTSxDQUFmO0FBTUFILFFBQVEsQ0FBQyxjQUFELENBQVIsRUFBMEIsVUFBVUksV0FBVixFQUF1QjtBQUMvQztBQUNBSixVQUFRQyxNQUFSLENBQWVHLFdBQWY7QUFDQUMsU0FBTyxFQUFQLEVBQVcsQ0FBQyxRQUFELEVBQVcsVUFBWCxFQUF1QixTQUF2QixFQUFrQyxPQUFsQyxFQUEyQyxTQUEzQyxFQUFzRCxXQUF0RCxFQUFtRSxPQUFuRSxFQUE0RSxRQUE1RSxFQUFzRixZQUF0RixFQUFvRyxLQUFwRyxFQUEyRyxZQUEzRyxFQUF5SCxXQUF6SCxFQUFzSSxRQUF0SSxFQUFnSixRQUFoSixDQUFYLEVBQ0UsVUFBVUMsQ0FBVixFQUFhQyxRQUFiLEVBQXVCQyxPQUF2QixFQUFnQ0MsS0FBaEMsRUFBdUNDLE9BQXZDLEVBQWdEQyxTQUFoRCxFQUEyREMsS0FBM0QsRUFBa0VDLE1BQWxFLEVBQTBFQyxVQUExRSxFQUFzRkMsR0FBdEYsRUFBMkZDLFVBQTNGLEVBQXVHQyxTQUF2RyxFQUFrSEMsTUFBbEgsRUFB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QUosRUFBb0Q7QUFDbEQ5RixVQUFFLHNCQUFGLEVBQTBCK0YsV0FBMUIsQ0FBc0MsVUFBdEM7QUFDQS9GLFVBQUUsc0JBQUYsRUFBMEJnRyxPQUExQixDQUFrQyxNQUFsQyxFQUEwQ0MsUUFBMUMsQ0FBbUQsS0FBbkQsRUFBMERDLElBQTFEO0FBQ0Q7QUFDRixLQUxEO0FBT0QsR0FwVUg7QUFzVUQsQ0F6VUQiLCJmaWxlIjoicmFuay9qcy9hbGxSYW5rLWU2MGFhOTFkNmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlLmNvbmZpZyh7XHJcbiAgYmFzZVVybDogJy4uLycsXHJcbiAgcGF0aHM6IHtcclxuICAgICdwbGF0Zm9ybUNvbmYnOiAncHVibGljL2pzL3BsYXRmb3JtQ29uZi5qcydcclxuICB9XHJcbn0pO1xyXG5yZXF1aXJlKFsncGxhdGZvcm1Db25mJ10sIGZ1bmN0aW9uIChjb25maWdwYXRocykge1xyXG4gIC8vIGNvbmZpZ3BhdGhzLnBhdGhzLmRpYWxvZyA9IFwibXlzcGFjZS9qcy9hcHBEaWFsb2cuanNcIjtcclxuICByZXF1aXJlLmNvbmZpZyhjb25maWdwYXRocyk7XHJcbiAgZGVmaW5lKCcnLCBbJ2pxdWVyeScsICd0ZW1wbGF0ZScsICdlY2hhcnRzJywgJ2xheWVyJywgJ3NlcnZpY2UnLCAnb3JnQ29uZmlnJywgJ3Rvb2xzJywgJ2Jhbm5lcicsICd0ZXh0U2Nyb2xsJywgJ3RhYicsICdhamF4QmFubmVyJywgJ3NlY29uZE5hdicsICdmb290ZXInLCAnaGVhZGVyJ10sXHJcbiAgICBmdW5jdGlvbiAoJCwgdGVtcGxhdGUsIGVjaGFydHMsIGxheWVyLCBzZXJ2aWNlLCBvcmdDb25maWcsIHRvb2xzLCBiYW5uZXIsIHRleHRTY3JvbGwsIHRhYiwgYWpheEJhbm5lciwgc2Vjb25kTmF2LCBmb290ZXIsIGhlYWRlcikge1xyXG4gICAgICB2YXIgY29sb3JzID0gWycjZjE2YzMyJywgJyNmMTlkMzInLCAnI2YzZDc1MycsICcjODFjYTRjJywgJyMzNWE5NWQnLCAnIzE0YzdlMCcsICcjNGU4ZmU4JywgJyM0MjZkYjgnLCAnIzkwNTNjZicsICcjY2Y1MzlmJywgJyNkNzQyM2QnXTtcclxuXHJcbiAgICAgIGdldFRlYWNoZXJEYXRhKCQoXCIudGVhY2hlcl9saXN0XCIpLCAndGVhY2hlclJhbmsnKTtcclxuICAgICAgZ2V0VXNlclJhbmtEYXRhKCQoXCIudXNlcl9yYW5rX2VjaGFydFwiKSwgJ3VzZXJSYW5rRWNoYXJ0Jyk7XHJcbiAgICAgIGdldFJlc291cmNlUmFuaygkKFwiLnJlc291cmNlX3JhbmtfZWNoYXJ0XCIpLCBzZXJ2aWNlLmFwcElkc1snYnlxanlqZ19hcHBJZCddLCAnMTQwJywgJ3Jlc291cmNlUmFua0VjaGFydCcpO1xyXG4gICAgICBnZXRBY3Rpdml0eVJhbmtEYXRhKCQoXCIuYWN0aXZpdHlfcmFua19lY2hhcnRcIiksICdhY3Rpdml0eVJhbmtFY2hhcnQnKTtcclxuICAgICAgZ2V0QWN0aXZpdHlXb3Jrc1JhbmtEYXRhKCQoXCIuYWN0aXZpdHlfd29ya3NfcmFua19lY2hhcnRcIiksICdhY3Rpdml0eVdvcmtzUmFua0VjaGFydCcpO1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSAkb2JqXHJcbiAgICAgICAqIEBwYXJhbSB0ZW1JZFxyXG4gICAgICAgKiBAcGFyYW0gYXJlYUlkXHJcbiAgICAgICAqL1xyXG4gICAgICBmdW5jdGlvbiBnZXRUZWFjaGVyRGF0YSgkb2JqLCB0ZW1JZCkge1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICB1cmw6IHNlcnZpY2UuaHRtbEhvc3QgKyAnL3BmL2FwaS9yYW5rL3RlYVInLFxyXG4gICAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmNvZGUgPT0gXCJzdWNjZXNzXCIpIHtcclxuICAgICAgICAgICAgICB2YXIgaHRtbCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YSAmJiBkYXRhLmRhdGEubGlzdCAmJiBkYXRhLmRhdGEubGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEuZGF0YS5saXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5saXN0W2ldLnNob3dOYW1lID0gdG9vbHMuaGlkZVRleHRCeUxlbihkYXRhLmRhdGEubGlzdFtpXS5uYW1lLCAxNik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBodG1sID0gdGVtcGxhdGUodGVtSWQsIHsnZGF0YSc6IGRhdGEuZGF0YS5saXN0fSk7XHJcbiAgICAgICAgICAgICAgICAkKFwiLnRlYWNoZXJfcmFuayAudG90YWxfbnVtIHNwYW5cIikudGV4dChkYXRhLmRhdGEuY291bnQpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBodG1sID0gc2hvd3Byb21wdCgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAkb2JqLmh0bWwoaHRtbCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgbGF5ZXIuYWxlcnQoZGF0YS5tc2csIHtpY29uOiAwfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgbGF5ZXIuYWxlcnQoXCLojrflj5bmlZnluIjmlbDph4/mjpLooYzlvILluLjjgIJcIiwge2ljb246IDB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIGdldFVzZXJSYW5rRGF0YSgkb2JqLCBpZCkge1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICB1cmw6IHNlcnZpY2UuaHRtbEhvc3QgKyAnL3BmL2FwaS9yYW5rL3VzZVInLFxyXG4gICAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmNvZGUgPT0gXCJzdWNjZXNzXCIpIHtcclxuICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhICYmIGRhdGEuZGF0YS5saXN0ICYmIGRhdGEuZGF0YS5saXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5kYXRhLmxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhLmxpc3RbaV0ubmFtZSA9IGRhdGEuZGF0YS5saXN0W2ldLm5hbWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkKFwiLnVzZXJfcmFuayAudG90YWxfbnVtIHNwYW5cIikudGV4dChkYXRhLmRhdGEuY291bnQpO1xyXG4gICAgICAgICAgICAgICAgaW5pdFVzZXJSYW5rRWNoYXJ0KGRhdGEuZGF0YS5saXN0LCBpZCk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRvYmouaHRtbChzaG93cHJvbXB0KCkpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBsYXllci5hbGVydChkYXRhLm1zZywge2ljb246IDB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBsYXllci5hbGVydChcIuiOt+WPluaVmeW4iOa0u+i3g+W6puW8guW4uOOAglwiLCB7aWNvbjogMH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gaW5pdFVzZXJSYW5rRWNoYXJ0KGRhdGEsIGlkKSB7XHJcbiAgICAgICAgdmFyIHVzZXJfcmFua19lY2hhcnQgPSBlY2hhcnRzLmluaXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpKTtcclxuICAgICAgICB2YXIgb3B0aW9uID0ge1xyXG4gICAgICAgICAgdGl0bGU6IHt9LFxyXG4gICAgICAgICAgdG9vbHRpcDoge1xyXG4gICAgICAgICAgICB0cmlnZ2VyOiAnaXRlbScsXHJcbiAgICAgICAgICAgIGZvcm1hdHRlcjogXCJ7YX0gPGJyLz57Yn0gOiB7Y30gKHtkfSUpXCJcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBjb2xvcjogY29sb3JzLnNsaWNlKDAsIGRhdGEubGVuZ3RoKSxcclxuICAgICAgICAgIGxlZ2VuZDoge1xyXG4gICAgICAgICAgICBsZWZ0OiAnMzAnLFxyXG4gICAgICAgICAgICBib3R0b206ICczMCcsXHJcbiAgICAgICAgICAgIGRhdGE6IFtdXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgc2VyaWVzOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBuYW1lOiAn5pWZ5biI5rS76LeD5bqmJyxcclxuICAgICAgICAgICAgICB0eXBlOiAncGllJyxcclxuICAgICAgICAgICAgICByYWRpdXM6ICc1NSUnLFxyXG4gICAgICAgICAgICAgIGNlbnRlcjogWyc1MCUnLCAnMzglJ10sXHJcbiAgICAgICAgICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgICAgICAgICBpdGVtU3R5bGU6IHtcclxuICAgICAgICAgICAgICAgIGVtcGhhc2lzOiB7XHJcbiAgICAgICAgICAgICAgICAgIHNoYWRvd0JsdXI6IDEwLFxyXG4gICAgICAgICAgICAgICAgICBzaGFkb3dPZmZzZXRYOiAwLFxyXG4gICAgICAgICAgICAgICAgICBzaGFkb3dDb2xvcjogJ3JnYmEoMCwgMCwgMCwgMC41KSdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIG9wdGlvbi5sZWdlbmQuZGF0YVtpXSA9IGRhdGFbaV0ubmFtZTtcclxuICAgICAgICAgIG9wdGlvbi5zZXJpZXNbMF0uZGF0YVtpXS5sYWJlbCA9IHt9O1xyXG4gICAgICAgICAgb3B0aW9uLnNlcmllc1swXS5kYXRhW2ldLmxhYmVsLm5vcm1hbCA9IHt9O1xyXG4gICAgICAgICAgb3B0aW9uLnNlcmllc1swXS5kYXRhW2ldLmxhYmVsLm5vcm1hbC5mb3JtYXR0ZXIgPSB0b29scy5oaWRlVGV4dEJ5TGVuKGRhdGFbaV0ubmFtZSwgMTIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB1c2VyX3JhbmtfZWNoYXJ0LnNldE9wdGlvbihvcHRpb24pO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgZnVuY3Rpb24gZ2V0UmVzb3VyY2VSYW5rKCRvYmosIG9yZ0NvZGUsIHBoYXNlSWQsIGlkKSB7XHJcbiAgICAgICAgdmFyICRkYXRhID0ge1xyXG4gICAgICAgICAgJ29yZ0NvZGUnOiBvcmdDb2RlLFxyXG4gICAgICAgICAgJ3BoYXNlSWQnOiBwaGFzZUlkXHJcbiAgICAgICAgfVxyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICB1cmw6IHNlcnZpY2UuaHRtbEhvc3QgKyAnL3BmL2FwaS9kaXJlY3QvcmVzSV9zdWJSZXNSYW5raW5nJyxcclxuICAgICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgICAgZGF0YTogJGRhdGEsXHJcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLnN1Y2Nlc3MgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEgJiYgZGF0YS5kYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGluaXRSZXNvdXJjZVJhbmtFY2hhcnQoZGF0YS5kYXRhLCBpZCk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRvYmouaHRtbChzaG93cHJvbXB0KCkpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBsYXllci5hbGVydChcIuiOt+WPlui1hOa6kOi0oeeMruaOkuihjOaVsOaNruW8guW4uFwiLCB7aWNvbjogMH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGxheWVyLmFsZXJ0KFwi6I635Y+W6LWE5rqQ6LSh54yu5o6S6KGM5pWw5o2u5byC5bi444CCXCIsIHtpY29uOiAwfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBpbml0UmVzb3VyY2VSYW5rRWNoYXJ0KGRhdGEsIGlkKSB7XHJcbiAgICAgICAgdmFyIHJlc291cmNlX3JhbmtfZWNoYXJ0ID0gZWNoYXJ0cy5pbml0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSk7XHJcbiAgICAgICAgb3B0aW9uID0ge1xyXG4gICAgICAgICAgdGl0bGU6IHt9LFxyXG4gICAgICAgICAgdG9vbHRpcDoge1xyXG4gICAgICAgICAgICB0cmlnZ2VyOiAnaXRlbScsXHJcbiAgICAgICAgICAgIGZvcm1hdHRlcjogXCJ7YX0gPGJyLz57Yn0gOiB7Y30gKHtkfSUpXCJcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBjb2xvcjogY29sb3JzLnNsaWNlKDAsIGRhdGEubGVuZ3RoKSxcclxuICAgICAgICAgIGxlZ2VuZDoge1xyXG4gICAgICAgICAgICBvcmllbnQ6ICd2ZXJ0aWNhbCcsXHJcbiAgICAgICAgICAgIHg6ICc3MCcsXHJcbiAgICAgICAgICAgIHk6ICdtaWRkbGUnLFxyXG4gICAgICAgICAgICBpdGVtR2FwOiAyNSxcclxuICAgICAgICAgICAgZGF0YTogW11cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBzZXJpZXM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIG5hbWU6ICfotYTmupDotKHnjK7mlbAnLFxyXG4gICAgICAgICAgICAgIHR5cGU6ICdwaWUnLFxyXG4gICAgICAgICAgICAgIHJhZGl1czogWzMwLCAxMTBdLFxyXG4gICAgICAgICAgICAgIGNlbnRlcjogWyc3MCUnLCAnNTAlJ10sXHJcbiAgICAgICAgICAgICAgcm9zZVR5cGU6ICdhcmVhJyxcclxuICAgICAgICAgICAgICBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgaWYgKGkgPCAxMCkge1xyXG4gICAgICAgICAgICBvcHRpb24ubGVnZW5kLmRhdGFbaV0gPSBkYXRhW2ldLm5hbWU7XHJcbiAgICAgICAgICAgIG9wdGlvbi5zZXJpZXNbMF0uZGF0YVtpXS5sYWJlbCA9IHt9O1xyXG4gICAgICAgICAgICBvcHRpb24uc2VyaWVzWzBdLmRhdGFbaV0ubGFiZWwubm9ybWFsID0ge307XHJcbiAgICAgICAgICAgIG9wdGlvbi5zZXJpZXNbMF0uZGF0YVtpXS5sYWJlbC5ub3JtYWwuZm9ybWF0dGVyID0gdG9vbHMuaGlkZVRleHRCeUxlbihkYXRhW2ldLm5hbWUsIDEyKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChpID09IDEwKSB7XHJcbiAgICAgICAgICAgICAgb3B0aW9uLmxlZ2VuZC5kYXRhW2ldID0gJ+WFtuWugyc7XHJcbiAgICAgICAgICAgICAgb3B0aW9uLnNlcmllc1swXS5kYXRhW2ldLm5hbWUgPSAn5YW25a6DJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBvcHRpb24uc2VyaWVzWzBdLmRhdGFbMTBdLnZhbHVlICs9IGRhdGFbaV0udmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgb3B0aW9uLnNlcmllc1swXS5kYXRhID0gb3B0aW9uLnNlcmllc1swXS5kYXRhLnNsaWNlKDAsIDExKTtcclxuICAgICAgICByZXNvdXJjZV9yYW5rX2VjaGFydC5zZXRPcHRpb24ob3B0aW9uKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIGdldEFjdGl2aXR5UmFua0RhdGEoJG9iaiwgaWQpIHtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgdXJsOiBzZXJ2aWNlLmh0bWxIb3N0ICsgJy9wZi9hcGkvZGlyZWN0L2FjdGl2aXR5X3RlYWNoZXJzJyxcclxuICAgICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcclxuICAgICAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5jb2RlID09IFwic3VjY2Vzc1wiKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YSAmJiBkYXRhLmRhdGEubGlzdCAmJiBkYXRhLmRhdGEubGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEuZGF0YS5saXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5saXN0W2ldLm5hbWUgPSBkYXRhLmRhdGEubGlzdFtpXS5hY3Rpdml0eU5hbWU7XHJcbiAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5saXN0W2ldLnZhbHVlID0gZGF0YS5kYXRhLmxpc3RbaV0udGVhY2hlckNvdW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJChcIi5hY3Rpdml0eV9yYW5rIC50b3RhbF9udW0gc3BhblwiKS50ZXh0KGRhdGEuZGF0YS50ZWFjaGVyQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgaW5pdEFjdGl2aXR5UmFua0VjaGFydChkYXRhLmRhdGEubGlzdC5zbGljZSgwLCAxMCksIGlkKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJG9iai5odG1sKHNob3dwcm9tcHQoKSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGxheWVyLmFsZXJ0KGRhdGEubXNnLCB7aWNvbjogMH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGxheWVyLmFsZXJ0KFwi6I635Y+W5rS75Yqo5Y+C5LiO5bqm5o6S6KGM5byC5bi444CCXCIsIHtpY29uOiAwfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGluaXRBY3Rpdml0eVJhbmtFY2hhcnQoZGF0YSwgaWQpIHtcclxuICAgICAgICB2YXIgYWN0aXZpdHlfcmFua19lY2hhcnQgPSBlY2hhcnRzLmluaXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpKTtcclxuICAgICAgICBvcHRpb24gPSB7XHJcbiAgICAgICAgICB0aXRsZToge30sXHJcbiAgICAgICAgICB0b29sdGlwOiB7XHJcbiAgICAgICAgICAgIHRyaWdnZXI6ICdpdGVtJyxcclxuICAgICAgICAgICAgZm9ybWF0dGVyOiBcInthfSA8YnIvPntifSA6IHtjfSAoe2R9JSlcIlxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGNvbG9yOiBjb2xvcnMuc2xpY2UoMCwgZGF0YS5sZW5ndGgpLFxyXG4gICAgICAgICAgc2VyaWVzOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBuYW1lOiAn5rS75Yqo5Y+C5LiO5bqm5o6S6KGMJyxcclxuICAgICAgICAgICAgICB0eXBlOiAncGllJyxcclxuICAgICAgICAgICAgICByYWRpdXM6IFsyNSwgMTAwXSxcclxuICAgICAgICAgICAgICBjZW50ZXI6IFsnNTAlJywgJzUwJSddLFxyXG4gICAgICAgICAgICAgIHJvc2VUeXBlOiAnYXJlYScsXHJcbiAgICAgICAgICAgICAgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIG9wdGlvbi5zZXJpZXNbMF0uZGF0YVtpXS5sYWJlbCA9IHt9O1xyXG4gICAgICAgICAgb3B0aW9uLnNlcmllc1swXS5kYXRhW2ldLmxhYmVsLm5vcm1hbCA9IHt9O1xyXG4gICAgICAgICAgb3B0aW9uLnNlcmllc1swXS5kYXRhW2ldLmxhYmVsLm5vcm1hbC5mb3JtYXR0ZXIgPSB0b29scy5oaWRlVGV4dEJ5TGVuKGRhdGFbaV0ubmFtZSwgMTIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhY3Rpdml0eV9yYW5rX2VjaGFydC5zZXRPcHRpb24ob3B0aW9uKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIGdldEFjdGl2aXR5V29ya3NSYW5rRGF0YSgkb2JqLCBpZCkge1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICB1cmw6IHNlcnZpY2UuaHRtbEhvc3QgKyAnL3BmL2FwaS9kaXJlY3QvYWN0aXZpdHlfd29ya3MnLFxyXG4gICAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmNvZGUgPT0gXCJzdWNjZXNzXCIpIHtcclxuICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhICYmIGRhdGEuZGF0YS5saXN0ICYmIGRhdGEuZGF0YS5saXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5kYXRhLmxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhLmxpc3RbaV0ubmFtZSA9IGRhdGEuZGF0YS5saXN0W2ldLmFjdGl2aXR5TmFtZTtcclxuICAgICAgICAgICAgICAgICAgZGF0YS5kYXRhLmxpc3RbaV0udmFsdWUgPSBkYXRhLmRhdGEubGlzdFtpXS53b3Jrc0NvdW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJChcIi5hY3Rpdml0eV93b3Jrc19yYW5rIC50b3RhbF9udW0gc3BhblwiKS50ZXh0KGRhdGEuZGF0YS53b3Jrc0NvdW50KTtcclxuICAgICAgICAgICAgICAgIGluaXRBY3Rpdml0eVdvcmtzUmFua0VjaGFydChkYXRhLmRhdGEubGlzdC5zbGljZSgwLCAxMCksIGlkKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJG9iai5odG1sKHNob3dwcm9tcHQoKSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGxheWVyLmFsZXJ0KGRhdGEubXNnLCB7aWNvbjogMH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGxheWVyLmFsZXJ0KFwi6I635Y+W5rS75Yqo5L2c5ZOB5pWw5o6S6KGM5byC5bi444CCXCIsIHtpY29uOiAwfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGluaXRBY3Rpdml0eVdvcmtzUmFua0VjaGFydChkYXRhLCBpZCkge1xyXG4gICAgICAgIHZhciBhY3Rpdml0eV93b3Jrc19yYW5rX2VjaGFydCA9IGVjaGFydHMuaW5pdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkpO1xyXG4gICAgICAgIG9wdGlvbiA9IHtcclxuICAgICAgICAgIHRpdGxlOiB7fSxcclxuICAgICAgICAgIHRvb2x0aXA6IHtcclxuICAgICAgICAgICAgdHJpZ2dlcjogJ2l0ZW0nLFxyXG4gICAgICAgICAgICBmb3JtYXR0ZXI6IFwie2F9IDxici8+e2J9IDoge2N9ICh7ZH0lKVwiXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgY29sb3I6IGNvbG9ycy5zbGljZSgwLCBkYXRhLmxlbmd0aCksXHJcbiAgICAgICAgICBzZXJpZXM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIG5hbWU6ICfkvZzlk4HmlbAnLFxyXG4gICAgICAgICAgICAgIHR5cGU6ICdwaWUnLFxyXG4gICAgICAgICAgICAgIHJhZGl1czogWzI1LCAxMDBdLFxyXG4gICAgICAgICAgICAgIGNlbnRlcjogWyc1MCUnLCAnNTAlJ10sXHJcbiAgICAgICAgICAgICAgcm9zZVR5cGU6ICdhcmVhJyxcclxuICAgICAgICAgICAgICBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgb3B0aW9uLnNlcmllc1swXS5kYXRhW2ldLmxhYmVsID0ge307XHJcbiAgICAgICAgICBvcHRpb24uc2VyaWVzWzBdLmRhdGFbaV0ubGFiZWwubm9ybWFsID0ge307XHJcbiAgICAgICAgICBvcHRpb24uc2VyaWVzWzBdLmRhdGFbaV0ubGFiZWwubm9ybWFsLmZvcm1hdHRlciA9IHRvb2xzLmhpZGVUZXh0QnlMZW4oZGF0YVtpXS5uYW1lLCAxMik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFjdGl2aXR5X3dvcmtzX3JhbmtfZWNoYXJ0LnNldE9wdGlvbihvcHRpb24pO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIOWFrOeUqOayoeacieWGheWuueaWueazlVxyXG4gICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAgICAgKi9cclxuICAgICAgZnVuY3Rpb24gc2hvd3Byb21wdCgpIHtcclxuICAgICAgICByZXR1cm4gXCI8cCBpZD0nbm8tY29udGVudCc+5rKh5pyJ5oKo5p+l55yL55qE5YaF5a65PC9wPlwiO1xyXG4gICAgICB9O1xyXG4gICAgICAkKFwiYm9keVwiKS5kZWxlZ2F0ZSgnLmdyYWRlX3NlbGVjdD5zcGFuIGknLCAnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2Fycm93X3VwJykpIHtcclxuICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2Fycm93X3VwJyk7XHJcbiAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoXCJzcGFuXCIpLnNpYmxpbmdzKFwiZGl2XCIpLmhpZGUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYXJyb3dfdXAnKTtcclxuICAgICAgICAgICQodGhpcykucGFyZW50cyhcInNwYW5cIikuc2libGluZ3MoXCJkaXZcIikuc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgICQoXCJib2R5XCIpLmRlbGVnYXRlKCcuZ3JhZGVfc2VsZWN0IHVsIGxpJywgJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cyhcIi5ncmFkZV9zZWxlY3RcIikuZmluZChcInNwYW4gc3Ryb25nXCIpLnRleHQoJCh0aGlzKS50ZXh0KCkpLnBhcmVudHMoXCJzcGFuXCIpLmF0dHIoXCJkYXRhLXZhbHVlXCIsICQodGhpcykuYXR0cihcImRhdGEtdmFsdWVcIikpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cyhcIi5ncmFkZV9zZWxlY3RcIikuZmluZChcImRpdlwiKS5oaWRlKCkuc2libGluZ3MoXCJzcGFuXCIpLmZpbmQoXCJpXCIpLnJlbW92ZUNsYXNzKCdhcnJvd191cCcpO1xyXG4gICAgICAgIGdldFJlc291cmNlUmFuaygkKFwiLnJlc291cmNlX3JhbmtfZWNoYXJ0XCIpLCBzZXJ2aWNlLmFwcElkc1snYnlxanlqZ19hcHBJZCddLCAkKHRoaXMpLmF0dHIoXCJkYXRhLXZhbHVlXCIpLCAncmVzb3VyY2VSYW5rRWNoYXJ0Jyk7XHJcbiAgICAgIH0pO1xyXG4gICAgICAkKGRvY3VtZW50KS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCQoJy5ncmFkZV9zZWxlY3Q+c3BhbiBpJykuaGFzQ2xhc3MoJ2Fycm93X3VwJykpIHtcclxuICAgICAgICAgICQoJy5ncmFkZV9zZWxlY3Q+c3BhbiBpJykucmVtb3ZlQ2xhc3MoJ2Fycm93X3VwJyk7XHJcbiAgICAgICAgICAkKCcuZ3JhZGVfc2VsZWN0PnNwYW4gaScpLnBhcmVudHMoJ3NwYW4nKS5zaWJsaW5ncyhcImRpdlwiKS5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICB9XHJcbiAgKTtcclxufSlcclxuXHJcblxyXG5cclxuIl19
