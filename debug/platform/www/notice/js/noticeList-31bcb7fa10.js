'use strict';

require.config({
  baseUrl: '../',
  paths: {
    'platformConf': 'public/js/platformConf-541e3fb1ce.js'
  }
});
require(['platformConf'], function (configpaths) {

  require.config(configpaths);

  define('', ['jquery', 'template', 'service', 'footer', 'header', 'tool'], function ($, template, service, footer, header, tools) {
    var pageSize = 10;
    var pageNum = 0;
    if (!tools.args.currentPage) tools.args.currentPage = 1;
    getListByPage(pageSize);
    //重要公告
    $.ajax({
      url: service.htmlHost + '/pf/api/notice/getLimit?limit=6',
      type: 'GET',
      success: function success(data) {
        if (data && data.code == "success") {
          $('#importnotice').empty();
          if (data.data && data.data.length > 0) {
            for (var i = 0; i < data.data.length; i++) {
              $('#importnotice').append('<li class="imp-list"><a class="imp-text" href="noticeDetail.html?id=' + data.data[i].id + '&index=' + i + '">' + data.data[i].title + '</a></li>');
            }
          } else {
            $('#importnotice').html("<p id='no-content'>没有您查看的内容</p>");
          }
        } else {
          layer.alert("获取重要公告异常。", { icon: 0 });
        }
      },
      error: function error(data) {
        layer.alert("获取重要公告异常。", { icon: 0 });
      }
    });

    //公告列表
    function getListByPage(pageSize) {
      $.ajax({
        url: service.htmlHost + '/pf/api/notice/getByPage?page.pageSize=' + pageSize + '&page.currentPage=' + tools.args.currentPage,
        type: 'GET',
        success: function success(data) {
          if (data && data.code == "success") {
            if (data.data.datalist.length > 0) {
              $('#noticelist').empty();
              //var page = data.page;
              for (var i = 0; i < data.data.datalist.length; i++) {
                $('#noticelist').append('<li class="message-list clearFix"><a class="message-text message-title" href="noticeDetail.html?id=' + data.data.datalist[i].id + '&index=' + ((parseInt(data.data.currentPage) - 1) * pageSize + i) + '" >' + data.data.datalist[i].title + '</a><span class="message-text message-time">' + data.data.datalist[i].crtDttm.split(" ")[0] + '</span> </li>');
              }
              var page = data.data.page;
              page.totalPages = data.data.totalPages;
              if (page.totalPages > 1) {
                createPage(data.data.page);
              }
            } else {
              $('#noticelist').html("<p id='no-content'>没有您查看的内容</p>");
            }
          } else {
            layer.alert("获取重要公告异常。", { icon: 0 });
          }
        },
        error: function error(data) {
          layer.alert("获取重要公告异常。", { icon: 0 });
        }
      });
    };

    //分页
    function createPage(page) {
      $('#pages').empty();
      if (page.totalPages <= 3) {
        createPre(page);
        for (var i = 1; i <= page.totalPages; i++) {
          createContent(i);
        }
        // show1();
        createNext(page);
      } else {
        if (page.currentPage <= 2) {
          createPre(page);
          for (var i = page.currentPage; i < page.currentPage + 3; i++) {
            createContent(i);
          }
          createNext(page);
        } else {
          if (page.currentPage <= page.totalPages - 2) {
            createPre(page);
            for (var i = page.currentPage - 1; i <= page.currentPage + 1; i++) {
              createContent(i);
            }
            createNext(page);
          } else {
            if (page.currentPage <= page.totalPages) {
              createPre(page);
              for (var i = page.totalPages - 2; i <= page.totalPages; i++) {
                createContent(i);
              }
              createNext(page);
            }
          }
        }
      }
    };

    function createPre(page) {
      if (parseInt(page.currentPage) > 1) {
        var prePage = parseInt(page.currentPage) - 1;
        $('#pages').append('<li class=pages-list > <a id=' + prePage + ' page=' + prePage + ' class=pages-link href=javascript:;>&lsaquo;&lsaquo;</a> </li>');
      }
    };

    function createContent(i) {
      $("#pages").append('<li class=pages-list > <a id=' + i + ' page=' + i + ' class="' + (tools.args.currentPage == i ? 'pages-active pages-link' : 'pages-link') + '" href=javascript:;>' + i + '</a> </li>');
    };

    function createNext(page) {
      if (parseInt(page.currentPage) < page.totalPages) {
        var nextPage = parseInt(page.currentPage) + 1;
        $("#pages").append('<li class=pages-list > <a id=' + nextPage + ' page=' + nextPage + ' class=pages-link href=javascript:;>&rsaquo;&rsaquo;</a> </li>');
      }
    };

    function changePage(page) {
      pageNum = page;
      getListByPage(page);
    };
    /*function show1(){
      $('.pages-link').removeClass('pages-active');
      $('.pages-link').eq(pageNum).addClass('pages-active')
    };*/
    $(".wrap").delegate('#pages li', 'click', function () {
      tools.args.currentPage = parseInt($(this).find("a").attr("page"));
      changePage(pageSize);
    });
    $(function () {
      $('.nav-line').hide();

      //鑷�搴旂獥鍙�
      function winChange(minNum, outNUm) {
        var contHeight = $(window).height() - outNUm;
        if (contHeight < minNum) {
          contHeight = minNum;
        }
        $('.message-content').get(0).style['min-height'] = contHeight + 'px';
      }

      winChange(400, 664);

      $(window).resize(function () {
        winChange();
      });

      //鍐呭澶氬嚭鏄剧ず闅愯棌
      function hideText(obj, long) {
        for (var i = 0; i < obj.length; i++) {
          var str = '...';
          var be_str = obj.eq(i).html();
          be_str = be_str.replace(/^\s+|\s+$/, '');
          var newstr = '';

          if (be_str.length > long) {
            newstr = be_str.slice(0, long) + str;
            obj.eq(i).html(newstr);
          }
        }
      }

      /*$('.pages-link').click(function(){
        $('.pages-link').removeClass('pages-active');
        $(this).addClass('pages-active');
      })*/
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vdGljZS9qcy9ub3RpY2VMaXN0LmpzIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJjb25maWciLCJiYXNlVXJsIiwicGF0aHMiLCJjb25maWdwYXRocyIsImRlZmluZSIsIiQiLCJ0ZW1wbGF0ZSIsInNlcnZpY2UiLCJmb290ZXIiLCJoZWFkZXIiLCJ0b29scyIsInBhZ2VTaXplIiwicGFnZU51bSIsImFyZ3MiLCJjdXJyZW50UGFnZSIsImdldExpc3RCeVBhZ2UiLCJhamF4IiwidXJsIiwiaHRtbEhvc3QiLCJ0eXBlIiwic3VjY2VzcyIsImRhdGEiLCJjb2RlIiwiZW1wdHkiLCJsZW5ndGgiLCJpIiwiYXBwZW5kIiwiaWQiLCJ0aXRsZSIsImh0bWwiLCJsYXllciIsImFsZXJ0IiwiaWNvbiIsImVycm9yIiwiZGF0YWxpc3QiLCJwYXJzZUludCIsImNydER0dG0iLCJzcGxpdCIsInBhZ2UiLCJ0b3RhbFBhZ2VzIiwiY3JlYXRlUGFnZSIsImNyZWF0ZVByZSIsImNyZWF0ZUNvbnRlbnQiLCJjcmVhdGVOZXh0IiwicHJlUGFnZSIsIm5leHRQYWdlIiwiY2hhbmdlUGFnZSIsImRlbGVnYXRlIiwiZmluZCIsImF0dHIiLCJoaWRlIiwid2luQ2hhbmdlIiwibWluTnVtIiwib3V0TlVtIiwiY29udEhlaWdodCIsIndpbmRvdyIsImhlaWdodCIsImdldCIsInN0eWxlIiwicmVzaXplIiwiaGlkZVRleHQiLCJvYmoiLCJsb25nIiwic3RyIiwiYmVfc3RyIiwiZXEiLCJyZXBsYWNlIiwibmV3c3RyIiwic2xpY2UiXSwibWFwcGluZ3MiOiI7O0FBQUFBLFFBQVFDLE1BQVIsQ0FBZTtBQUNiQyxXQUFTLEtBREk7QUFFYkMsU0FBTztBQUNMLG9CQUFnQjtBQURYO0FBRk0sQ0FBZjtBQU1BSCxRQUFRLENBQUMsY0FBRCxDQUFSLEVBQTBCLFVBQVVJLFdBQVYsRUFBdUI7O0FBRS9DSixVQUFRQyxNQUFSLENBQWVHLFdBQWY7O0FBRUFDLFNBQU8sRUFBUCxFQUFXLENBQUMsUUFB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RCxHQUF0QixDQUEwQixDQUExQixFQUE2QkMsS0FBN0IsQ0FBbUMsWUFBbkMsSUFBbURKLGFBQWEsSUFBaEU7QUFDRDs7QUFFREgsZ0JBQVUsR0FBVixFQUFlLEdBQWY7O0FBRUE5QyxRQUFFa0QsTUFBRixFQUFVSSxNQUFWLENBQWlCLFlBQVk7QUFDM0JSO0FBQ0QsT0FGRDs7QUFJQTtBQUNBLGVBQVNTLFFBQVQsQ0FBa0JDLEdBQWxCLEVBQXVCQyxJQUF2QixFQUE2QjtBQUMzQixhQUFLLElBQUlyQyxJQUFJLENBQWIsRUFBZ0JBLElBQUlvQyxJQUFJckMsTUFBeEIsRUFBZ0NDLEdBQWhDLEVBQXFDO0FBQ25DLGNBQUlzQyxNQUFNLEtBQVY7QUFDQSxjQUFJQyxTQUFTSCxJQUFJSSxFQUFKLENBQU94QyxDQUFQLEVBQVVJLElBQVYsRUFBYjtBQUNBbUMsbUJBQVNBLE9BQU9FLE9BQVAsQ0FBZSxXQUFmLEVBQTRCLEVBQTVCLENBQVQ7QUFDQSxjQUFJQyxTQUFTLEVBQWI7O0FBRUEsY0FBSUgsT0FBT3hDLE1BQVAsR0FBZ0JzQyxJQUFwQixFQUEwQjtBQUN4QksscUJBQVNILE9BQU9JLEtBQVAsQ0FBYSxDQUFiLEVBQWdCTixJQUFoQixJQUF3QkMsR0FBakM7QUFDQUYsZ0JBQUlJLEVBQUosQ0FBT3hDLENBQVAsRUFBVUksSUFBVixDQUFlc0MsTUFBZjtBQUNEO0FBQ0Y7QUFDRjs7QUFFRDs7OztBQUtELEtBdENEO0FBdUNELEdBektIO0FBMktELENBL0tEIiwiZmlsZSI6Im5vdGljZS9qcy9ub3RpY2VMaXN0LTMxYmNiN2ZhMTAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlLmNvbmZpZyh7XHJcbiAgYmFzZVVybDogJy4uLycsXHJcbiAgcGF0aHM6IHtcclxuICAgICdwbGF0Zm9ybUNvbmYnOiAncHVibGljL2pzL3BsYXRmb3JtQ29uZi5qcydcclxuICB9XHJcbn0pO1xyXG5yZXF1aXJlKFsncGxhdGZvcm1Db25mJ10sIGZ1bmN0aW9uIChjb25maWdwYXRocykge1xyXG5cclxuICByZXF1aXJlLmNvbmZpZyhjb25maWdwYXRocyk7XHJcblxyXG4gIGRlZmluZSgnJywgWydqcXVlcnknLCAndGVtcGxhdGUnLCAnc2VydmljZScsICdmb290ZXInLCAnaGVhZGVyJywgJ3Rvb2wnXSxcclxuICAgIGZ1bmN0aW9uICgkLCB0ZW1wbGF0ZSwgc2VydmljZSwgZm9vdGVyLCBoZWFkZXIsIHRvb2xzKSB7XHJcbiAgICAgIHZhciBwYWdlU2l6ZSA9IDEwO1xyXG4gICAgICB2YXIgcGFnZU51bSA9IDA7XHJcbiAgICAgIGlmICghdG9vbHMuYXJncy5jdXJyZW50UGFnZSkgdG9vbHMuYXJncy5jdXJyZW50UGFnZSA9IDE7XHJcbiAgICAgIGdldExpc3RCeVBhZ2UocGFnZVNpemUpO1xyXG4gICAgICAvL+mHjeimgeWFrOWRilxyXG4gICAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogc2VydmljZS5odG1sSG9zdCArICcvcGYvYXBpL25vdGljZS9nZXRMaW1pdD9saW1pdD02JyxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5jb2RlID09IFwic3VjY2Vzc1wiKSB7XHJcbiAgICAgICAgICAgICQoJyNpbXBvcnRub3RpY2UnKS5lbXB0eSgpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5kYXRhICYmIGRhdGEuZGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICQoJyNpbXBvcnRub3RpY2UnKS5hcHBlbmQoJzxsaSBjbGFzcz1cImltcC1saXN0XCI+PGEgY2xhc3M9XCJpbXAtdGV4dFwiIGhyZWY9XCJub3RpY2VEZXRhaWwuaHRtbD9pZD0nICsgZGF0YS5kYXRhW2ldLmlkICsgJyZpbmRleD0nICsgaSArICdcIj4nICsgZGF0YS5kYXRhW2ldLnRpdGxlICsgJzwvYT48L2xpPicpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAkKCcjaW1wb3J0bm90aWNlJykuaHRtbChcIjxwIGlkPSduby1jb250ZW50Jz7msqHmnInmgqjmn6XnnIvnmoTlhoXlrrk8L3A+XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsYXllci5hbGVydChcIuiOt+WPlumHjeimgeWFrOWRiuW8guW4uOOAglwiLCB7aWNvbjogMH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBsYXllci5hbGVydChcIuiOt+WPlumHjeimgeWFrOWRiuW8guW4uOOAglwiLCB7aWNvbjogMH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvL+WFrOWRiuWIl+ihqFxyXG4gICAgICBmdW5jdGlvbiBnZXRMaXN0QnlQYWdlKHBhZ2VTaXplKSB7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgIHVybDogc2VydmljZS5odG1sSG9zdCArICcvcGYvYXBpL25vdGljZS9nZXRCeVBhZ2U/cGFnZS5wYWdlU2l6ZT0nICsgcGFnZVNpemUgKyAnJnBhZ2UuY3VycmVudFBhZ2U9JyArIHRvb2xzLmFyZ3MuY3VycmVudFBhZ2UsXHJcbiAgICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhICYmIGRhdGEuY29kZSA9PSBcInN1Y2Nlc3NcIikge1xyXG4gICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuZGF0YWxpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgJCgnI25vdGljZWxpc3QnKS5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgLy92YXIgcGFnZSA9IGRhdGEucGFnZTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5kYXRhLmRhdGFsaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICQoJyNub3RpY2VsaXN0JykuYXBwZW5kKCc8bGkgY2xhc3M9XCJtZXNzYWdlLWxpc3QgY2xlYXJGaXhcIj48YSBjbGFzcz1cIm1lc3NhZ2UtdGV4dCBtZXNzYWdlLXRpdGxlXCIgaHJlZj1cIm5vdGljZURldGFpbC5odG1sP2lkPScgKyBkYXRhLmRhdGEuZGF0YWxpc3RbaV0uaWQgKyAnJmluZGV4PScgKyAoKHBhcnNlSW50KGRhdGEuZGF0YS5jdXJyZW50UGFnZSkgLSAxKSAqIHBhZ2VTaXplICsgaSkgKyAnXCIgPicgKyBkYXRhLmRhdGEuZGF0YWxpc3RbaV0udGl0bGUgKyAnPC9hPjxzcGFuIGNsYXNzPVwibWVzc2FnZS10ZXh0IG1lc3NhZ2UtdGltZVwiPicgKyBkYXRhLmRhdGEuZGF0YWxpc3RbaV0uY3J0RHR0bS5zcGxpdChcIiBcIilbMF0gKyAnPC9zcGFuPiA8L2xpPicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIHBhZ2UgPSBkYXRhLmRhdGEucGFnZTtcclxuICAgICAgICAgICAgICAgIHBhZ2UudG90YWxQYWdlcyA9IGRhdGEuZGF0YS50b3RhbFBhZ2VzO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhZ2UudG90YWxQYWdlcyA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgY3JlYXRlUGFnZShkYXRhLmRhdGEucGFnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJyNub3RpY2VsaXN0JykuaHRtbChcIjxwIGlkPSduby1jb250ZW50Jz7msqHmnInmgqjmn6XnnIvnmoTlhoXlrrk8L3A+XCIpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBsYXllci5hbGVydChcIuiOt+WPlumHjeimgeWFrOWRiuW8guW4uOOAglwiLCB7aWNvbjogMH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGxheWVyLmFsZXJ0KFwi6I635Y+W6YeN6KaB5YWs5ZGK5byC5bi444CCXCIsIHtpY29uOiAwfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvL+WIhumhtVxyXG4gICAgICBmdW5jdGlvbiBjcmVhdGVQYWdlKHBhZ2UpIHtcclxuICAgICAgICAkKCcjcGFnZXMnKS5lbXB0eSgpO1xyXG4gICAgICAgIGlmIChwYWdlLnRvdGFsUGFnZXMgPD0gMykge1xyXG4gICAgICAgICAgY3JlYXRlUHJlKHBhZ2UpO1xyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gcGFnZS50b3RhbFBhZ2VzOyBpKyspIHtcclxuICAgICAgICAgICAgY3JlYXRlQ29udGVudChpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIHNob3cxKCk7XHJcbiAgICAgICAgICBjcmVhdGVOZXh0KHBhZ2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAocGFnZS5jdXJyZW50UGFnZSA8PSAyKSB7XHJcbiAgICAgICAgICAgIGNyZWF0ZVByZShwYWdlKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHBhZ2UuY3VycmVudFBhZ2U7IGkgPCBwYWdlLmN1cnJlbnRQYWdlICsgMzsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgY3JlYXRlQ29udGVudChpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjcmVhdGVOZXh0KHBhZ2UpO1xyXG5cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChwYWdlLmN1cnJlbnRQYWdlIDw9IHBhZ2UudG90YWxQYWdlcyAtIDIpIHtcclxuICAgICAgICAgICAgICBjcmVhdGVQcmUocGFnZSk7XHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IHBhZ2UuY3VycmVudFBhZ2UgLSAxOyBpIDw9IHBhZ2UuY3VycmVudFBhZ2UgKyAxOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUNvbnRlbnQoaSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGNyZWF0ZU5leHQocGFnZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgaWYgKHBhZ2UuY3VycmVudFBhZ2UgPD0gcGFnZS50b3RhbFBhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVQcmUocGFnZSk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gKHBhZ2UudG90YWxQYWdlcykgLSAyOyBpIDw9IHBhZ2UudG90YWxQYWdlczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNyZWF0ZUNvbnRlbnQoaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVOZXh0KHBhZ2UpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIGNyZWF0ZVByZShwYWdlKSB7XHJcbiAgICAgICAgaWYgKHBhcnNlSW50KHBhZ2UuY3VycmVudFBhZ2UpID4gMSkge1xyXG4gICAgICAgICAgdmFyIHByZVBhZ2UgPSBwYXJzZUludChwYWdlLmN1cnJlbnRQYWdlKSAtIDE7XHJcbiAgICAgICAgICAkKCcjcGFnZXMnKS5hcHBlbmQoJzxsaSBjbGFzcz1wYWdlcy1saXN0ID4gPGEgaWQ9JyArIHByZVBhZ2UgKyAnIHBhZ2U9JyArIHByZVBhZ2UgKyAnIGNsYXNzPXBhZ2VzLWxpbmsgaHJlZj1qYXZhc2NyaXB0Ojs+JmxzYXF1bzsmbHNhcXVvOzwvYT4gPC9saT4nKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBmdW5jdGlvbiBjcmVhdGVDb250ZW50KGkpIHtcclxuICAgICAgICAkKFwiI3BhZ2VzXCIpLmFwcGVuZCgnPGxpIGNsYXNzPXBhZ2VzLWxpc3QgPiA8YSBpZD0nICsgaSArICcgcGFnZT0nICsgaSArICcgY2xhc3M9XCInICsgKCB0b29scy5hcmdzLmN1cnJlbnRQYWdlID09IGkgPyAncGFnZXMtYWN0aXZlIHBhZ2VzLWxpbmsnIDogJ3BhZ2VzLWxpbmsnKSArICdcIiBocmVmPWphdmFzY3JpcHQ6Oz4nICsgaSArICc8L2E+IDwvbGk+Jyk7XHJcblxyXG4gICAgICB9O1xyXG5cclxuICAgICAgZnVuY3Rpb24gY3JlYXRlTmV4dChwYWdlKSB7XHJcbiAgICAgICAgaWYgKHBhcnNlSW50KHBhZ2UuY3VycmVudFBhZ2UpIDwgcGFnZS50b3RhbFBhZ2VzKSB7XHJcbiAgICAgICAgICB2YXIgbmV4dFBhZ2UgPSBwYXJzZUludChwYWdlLmN1cnJlbnRQYWdlKSArIDE7XHJcbiAgICAgICAgICAkKFwiI3BhZ2VzXCIpLmFwcGVuZCgnPGxpIGNsYXNzPXBhZ2VzLWxpc3QgPiA8YSBpZD0nICsgbmV4dFBhZ2UgKyAnIHBhZ2U9JyArIG5leHRQYWdlICsgJyBjbGFzcz1wYWdlcy1saW5rIGhyZWY9amF2YXNjcmlwdDo7PiZyc2FxdW87JnJzYXF1bzs8L2E+IDwvbGk+Jyk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIGNoYW5nZVBhZ2UocGFnZSkge1xyXG4gICAgICAgIHBhZ2VOdW0gPSBwYWdlO1xyXG4gICAgICAgIGdldExpc3RCeVBhZ2UocGFnZSk7XHJcbiAgICAgIH07XHJcbiAgICAgIC8qZnVuY3Rpb24gc2hvdzEoKXtcclxuICAgICAgICAkKCcucGFnZXMtbGluaycpLnJlbW92ZUNsYXNzKCdwYWdlcy1hY3RpdmUnKTtcclxuICAgICAgICAkKCcucGFnZXMtbGluaycpLmVxKHBhZ2VOdW0pLmFkZENsYXNzKCdwYWdlcy1hY3RpdmUnKVxyXG4gICAgICB9OyovXHJcbiAgICAgICQoXCIud3JhcFwiKS5kZWxlZ2F0ZSgnI3BhZ2VzIGxpJywgJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRvb2xzLmFyZ3MuY3VycmVudFBhZ2UgPSBwYXJzZUludCgkKHRoaXMpLmZpbmQoXCJhXCIpLmF0dHIoXCJwYWdlXCIpKTtcclxuICAgICAgICBjaGFuZ2VQYWdlKHBhZ2VTaXplKTtcclxuICAgICAgfSk7XHJcbiAgICAgICQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5uYXYtbGluZScpLmhpZGUoKTtcclxuXHJcbiAgICAgICAgLy/pkbfugYjvv73mkLTml4LnjaXpjZnvv71cclxuICAgICAgICBmdW5jdGlvbiB3aW5DaGFuZ2UobWluTnVtLCBvdXROVW0pIHtcclxuICAgICAgICAgIHZhciBjb250SGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpIC0gb3V0TlVtO1xyXG4gICAgICAgICAgaWYgKGNvbnRIZWlnaHQgPCBtaW5OdW0pIHtcclxuICAgICAgICAgICAgY29udEhlaWdodCA9IG1pbk51bTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgICQoJy5tZXNzYWdlLWNvbnRlbnQnKS5nZXQoMCkuc3R5bGVbJ21pbi1oZWlnaHQnXSA9IGNvbnRIZWlnaHQgKyAncHgnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2luQ2hhbmdlKDQwMCwgNjY0KTtcclxuXHJcbiAgICAgICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICB3aW5DaGFuZ2UoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy/pjZDlka3uhpDmvrbmsKzlmq3pj4TliafjgZrpl4XmhK/mo4xcclxuICAgICAgICBmdW5jdGlvbiBoaWRlVGV4dChvYmosIGxvbmcpIHtcclxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBzdHIgPSAnLi4uJztcclxuICAgICAgICAgICAgdmFyIGJlX3N0ciA9IG9iai5lcShpKS5odG1sKCk7XHJcbiAgICAgICAgICAgIGJlX3N0ciA9IGJlX3N0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC8sICcnKTtcclxuICAgICAgICAgICAgdmFyIG5ld3N0ciA9ICcnO1xyXG5cclxuICAgICAgICAgICAgaWYgKGJlX3N0ci5sZW5ndGggPiBsb25nKSB7XHJcbiAgICAgICAgICAgICAgbmV3c3RyID0gYmVfc3RyLnNsaWNlKDAsIGxvbmcpICsgc3RyO1xyXG4gICAgICAgICAgICAgIG9iai5lcShpKS5odG1sKG5ld3N0cik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qJCgnLnBhZ2VzLWxpbmsnKS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgICAgJCgnLnBhZ2VzLWxpbmsnKS5yZW1vdmVDbGFzcygncGFnZXMtYWN0aXZlJyk7XHJcbiAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdwYWdlcy1hY3RpdmUnKTtcclxuICAgICAgICB9KSovXHJcblxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICApO1xyXG59KSJdfQ==
