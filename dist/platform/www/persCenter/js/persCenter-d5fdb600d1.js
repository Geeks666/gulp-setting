"use strict";require.config({baseUrl:"../",paths:{platformConf:"public/js/platformConf-6e48d40e05.js"},enforeDefine:!0}),require(["platformConf"],function(e){require.config(e),require(["jquery","tools","header","footer","service","webuploader","layer","template"],function(e,t,s,n,a,o,i,r){function l(e){return"http"===a.path_url.download_url.substring(0,4)?a.path_url.download_url:a.prefix+a.path_url.download_url.replace("#resid#",e)}function d(){var e=window.location.href;e.indexOf("#page")&&(e=e.split("#page")[0]),e=(e.indexOf("?"),a.prefix+"/login?redirectUrl="+e),window.location.href=e}function c(e){switch(e){case 2:return 2;case 3:case 4:return 3;case 5:return 4;case 301:case 300:return 2;case 200:case 1:case 201:return 1;default:return 0}}function l(e){return"http"===a.path_url.download_url.substring(0,4)?a.path_url.download_url.replace("#resid#",e):a.prefix+a.path_url.download_url.replace("#resid#",e)}function u(){E=!1,m(),e(".conLeft .modMark").removeClass("icon-star-pseudo"),e(".inforList .cenMark").removeClass("conChange").attr({readonly:"readonly",unselectable:"on"}),e(".perCenBtn .saveBtn,.cancelBtn").hide(),e(".perCenBtn .editBtn").show(),e("#userDuty .mbSelect").hide().find(".selShow").html(e("#userDuty .mbSelect+input").val()),e("#userDuty .mbSelect+input").show(),e("#sexEdit .mbSelect").hide().find(".selShow").html(e("#sexEdit .mbSelect+input").val()),e("#sexEdit .mbSelect+input").show(),e(".inforList .subSelGat .mbSelect").addClass("mbNoSelect"),e(".cenMark").each(function(t){e(".cenMark").eq(t).attr("value",e(this).attr("data-old")).val(e(this).attr("data-old"))}),e(".inforList .editImg").hide(),e(".addItem,.deleteItem").hide(),e("#userSubject").find(".curSubSelGat").remove(),e(".setUserPic img").attr("src",e(".setUserPic img").attr("data-old")),e(".inforList .clues").hide().removeClass("red"),e("#userLoginEmail .eMailCode").addClass("eMailCodeHide"),e("#securityPhone .eMailCode").addClass("eMailCodeHide"),e("#LoginEmailCode, #securityCode").addClass("eMailCodeHide").find(".conCen").val(""),e(".classInfo").show(),e(".classInfoSelect").hide()}function h(){m(),e(".conLeft .modMark").removeClass("icon-star-pseudo"),e(".inforList .cenMark").removeClass("conChange").attr({readonly:"readonly",unselectable:"on"}),e(".perCenBtn .saveBtn,.cancelBtn").hide(),e(".perCenBtn .editBtn").show(),e("#userDuty .mbSelect").hide(),e("#userDuty .mbSelect+input").show(),e("#sexEdit .mbSelect").hide(),e("#sexEdit .mbSelect+input").show(),e(".inforList .subSelGat .mbSelect").addClass("mbNoSelect"),e(".inforList .editImg").hide(),e(".addItem,.deleteItem").hide(),e("#sexEdit input").val(e("#sexEdit .selShow").html()),e("#userDuty input").val(e("#userDuty .selShow").html()),e("#userNamed input").val(e("#userNamed .selShow").html()),e("#userSubject").find(".curSubSelGat").removeClass("curSubSelGat"),e("#birthdayShow").attr("value",e("#birthdaySel").val()),e("#birthdaySel").hide(),e("#birthdayShow").show(),e(".cenMark").each(function(t){e(".cenMark").eq(t).attr("data-old",e(this).val())}),e(".setBannerBg img").attr("data-old",e(".setBannerBg img").attr("src")),e(".setUserPic img").attr("data-old",e(".setUserPic img").attr("src")),e(".inforList .clues").hide().removeClass("red"),e("#userLoginEmail .eMailCode").addClass("eMailCodeHide"),e("#securityPhone .eMailCode").addClass("eMailCodeHide"),e("#LoginEmailCode, #securityCode").addClass("eMailCodeHide").find(".conCen").val("")}function m(){e.each(e(".binded"),function(t,s){"true"===e(s).attr("data-show")?("securityPhone"==e(s).parent().attr("id")&&e(s).siblings("input").css("width","auto"),e(s).show()):(e(s).hide(),e(s).siblings("input").css("width","233px"))})}function f(e,t){return'<div class="mbSelect mbSelectSmaill" readonly><p class="selShow">'+e+'</p><ul class="mbSel select_'+t+'"></ul></div>'}function p(t,s){e.getJSON(a.htmlHost+"/pf/api/meta/orgPhase?orgId="+S.orgId,function(n){if("success"===n.code){var a="",o=n.data[0];e.each(n.data,function(e,t){t.name===s.pahse&&(o=t),a+='<li class="trigger" data-id="'+t.id+'"><p class="select">'+t.name+"</p></li>"}),e("#"+t+" .select_phase").html(a),e("#"+t+" .select_phase").parent().attr("data-id",o.id),C(t,o.id,s.grade),g(t,o.id,s.subject)}else b("学段数据请求错误，请刷新重试")}).error(function(e){b("学段数据请求错误，请刷新重试")})}function C(t,s,n){e.getJSON(a.htmlHost+"/pf/api/meta/orgGrade?orgId="+S.orgId+"&phaseId="+s,function(s){if("success"===s.code){var a="",o=s.data[0];e.each(s.data,function(e,t){t.name===n&&(o=t),a+='<li data-id="'+t.id+'"><p class="select">'+t.name+"</p></li>"}),e("#"+t+" .select_grade").html(a),e("#"+t+" .select_grade").parent().attr("data-id",o.id)}else b("年级数据请求错误，请刷新重试")}).error(function(e){b("年级数据请求错误，请刷新重试")})}function g(t,s,n){e.getJSON(a.htmlHost+"/pf/api/meta/orgSubject?orgId="+S.orgId+"&phaseId="+s,function(s){if("success"===s.code){var a="",o=s.data[0];e.each(s.data,function(e,t){t.name===n&&(o=t),a+='<li data-id="'+t.id+'"><p class="select">'+t.name+"</p></li>"}),e("#"+t+" .select_subject").html(a),e("#"+t+" .select_subject").parent().attr("data-id",o.id)}else b("学科数据请求错误，请刷新重试")}).error(function(e){b("学科数据请求错误，请刷新重试")})}function b(e){i.alert(e,{icon:0})}function w(e,t){e.match("^[0-9a-zA-Z]+@(([0-9a-zA-Z]+)[.])+[a-z]{2,4}$")?(t.find(".clues").hide().html("").removeClass("red"),y[5]=1):""!=e?(t.find(".clues").show().html("您输入的电子邮箱不正确").addClass("red"),y[5]=0):(t.find(".clues").show().html("请输入您的电子邮箱").addClass("red"),y[5]=0)}e(function(){var t="http"===a.path_url.upload_url.substring(0,4)?a.path_url.upload_url:a.htmlHost+a.path_url.upload_url,s=o.create({swf:"../../../../lib/component/upload/image-js/Uploader-8e6362e0d8.swf",accept:{title:"Images",extensions:"jpg,jpeg,png",mimeTypes:"image/jpg, image/jpeg, image/png"},server:t,fileNumLimit:50,pick:{id:"#editImg2"},fileSizeLimit:21474836480,fileSingleSizeLimit:5368709120});s.on("fileQueued",function(t){window.picUrlId="",e("#rt_"+t.source.ruid).parents(".inforList").find("img").parent().siblings(".upLoading").show(),s.upload()}),s.on("uploadAccept",function(t,n){n.data||(n.data=n.key,n.code="success"),console.log(n),"success"==n.code?(window.picUrlId=n.data,e("#rt_"+t.file.source.ruid).parents(".inforList").find("img").attr("src",l(n.data)),window.picUrlCur=!0,e("#rt_"+t.file.source.ruid).parents(".inforList").find("img").parent().siblings(".upLoading").hide()):(window.picUrlCur=!1,e("#rt_"+t.file.source.ruid).parents(".inforList").find("img").parent().siblings(".upLoading").hide()),s.reset()}),s.on("uploadError",function(t){console.log(t),e("#rt_"+t.source.ruid).parents(".inforList").find("img").parent().siblings(".upLoading").hide()})}),e("body").on("click",".mbSelectSmaill li",function(){var t=e(this).parents("li.clearFix").attr("id"),s=e(this).attr("data-id");e(this).parents(".mbSelectSmaill").attr("data-id",s),e(this).hasClass("trigger")&&(C(t,s),g(t,s))});var v={NONE:0,DISTRICT:1,TEACHER:2,STUDENT:3,PARENT:4},S=new Object,y=[0,0,0,0,0,0,0,0,0],E=!1,I="basicInfor";!function(){e(document).on("click",".mbSelect",function(t){var t=t||window.event,s=t.target||t.srcElement;E&&"userSubject"!=e(s).parents(".subSelGatList").parent().attr("id")&&(e(".select-box .types").hide(),e(s).hasClass("select")&&(e(".mbSel").hide(),e(s).parents(".mbSelect").hasClass("phaseSel")&&e(s).attr("data-id")!=e(s).parents(".mbSelect").find(".selShow").attr("data-id")&&initSubject(e(s).parents(".subSelGat").attr("id"),e(s).attr("data-id"),!1),e(s).parents(".mbSelect").find(".selShow").html(e(s).html()).attr("data-id",e(s).attr("data-id"))),e(s).hasClass("selShow")&&("none"==e(s).parent().find(".mbSel").css("display")?(e(".mbSel").hide(),e(s).parent().find(".mbSel").show()):e(s).parent().find(".mbSel").hide()))}),e(document).on("click",function(t){var t=t||window.event;t.target||t.srcElement,e(".mbSel").hide()}),e(document).on("click",".mbSelect",function(e){e.stopPropagation()})}(),e.ajax({type:"get",url:a.htmlHost+"/pf/uc/info",success:function(t){"success"==t.code?(t=t.data,S.orgId=t.account.orgId,S.userType=c(t.account.userType),S.userType==v.STUDENT?S.photo=t.account.userInfo.photo?l(t.account.userInfo.photo):"images/studentPic.png":S.photo=t.account.userInfo.photo?l(t.account.userInfo.photo):"images/teacherPic.png",S.name=t.account.userInfo.name||"",y[3]=S.name?1:0,S.account=t.account.account,S.sex=1==t.account.userInfo.sex?"男":"女",S.telephone=t.account.userInfo.telephone||"",y[4]=S.telephone?1:0,t.account.email=t.account.email||"",S.email=t.account.email||t.account.userInfo.email,S.boundEmail=t.account.email,S.boundPhone=t.account.cellphone&&-1!=t.account.cellphone?t.account.cellphone:"",y[5]=S.boundEmail?1:0,y[8]=S.boundPhone?1:0,S.boundEmail&&(e("#userEmail").find(".conCen").removeClass("cenMark"),e("#userEmail").find(".clues").html("如需修改请到【绑定信息】中进行修改").addClass("bule"),e("#userLoginEmail .binded").attr("data-show","true")),S.boundPhone&&e("#securityPhone .binded").attr("data-show","true"),e(".perCenSelect .userLogoCen .logoImg").attr("src",S.photo),e(".perCenSelect .userLogo .userName").html(S.name),e("#userLogo .UserPicImg img").attr({src:S.photo,"data-old":S.photo}),e("#userName").find(".conCen").attr({"data-old":S.name,value:S.name}),e("#userNum").find(".conCen").attr({value:S.account}),e("#sexEdit").find(".conCen").attr({"data-old":S.sex,value:S.sex}),e("#sexEdit").find(".selShow").html(S.sex),e("#userPhone").find(".conCen").attr({"data-old":S.telephone,value:S.telephone}),e("#userEmail").find(".conCen").attr({"data-old":S.email,value:S.email}),S.boundEmail||e(".perCenCon .inforChange .perCenBtn .editBtn").html("绑定邮箱"),S.boundPhone||e(".perCenCon .securityVerification .perCenBtn .editBtn").html("绑定手机号"),e("#userLoginEmail").find(".conCen").attr({"data-old":S.boundEmail,value:S.boundEmail}),e("#securityPhone").find(".conCen").attr({"data-old":S.boundPhone,value:S.boundPhone}),S.userType==v.DISTRICT?(e(".basicInfor").find("#stuGrade,#stuClass,#stuSchNum,#perName,#perPhone").remove(),S.orgName=t.account.userInfo.orgName||"",S.userSubject=t.roles||"",e("#userUnit").find(".conCen").attr({"data-old":S.orgName,value:S.orgName}),S.subjectStr="",e.each(S.userSubject,function(e,t){t.phase=t.phase||"",t.subject=t.subject||"",t.role=t.role||"",S.subjectStr+='<li class="clearFix"><span>'+t.role+"</span><span>"+t.phase+"</span><span>"+t.subject+"</span></li>"}),e("#userSubject").find(".classInfo").html(S.subjectStr)):S.userType==v.TEACHER?(e(".basicInfor").find("#stuGrade,#stuClass,#stuSchNum,#perName,#perPhone").remove(),S.orgName=t.account.userInfo.orgName||"",S.userSubject=t.roles||"",e("#userUnit").find(".conCen").attr({"data-old":S.orgName,value:S.orgName}),S.subjectStr="",S.subjectStrSelect="",e.each(S.userSubject,function(e,t){t.phase=t.phase||"",t.grade=t.grade||"",t.subject=t.subject||"",t.role=t.role||"",S.subjectStr+='<li class="clearFix"><span>'+t.role+"</span><span>"+t.phase+"</span><span>"+t.grade+"</span><span>"+t.subject+"</span></li>",S.subjectStrSelect+='<li class="clearFix" data-role="'+t.id+'" id="select'+e+'"><span>'+t.role+"</span>"+(t.roleInfo.showPhase?f(t.phase,"phase"):"")+(t.roleInfo.showGrade?f(t.grade,"grade"):"")+(t.roleInfo.showSubject?f(t.subject,"subject"):"")+"</li>",p("select"+e,t)}),e("#userSubject").find(".classInfo").html(S.subjectStr),e("#userSubject").find(".classInfoSelect").html(S.subjectStrSelect)):S.userType==v.STUDENT?(e(".basicInfor").find("#userUnit,#userDuty,#userSubject,#stuClass").remove(),S.studentCode=t.account.userInfo.studentCode,S.parentsName=t.account.userInfo.parentsName,S.parentsPhone=t.account.userInfo.parentsPhone,e("#stuSchNum").find(".conCen").attr({value:S.studentCode}),e("#perName").find(".conCen").attr({value:S.parentsName}),e("#perPhone").find(".conCen").attr({"data-old":S.parentsPhone,value:S.parentsPhone}),y[6]=S.parentsPhone?1:0):S.userType==v.PARENT&&e(".basicInfor").find("#userUnit,#userDuty,#userSubject,#stuGrade,#stuClass,#stuSchNum,#perName,#perPhone").remove(),e(".perCenCon .basicInfor").removeClass("eMailCodeHide")):"login_error"==t.code?i.alert("用户已过期，请重新登录",{icon:0},function(){d()}):i.alert("信息初始化失败，请刷新页面重试！",{icon:0})},error:function(e){i.alert("信息初始化失败，请刷新页面重试！",{icon:0})}}),e(".editBtn").on("click",function(t){E=!0,e(".binded").hide(),e(".binded").siblings("input").css("width","233px"),e(".inforList .modMark").addClass("icon-star-pseudo"),e(".inforList .cenMark").addClass("conChange").removeAttr("readonly unselectable"),e(".perCenBtn .saveBtn,.cancelBtn").css("display","inline-block"),e(".perCenBtn .editBtn").hide(),e(".inforList .mbSelect").show(),e(".inforList .mbSelect+input").hide(),e(".inforList .editImg").show(),e(".inforList .clues").show(),e("#editImg2").find("div").eq(1).css({width:"100%",height:"100%"}),e(".classInfo").hide(),e(".classInfoSelect").show(),"inforChange"==I&&(e("#userLoginEmail .eMailCode").removeClass("eMailCodeHide eMailCodeForbid"),e("#securityPhone .eMailCode").removeClass("eMailCodeHide eMailCodeForbid"),e("#LoginEmailCode, #securityCode").removeClass("eMailCodeHide").find(".conCen").val(""),e("#userLoginEmail .clues").html("")),"securityVerification"===I&&(e("#securityCode .eMailCode").removeClass("eMailCodeHide eMailCodeForbid"),e("#securityPhone .eMailCode").removeClass("eMailCodeHide eMailCodeForbid"),e("#securityCode").removeClass("eMailCodeHide").find(".conCen").val(""),e("#securityCode .clues").html("").css("color","#fff"))}),e(".cancelBtn").on("click",function(e){u()}),e(".saveBtn").on("click",function(t){if("inforChange"!=I&&e(".inforList .clues").hide(),"basicInfor"==I)if(0==y[3])e("#userName").find(".clues").show().html("请输入您的姓名").addClass("red");else if(0==y[4])e("#userPhone").find(".clues").show().html("请输入您的联系电话").addClass("red");else if(0==y[6]&&S.userType==v.STUDENT)e("#perPhone").find(".clues").show().html("请输入家长的联系电话").addClass("red");else if(e("#userEmail").find(".clues").hasClass("red"))e("#userEmail").find(".clues").show().html("您输入的电子邮箱不正确").addClass("red");else{var s={};s.name=e("#userName").find(".conCen").val(),s.sex="男"==e("#sexEdit").find(".selShow").html()?1:2,s.telephone=e("#userPhone").find(".conCen").val(),s.email=e("#userEmail").find(".conCen").val(),S.userType==v.STUDENT&&(s.papersNumber=e("#perPhone").find(".conCen").val()),s.userRoles=[],e.each(e("#userSubject").find(".classInfoSelect .clearFix"),function(t,n){var a=e(n).attr("data-role"),o=e(n).find(".select_phase").parent().attr("data-id"),i=e(n).find(".select_grade").parent().attr("data-id"),r=e(n).find(".select_subject").parent().attr("data-id");s["userRoles["+t+"].id"]=a,s["userRoles["+t+"].phaseId"]=o,s["userRoles["+t+"].gradeId"]=i,s["userRoles["+t+"].subjectId"]=r}),e.ajax({type:"post",url:a.htmlHost+"/pf/uc/upInfo",data:s,success:function(t){"success"==t.code?(i.alert("基本资料修改成功",{icon:0},function(){location.reload()}),e(".perCenSelect .userLogo .userName").html(s.name),e("#login_message .login_username").html(s.name+'<span class="arrow"></span>'),h()):"login_error"==t.code?i.alert("用户已过期，请重新登录",{icon:0},function(){d()}):i.alert(t.msg,{icon:0})},error:function(e){i.alert("基本资料修改失败，请刷新页面后重试！",{icon:0})}})}else"securityVerification"==I?0==y[7]?e("#securityCode").find(".clues").show().html("请输入验证码").addClass("red"):e.ajax({type:"post",url:a.htmlHost+"/pf/uc/verifyMobile",data:{mobile:e("#securityPhone input").val().trim(),code:e("#securityCode input").val().trim()},success:function(e){"success"===e.code?i.alert("手机号绑定成功",{icon:0},function(){location.reload()}):i.alert("手机号绑定失败，请刷新页面后重试！",{icon:0})},error:function(e){i.alert("手机号绑定失败，请刷新页面后重试！",{icon:0})}}):"setUserLogo"==I?window.picUrlCur?e.ajax({type:"post",url:a.htmlHost+"/pf/uc/updatePhoto",data:{photo:window.picUrlId},success:function(t){"success"==t.code?(i.alert("头像修改成功",{icon:0}),e(".perCenSelect .userLogoCen .logoImg").attr("src",e("#userLogo .UserPicImg img").attr("src")),h()):"login_error"==t.code?i.alert("用户已过期，请重新登录",{icon:0},function(){d()}):i.alert(t.msg,{icon:0})},error:function(e){i.alert("头像修改失败，请刷新页面后重试！",{icon:0})}}):u():"inforChange"==I&&(1!=y[5]?e("#userLoginEmail .clues").show().html("您输入的电子邮箱不正确").addClass("red"):e.ajax({type:"post",url:a.htmlHost+"/pf/uc/verifyMail",data:{mailAddress:e("#userLoginEmail input").val(),code:e("#LoginEmailCode input").val()},success:function(t){"success"==t.code?(i.alert("绑定邮箱修改成功",{icon:0}),e(".perCenCon .inforChange .perCenBtn .editBtn").html("更换邮箱"),e("#userEmail").find(".conCen").removeClass("cenMark conChange").val(e("#userLoginEmail input").val()),e("#userEmail").find(".clues").html("如需修改请到【绑定信息】中进行修改").addClass("bule"),h()):"failed"==t.code?i.alert("验证码错误",{icon:0}):"login_error"==t.code?i.alert("用户已过期，请重新登录",{icon:0},function(){d()}):i.alert("绑定邮箱修改失败",{icon:0})},error:function(e){i.alert("绑定邮箱修改失败，请刷新页面后重试！",{icon:0})}}))}),e(".passWord .pwdSaveBtn").on("click",function(t){1==y[0]&&1==y[1]&&1==y[2]?e.ajax({type:"post",url:a.htmlHost+"/pf/uc/updatePas",data:{oldPas:e("#priCode input").val(),newPas:e("#newPwd input").val()},success:function(t){"success"==t.code?(i.alert("密码修改成功",{icon:0}),e(".perCenCon .passWord .conCen").attr("value","").val(""),e(".perCenCon .passWord .clues").hide()):"login_error"==t.code?i.alert("用户已过期，请重新登录",{icon:0},function(){d()}):i.alert(t.msg,{icon:0})},error:function(e){i.alert("密码修改失败，请刷新页面后重试！",{icon:0})}}):1!=y[0]?e("#priCode").find(".clues").show().html("请输入原密码").addClass("red"):1!=y[1]||1!=y[2]&&(e("#againNewPwd input").val().length>0?e("#againNewPwd").find(".clues").show().html("两次输入密码不一致").addClass("red"):e("#againNewPwd").find(".clues").show().html("请输入确认密码").addClass("red"))}),e("#userLoginEmail .eMailCode").on("click",function(t){var t=t||window.event,s=t.target||t.srcElement;1==y[5]?e(s).hasClass("eMailCodeForbid")||(e("#userLoginEmail .clues").html("邮件正在发送中...").show().css("color","#1cd677"),e("#userLoginEmail .conCen").attr({readonly:"readonly",unselectable:"on"}),e(s).addClass("eMailCodeForbid"),e.ajax({type:"post",url:a.htmlHost+"/pf/uc/mailSend",data:{mailAddress:e("#userLoginEmail input").val()},success:function(t){"success"==t.code?e("#userLoginEmail .clues").html("验证码已发送，请登录邮箱查看").show().css("color","#1cd677"):"login_error"==t.code?(i.alert("用户已过期，请重新登录",{icon:0},function(){d()}),e("#userLoginEmail .clues").html("验证码发送失败").show().css("color","red")):(i.alert("验证码发送失败",{icon:0}),e(s).removeClass("eMailCodeForbid"),e("#userLoginEmail .conCen").removeAttr("readonly unselectable"),e("#userLoginEmail .clues").html(t.msg||"验证码发送失败").show().css("color","red"))},error:function(e){i.alert("验证码发送失败，请刷新页面后重试！",{icon:0})}})):w(e("#userLoginEmail .conCen").val().trim(),e("#userLoginEmail"))}),e(".securityVerification .eMailCode").on("click",function(t){var t=t||window.event,s=t.target||t.srcElement,n=e("#securityPhone input").val().trim();if(1==y[8])e(s).hasClass("eMailCodeForbid")||(e("#securityPhone .clues").html("验证码正在发送中...").show().css("color","#1cd677"),e("#securityPhone .conCen").attr({readonly:"readonly",unselectable:"on"}),e(s).addClass("eMailCodeForbid"),e.ajax({type:"post",url:a.htmlHost+"/pf/uc/sendMobileCode",data:{mobile:n},success:function(t){"success"==t.code?e("#securityPhone .clues").html("验证码已发送，请注意查收").show().css("color","#1cd677"):"login_error"==t.code?(i.alert("用户已过期，请重新登录",{icon:0},function(){d()}),e("#securityPhone .clues").html("验证码发送失败").show().css("color","red")):(i.alert("验证码发送失败",{icon:0}),e(s).removeClass("eMailCodeForbid"),e("#securityPhone .clues").html("验证码发送失败").show().css("color","red"),e("#securityPhone .conCen").removeAttr("readonly unselectable"))},error:function(t){e("#securityPhone .clues").html("验证码发送失败").show().css("color","red"),e(s).removeClass("eMailCodeForbid"),i.alert("验证码发送失败，请刷新页面后重试！",{icon:0})}}));else{var o="请输入您的手机号";""==n||/^1[34578]\d{9}$/.test(n)||(o="手机号码格式不正确"),e(s).parent().find(".clues").show().html(o).addClass("red")}}),e(".perCenSelect .selList").on("click",function(t){var t=t||window.event,s=t.target||t.srcElement,n=e(s).hasClass("selList")?e(s):e(s).parent();I=e(n).attr("data_type"),n.addClass("select").siblings().removeClass("select"),e(".perCenCon .basicInfor, .securityVerification, .setUserLogo, .passWord, .inforChange").hide(),e(".perCenCon .cenConTitle").html(e(n).find("p").html()),e(".perCenCon ."+I).show(),u(),"passWord"==I&&(E=!0,e(".perCenCon .passWord .conCen").val(""),y[0]=0,y[1]=0,y[2]=0),e(".perCenCon .subTitle").hide().removeClass("curr"),"inforChange"===I&&(e(".perCenCon .cenConTitle").html("邮箱绑定"),e(".perCenCon .cenConTitle").addClass("cenConTitle1"),e(".perCenCon .subTitle").show(),e(".perCenCon .cenConTitle").addClass("curr"),e(".perCenCon .inforChange").show(),e(".perCenCon .securityVerification").hide())}),e(".perCenCon").on("click",".cenConTitle1, .subTitle",function(){u(),e(this).siblings().removeClass("curr"),e(this).addClass("curr"),e(this).hasClass("cenConTitle")?(I="inforChange",e(".perCenCon .inforChange").show(),e(".perCenCon .securityVerification").hide()):(S.boundPhone||e(".securityVerification .editBtn").trigger("click"),I="securityVerification",e(".perCenCon .inforChange").hide(),e(".perCenCon .securityVerification").show())}),e(".cancelBtn1").on("click",function(){I="basicInfor",e(".perCenCon .cenConTitle").html("基本资料"),e(".perCenCon .basicInfor").show(),e(".perCenCon .securityVerification").hide()}),e(document).on("blur",".perCenCon .conCen",function(t){var t=t||window.event,s=t.target||t.srcElement,n=e(s).parent(),a=e(s).val().trim();E&&("userName"==n.attr("id")?a.match("^[A-Za-z0-9一-龥]+$")?(y[3]=1,n.find(".clues").hide().html("请输入您的姓名").removeClass("red")):""==a?(y[3]=0,n.find(".clues").show().html("请输入您的姓名").addClass("red")):(y[3]=0,n.find(".clues").show().html("您输入的姓名不正确").addClass("red")):"securityPhone"===n.attr("id")?/^1[34578]\d{9}$/.test(a)?(y[8]=1,n.find(".clues").hide().html("手机号码格式不正确").removeClass("red")):""==a?(y[8]=0,n.find(".clues").show().html("请输入您的手机号").addClass("red")):(y[8]=0,n.find(".clues").show().html("手机号码格式不正确").addClass("red")):"securityCode"==n.attr("id")?a?(y[7]=1,n.find(".clues").hide()):(y[7]=0,n.find(".clues").show().html("请输入验证码").addClass("red")):"userPhone"==n.attr("id")?/^(\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}$/.test(a)||/^1[34578]\d{9}$/.test(a)?(y[4]=1,n.find(".clues").hide().html("请输入联系电话").removeClass("red")):""==a?(y[4]=1,n.find(".clues").hide().html("请输入联系电话").removeClass("red")):(y[4]=0,n.find(".clues").show().html("您输入的联系电话不正确").addClass("red")):"perPhone"==n.attr("id")?/^(\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}$/.test(a)||/^1[34578]\d{9}$/.test(a)?(y[6]=1,n.find(".clues").hide().html("请输入联系电话").removeClass("red")):""==a?(y[6]=0,n.find(".clues").show().html("请输入联系电话").addClass("red")):(y[6]=0,n.find(".clues").show().html("您输入的联系电话不正确").addClass("red")):"userEmail"==n.attr("id")||"userLoginEmail"==n.attr("id")?e("#userLoginEmail .eMailCode").hasClass("eMailCodeForbid")&&"inforChange"==I||w(a,n):"priCode"==n.attr("id")?a.match("^\\S{6,20}$")?(n.find(".clues").hide().html("请输入您的原始密码").removeClass("red"),y[0]=1):""==a?(n.find(".clues").show().html("请输入原密码").addClass("red"),y[0]=0):(n.find(".clues").show().html("您输入的原密码不正确").addClass("red"),y[0]=0):"newPwd"==n.attr("id")?a.match("^\\S{6,20}$")?(a!=e("#againNewPwd").find("input").val()&&1==y[2]?(e("#againNewPwd").find(".clues").show().html("两次输入密码不一致").addClass("red"),y[2]=0):a==e("#againNewPwd").find("input").val()&&(e("#againNewPwd").find(".clues").hide().html("两次输入密码不一致").removeClass("red"),y[2]=1),n.find(".clues").hide().html("6-20位字符，建议数字、字母、标点符号组合").removeClass("red"),y[1]=1):""==a?(n.find(".clues").show().html("请输入新密码").addClass("red"),y[1]=0):(n.find(".clues").show().html("6-20位字符，建议数字、字母、标点符号组合").addClass("red"),y[1]=0):"againNewPwd"==n.attr("id")&&(a.match("^\\S{6,20}$")?a!=e("#newPwd").find("input").val()?(n.find(".clues").show().html("两次输入密码不一致").addClass("red"),1==y[1]?y[2]=0:y[2]=1):(n.find(".clues").hide().html("请输入确认密码").removeClass("red"),y[2]=1):""==a?(n.find(".clues").show().html("请输入再次输入新密码").addClass("red"),y[2]=0):(n.find(".clues").show().html("两次输入密码不一致").addClass("red"),y[2]=0)))}),e(document).on("focus",".perCenCon .conCen",function(t){var t=t||window.event,s=t.target||t.srcElement,n=e(s).parent();"inforChange"!=I&&e(n).find(".clues").hide().removeClass("red")})})});