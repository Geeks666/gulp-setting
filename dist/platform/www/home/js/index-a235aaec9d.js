"use strict";require.config({baseUrl:"../",paths:{platformConf:"public/js/platformConf-6e48d40e05.js"}}),require(["platformConf"],function(t){require.config(t),define("",["jquery","template","service","tool","banner","textScroll","scrollNav","center","main","footer","header","layer","indexApp"],function(t,e,a,n,i,c,s,o,r,l,u,d,p){function f(){t.getJSON(a.htmlHost+"/pf/api/header/statistics",function(e){"success"===e.code?t.each(e.data,function(e,a){t("#count_"+e).html(a)}):h()}).fail(function(t){h()})}function h(){t("#count_users").html(322),t("#count_resources").html(48315),t("#count_spaces").html(336)}function m(){u.getUser()?location.href=a.newSpaceBase+"/home?requireLogin=true":d.alert("请登录后操作。",{icon:0})}function g(n,i){t.ajax({url:a.htmlHost+"/pf/api/notice/getLimit?limit=10",type:"GET",success:function(t){t&&"success"==t.code?n.html(e(i,t)):d.alert("获取公告异常",{icon:0})},error:function(t){d.alert("获取公告异常。",{icon:0})}})}function b(n,i){t.ajax({url:a.htmlHost+"/pf/api/app/list?isRecommend=1",type:"GET",success:function(a){if(a&&"success"==a.code){var c="";a.data&&a.data.length>0?(t.each(a.data,function(t){a.data[t].isDetail=!1,a.data[t].logo=a.data[t].logo&&""!=a.data[t].logo?q(a.data[t].logo):""}),c=e(i,a)):c="<p id='no-content'>没有您查看的内容</p>",n.html(c),t("li",".small_banner_list").length>11&&(t(".left_button").show(),t(".right_button").show(),s())}else d.alert("获取应用异常",{icon:0})},error:function(t){d.alert("获取应用异常。",{icon:0})}})}function _(n,i){t.ajax({url:a.htmlHost+"/pf/api/meta/homeSubject",type:"GET",dataType:"JSON",success:function(t){t&&"success"==t.code?(t.host=a.sourcePlatformBase,n.append(e(i,t)),n.find(".discipline_list:odd").attr("style","background: rgb(237, 237, 237);")):d.alert("获取学科信息异常",{icon:0})},error:function(t){d.alert("获取学科信息异常。",{icon:0})}})}function y(n,i){t.ajax({url:a.htmlHost+"/pf/api/news/getLimit?limit=7&isComm=1&category="+n,type:"GET",success:function(a){if(a&&"success"==a.code){var c="";a.data&&a.data.length>0?(a.category=n,c=e(i+"_",a)):c="<p id='no-content'>没有您查看的内容</p>",t("#"+i).html(c)}else d.alert("获取新闻异常",{icon:0})},error:function(t){d.alert("获取新闻异常。",{icon:0})}})}function v(n,i,c,s,o){var r={type:c,pageSize:s,currentPage:1};o&&(r.orgId=o),t.ajax({url:a.htmlHost+"/pf/api/qtapp/rrt_hotspace",type:"GET",data:r,success:function(a){if(a&&"success"==a.code){var s="";if(a.data&&a.data.data&&a.data.data.length>0){!function(e){if("2"==e||"3"==e||"5"==e||"6"==e)t.each(a.data.data,function(t){a.data.data[t].spaceUrl=a.msg+a.data.data[t].spaceUrl+"&requireLogin=false",a.data.data[t].icon=a.data.data[t].icon?a.data.data[t].icon:I(e)});else if("subject"==e){var n=[100,103,104,106,107,165,265,166,172,173,174,933,171,170,167],i=[],c=0;t.each(a.data.data,function(t,e){for(var a=!1,s=e.spaceUrl.split("&")[2].split("=")[1],t=0;t<n.length;t++)if(parseInt(s)==n[t]){e.icon=C(parseInt(s)),a=!0;break}a||(e.icon=C("other")),i[c]=e,c++}),t.each(i,function(t){i[t].spaceUrl=a.msg+i[t].spaceUrl})}else"school"==e&&t.each(a.data.data,function(t){a.data.data[t].spaceUrl=a.msg+a.data.data[t].spaceUrl,a.data.data[t].icon=a.data.data[t].icon?a.data.data[t].icon:I("subject")})}(c),s=e(i,a.data)}else s="<p id='no-content'>没有您查看的内容</p>";n.html(s)}else d.alert(a.msg,{icon:0})},error:function(t){var e={other:"热门空间",subject:"热门学科空间",school:"热门学校空间"};d.alert("获取"+(e[c]?e[c]:e.other)+"异常",{icon:0})}})}function j(n,i){t.ajax({url:a.htmlHost+"/pf/api/qtapp/rrt_dynamicInfo?count=100",type:"GET",success:function(a){if(a&&"success"==a.code){var c="";a.data&&a.data.length>0?(t.each(a.data,function(t){var e=a.data[t];a.data[t].memberInfo.spaceUrl=a.msg+e.memberInfo.spaceUrl+"&requireLogin=false",a.data[t].memberInfo.picurl=e.memberInfo.picurl?e.memberInfo.picurl:I(e.memberInfo.usertype),a.data[t].memberInfo.action=G(e.action),a.data[t].memberInfo.resourceType=L(e.resourceType),a.data[t].memberInfo.createTime=e.createTime.split(" ")[0]}),c=e(i,a)):c="<p id='no-content'>没有您查看的内容</p>",n.html(c),new k(n,80,0)}else d.alert("获取个人空间动态异常",{icon:0})},error:function(t){d.alert("获取个人空间动态异常。",{icon:0})}})}function T(n,i){t.ajax({url:a.htmlHost+"/pf/api/qtapp/msgzs_studio?count=6",type:"GET",success:function(a){if(a&&"success"==a.code){var c="";a.data&&a.data&&a.data.datalist.length>0?(t.each(a.data.datalist,function(t){a.data.datalist[t].studioUrl=a.msg+a.data.datalist[t].studioUrl}),c=e(i,a.data)):c="<p id='no-content'>没有您查看的内容</p>",n.html(c)}else d.alert("获取热门名师工作室异常",{icon:0})},error:function(t){d.alert("获取热门名师工作室异常。",{icon:0})}})}function x(n,i){t.ajax({url:a.htmlHost+"/pf/api/qtapp/msgzs_studioDynamic?count=100",type:"GET",success:function(a){if(a&&"success"==a.code){var c="";a.data&&a.data.length>0?(t.each(a.data,function(t){a.data[t].detailUrl=a.msg+a.data[t].detailUrl,a.data[t].type=E(a.data[t].type)}),c=e(i,a)):c="<p id='no-content'>没有您查看的内容</p>",n.html(c),new k(n,80,0)}else d.alert("获取名师工作室动态异常",{icon:0})},error:function(t){d.alert("获取名师工作室动态异常。",{icon:0})}})}function w(n,i){t.ajax({url:a.htmlHost+"/pf/api/tbook/books",type:"GET",success:function(t){if(t&&"success"==t.code){var c="";t.data&&t.data.length>0?(t.host=a.ebookResourceHost,c=e(i,t)):c="<p id='no-content'>没有您查看的内容</p>",n.html(c)}else d.alert("获取数字图书馆异常",{icon:0})},error:function(t){d.alert("获取数字图书馆异常。",{icon:0})}})}function U(n,i,c){t.ajax({url:a.htmlHost+"/pf/api/friend/list?type=0&limit=6",type:"GET",success:function(t){if(t&&"success"==t.code){var a="";if(t.data&&t.data.length>0){for(var c=0;c<t.data.length;c++)t.data[c].pic=q(t.data[c].pic);a=e(i,t)}else a="<p id='no-content'>没有您查看的内容</p>";n.html(a)}else d.alert("获取友情链接异常",{icon:0})},error:function(t){d.alert("获取友情链接异常。",{icon:0})}})}function H(n){t.ajax({url:a.htmlHost+"/pf/api/friend/banner?limit=3",type:"GET",success:function(a){a&&"success"==a.code?(a.data&&a.data.length>0?t.each(a.data,function(t){a.data[t].pic=q(a.data[t].pic)}):a.data=n,t(".slide-pic").html(e("slidePic",a)),t(".slide-li").html(e("slideLi",a)),i()):d.alert("初始化banner异常",{icon:0})},error:function(t){d.alert("初始化banner异常。",{icon:0})}})}function P(){t.ajax({url:a.htmlHost+"/pf/api/header/more",type:"GET",success:function(e){e&&"success"==e.code?(t("#subject_section .title a").attr("href",e.data.res_more),t(".resources .title a").attr("href",e.data.res_more),t(".hot-studio .title a").attr("href",e.data.msgzs_more)):alert("初始化banner异常")}})}function I(t){"class"===t&&(t="classPic");var e={3:"./images/studentPic.png",2:"./images/teacherPic.png",6:"./images/teacherPic.png",5:"./images/teacherPic.png",subject:"./images/orgPic.png",school:"./images/orgPic.png",classPic:"./images/classPic.png",area:"./images/orgPic.png",other:"./images/orgPic.png"};return t&&e[t]?e[t]:e.other}function C(t){if(t)return"./images/subject/"+t+".png"}function E(t){switch(t){case 1:return"发表了文章";case 2:return"上传了教学资源";case 3:return"发表了课题";case 4:return"上传了名师课堂";case 5:return"发起了教学研讨"}}function G(t){switch(t){case 1:return"新建了  ";case 2:return"分享了  ";case 3:return"修改了  "}}function L(t){switch(t){case 0:return"我的成果";case 1:return"话题研讨";case 2:return"个人相片";case 3:return"随笔";case 4:return"群组空间公告";case 5:return"群组空间共享";case 6:return"作业";case 21:return"班级相片";case 22:return"学校相片";case 23:return"区域相片"}}function q(t){return"http"===a.path_url.download_url.substring(0,4)?a.path_url.download_url.replace("#resid#",t):a.prefix+a.path_url.download_url.replace("#resid#",t)}function k(t,e,a){this.target=t,this.target.css({position:"relative"}),this.$li=t.children(),this.length=this.$li.length,this.height=e||50,this.speed=1e3,this.starNum=0;var n=this;this.length>=4&&(this.target.html(this.target.html()+this.target.html()),setTimeout(function(){n.move()},a))}var N=[{id:1,name:"banner1",pic:"images/banner1.jpg"},{id:2,name:"banner2",pic:"images/banner2.jpg"},{id:3,name:"banner3",pic:"images/banner3.jpg"}];t(function(){g(t(".notice .notice_list"),"noticeList"),b(t("#application_list ul"),"applicationList"),_(t("#subject_section"),"subjectSection"),y("1","newscontent_box"),y("2","result_list"),v(t("#goodspace_content ul"),"goodspaceContent","6",6),j(t("#dynamic_list"),"dynamicList"),T(t(".studio-list"),"studioList"),x(t("#studio_dynamic_list"),"studioDynamicList"),v(t("#subject_space"),"subjectSpace","subject",4),v(t("#school_space"),"schoolSpace","school",5),w(t(".numberlibrary_content ul"),"numberlibraryContent"),U(t(".link_content ul"),"linkContent",0),H(N),P(),t(".wrap").delegate(".resources .min-nav li","click",function(){t(this).addClass("active").siblings().removeClass("active"),getResource(t("#resource_list"),"resourceList",t(this).attr("id"))}),t(".wrap").delegate("#goodspace_type li","click",function(){t(this).addClass("goodspace_active").siblings().removeClass("goodspace_active"),v(t("#goodspace_content ul"),"goodspaceContent",t(this).attr("type"),6)}),f(),t(".btn-myspace").on("click",m)}),k.prototype.move=function(){var t=this;this.starNum++,this.starNum>this.length&&(this.starNum=1,this.target.css("top",0)),this.target.animate({top:"-"+this.starNum*this.height+"px"},this.speed,function(){setTimeout(function(){t.move(t.starNum)},1e3)})}})});