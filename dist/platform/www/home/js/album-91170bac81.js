"use strict";define(["jquery"],function(t){function i(t){this.int(t)}return i.prototype={int:function(i){var h=this;this.aImg=t(i).find("img"),this._css=null,this.iLoad=0,this.zoom=1.1,this.i=0,this.ok=!1,this.aEm=t(i).find("em"),this.tLayer=null,this.aImg.each(function(){t(this).load(function(){++h.iLoad!=h.aImg.length||h.ok||h.pos(i)})}),setTimeout(function(){h.ok||h.pos(i)},2e3)},pos:function(i){var h=this;h.ok=!0,t("a",t(i)).each(function(){var s=t(this).parent(),o=t(this).siblings(".Album_info");s.css({width:t("img",this).width(),height:t("img",this).height()}),t(this).css({top:s.position().top,left:s.position().left}),t("em",this).css({height:s.height(),filter:"alpha(opacity=50)"}),t(i).width()-s.position().left>=3*t(this).width()?o.css({height:Math.round(t(this).height()*h.zoom)+4,left:s.position().left-2,right:"auto","padding-left":Math.round(t(this).width()*h.zoom)}):o.css({height:t(this).height()*h.zoom+4,right:t(i).width()-s.position().left-t(this).width()-2,left:"auto","padding-right":Math.round(t(this).width()*h.zoom),"text-align":"right"}),s.position().top>=Math.round(t(this).height()*(h.zoom-1)/2)&&t(i).height()-s.position().top-t(this).height()>=Math.round(t(this).height()*(h.zoom-1)/2)?o.css("top",s.position().top-Math.round(t(this).height()*(h.zoom-1)/2)-2):s.position().top<Math.round(t(this).height()*(h.zoom-1)/2)?o.css("top",t(this).parent().position().top-2):o.css("top",t(this).parent().position().top-Math.round(t(this).height()*(h.zoom-1)+2))}),this.showImg(i)},showImg:function(i){var h=this;t("li",t(i)).each(function(){t("a",this).css({visibility:"visible",display:"none"}).fadeIn(1e3)}),setTimeout(function(){t(i).css({background:"none"}),h.hover(i)},1e3)},hover:function(i){var h=this;t("a",t(i)).hover(function(){var s=t(this).parent(),o=t(this).siblings(".Album_info");t("em",this).hide(),h.tLayer&&(clearTimeout(h.tLayer),h.tLayer=null),t(i).find("em").not(t("em",this)).each(function(){t(this).is(":visible")||t(this).fadeIn(200)}),o.show().animate({width:3*t(this).width()-Math.round(t(this).width()*h.zoom)+7},300),h._css={top:s.position().top,"z-index":t(this).css("z-index"),width:t(this).width(),height:t(this).height(),left:t(this).css("left"),right:t(this).css("right")},t(i).width()-s.position().left>=3*t(this).width()?t(this).css({right:"auto",left:parseInt(o.css("left"))+2}):t(this).css({right:parseInt(o.css("right"))+2,left:"auto"}),t(this).css({top:parseInt(o.css("top"))+2,width:t(this).width()*h.zoom,height:t(this).height()*h.zoom,"z-index":t(this).css("z-index")+100}),t(this).children("img").css({width:t(this).width(),height:t(this).height()})},function(){t(".Album_info").hide().css({width:"0px"}).stop(),t(this).css(h._css),t(this).children("img").css({width:h._css.width,height:h._css.height}),h.tLayer=setTimeout(function(){t(i).find("em").not(t("em",this)).fadeOut(200)},200)})}},i});