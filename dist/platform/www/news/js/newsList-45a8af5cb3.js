"use strict";require.config({baseUrl:"../",paths:{platformConf:"public/js/platformConf-6e48d40e05.js"}}),require(["platformConf"],function(e){require.config(e),define("",["jquery","template","service","footer","header","tool"],function(e,a,t,s,r,i){function n(a){i.args.tab=a,e.ajax({url:t.htmlHost+"/pf/api/news/getByPage",type:"GET",data:{"page.pageSize":d,"page.currentPage":i.args.currentPage,category:i.args.tab},success:function(t){if(t&&"success"==t.code){var s=t.data.datalist;if(0==s.length)return e("#edunews").empty(),e("#result").empty(),e("#pages").empty(),e("#edunews").append("<p id='no-content'>没有您查看的内容</p>"),void e("#result").append("<p id='no-content'>没有您查看的内容</p>");for(var r="",n=0;n<s.length;n++)r+='<li id="'+f[i.args.tab]+n+'" class="cont-list clearFix"><div id="'+f[i.args.tab]+"content"+n+'" class="content-right"><h3><a class="text-link" href="sitenewsDetail.html?id='+s[n].id+"&index="+(d*(i.args.currentPage-1)+n)+"&category="+a+'">'+s[n].title+'</a></h3><p class="news-text">'+s[n].brief.replace(/<.*?>/g,"")+'</p><span class="news-time">'+s[n].crtDttm.split(" ")[0]+"</span></div></li>";e("#"+f[i.args.tab]).html(r),u(e(".news-text"),115),e("#pages").empty();var c=t.data.page;c.totalPages=t.data.totalPages,c.totalPages>1&&l(c)}else layer.alert("获取推荐新闻异常。",{icon:0})},error:function(e){layer.alert("获取推荐新闻异常。",{icon:0})}})}function l(e){if(e.totalPages<=3){c(e);for(var a=1;a<=e.totalPages;a++)o(a);g(e)}else if(e.currentPage<=2){c(e);for(var a=e.currentPage;a<e.currentPage+3;a++)o(a);g(e)}else if(e.currentPage<=e.totalPages-2){c(e);for(var a=e.currentPage-1;a<=e.currentPage+1;a++)o(a);g(e)}else if(e.currentPage<=e.totalPages){c(e);for(var a=e.totalPages-2;a<=e.totalPages;a++)o(a);g(e)}}function c(a){if(parseInt(a.currentPage)>1){var t=parseInt(a.currentPage)-1;e("#pages").append("<li class=pages-list > <a class=pages-link page="+t+" href=javascript:;>&lsaquo;&lsaquo;</a> </li>")}}function g(a){if(parseInt(a.currentPage)<a.totalPages){var t=parseInt(a.currentPage)+1;e("#pages").append("<li class=pages-list > <a class=pages-link page="+t+" href=javascript:;>&rsaquo;&rsaquo;</a> </li>")}}function o(a){var t='<li class=pages-list > <a class="'+(i.args.currentPage==a?"pages-active pages-link":"pages-link")+'" page="'+a+'" href=javascript:;>'+a+"</a> </li>";e("#pages").append(t)}function p(){n(i.args.tab)}function u(e,a){for(var t=0;t<e.length;t++){var s=e.eq(t).html();s=s.replace(/^\s+|\s+$/,"");var r="";s.length>a&&(r=s.slice(0,a)+"...",e.eq(t).html(r))}}var f={1:"edunews",2:"result"},d=5;e("#"+f[i.args.tab]).show().siblings(".cont-message").hide(),null==i.args.tab&&(i.args.tab="1"),null==i.args.currentPage&&(i.args.currentPage=1),"1"==i.args.tab?e("#newstab").addClass("news-title-active").siblings().removeClass("news-title-active"):e("#newstab").removeClass("news-title-active").siblings().addClass("news-title-active"),function(){e.ajax({url:t.htmlHost+"/pf/api/news/getLimit?limit=6&isComm=1&category=1",type:"GET",success:function(a){if(a&&"success"==a.code)if(e("#toplistnews").empty(),a.data&&a.data.length>0){for(var t=0;t<a.data.length;t++)e("#toplistnews").append('<li class="imp-list"><a class="imp-text" href="sitenewsDetail.html?id='+a.data[t].id+"&index="+t+'&category=1&isComm=1">'+a.data[t].title+"</a></li>");u(e(".imp-text"),18)}else e("#toplistnews").html("<p id='no-content'>没有您查看的内容</p>");else layer.alert("获取推荐新闻异常",{icon:0})},error:function(e){layer.alert("获取推荐新闻异常。",{icon:0})}})}(),n(i.args.tab),e(".news-top .news-title").click(function(a){i.args.currentPage=1,i.args.tab=e(this).attr("category"),e(this).addClass("news-title-active").siblings().removeClass("news-title-active"),e("#"+f[i.args.tab]).show().siblings(".cont-message").hide(),n(i.args.tab)}),e(".wrap").delegate("#pages li","click",function(){i.args.currentPage=parseInt(e(this).find("a").attr("page")),p()})})});