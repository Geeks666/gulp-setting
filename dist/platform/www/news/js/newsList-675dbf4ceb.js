"use strict";require.config({baseUrl:"../",paths:{platformConf:"public/js/platformConf-6e48d40e05.js",paging:"../../lib/component/pagingSimple/paging-0d69ce3f70.js"}}),require(["platformConf"],function(t){require.config(t),define("",["jquery","template","service","footer","header","tool","paging"],function(t,e,a,s,i,n,l){function r(e,a,s){(new l).init({target:"#"+e,pagesize:d,pageCount:10,firstTplShow:!0,firstTpl:"首页",lastTplShow:!0,lastTpl:"末页",toolbar:!0,count:a,callback:function(e){t(".ui-select-pagesize").remove(),o(s,e,!0),t(".ui-paging-count").unbind(),t(".ui-paging-toolbar").unbind()}})}function o(e,s,i){n.args.tab=e,t.ajax({url:a.htmlHost+"/pf/api/news/getByPage",type:"GET",data:{"page.pageSize":d,"page.currentPage":s,category:n.args.tab},success:function(a){if(a&&"success"==a.code){var s=a.data.datalist;if(0==s.length)return t("#edunews").empty(),t("#result").empty(),t("#pages").empty(),t("#edunews").append("<p id='no-content'>没有您查看的内容</p>"),void t("#result").append("<p id='no-content'>没有您查看的内容</p>");for(var l="",o=0;o<s.length;o++)l+='<li id="'+p[n.args.tab]+o+'" class="cont-list clearFix"><div id="'+p[n.args.tab]+"content"+o+'" class="content-right"><h3 class="bg-circle"><a class="text-link" title="'+s[o].title+'" href="sitenewsDetail.html?id='+s[o].id+"&index="+(d*(n.args.currentPage-1)+o)+"&category="+e+'">'+s[o].title+'</a></h3><span class="news-text">'+s[o].orgId+'</span><span class="news-time">'+s[o].crtDttm.split(" ")[0]+"</span></div></li>";t("#"+p[n.args.tab]).html(l),g(t(".news-text"),115),i||t("#pages").html(""),a.data.totalPages>1&&!i&&(r("pages",a.data.totalCount,e),t(".ui-select-pagesize").remove(),t(".ui-paging-count").unbind(),t(".ui-paging-toolbar").unbind())}else layer.alert("获取推荐新闻异常。",{icon:0})},error:function(t){layer.alert("获取推荐新闻异常。",{icon:0})}})}function c(t){return"http"===a.path_url.download_url.substring(0,4)?a.path_url.download_url.replace("#resid#",t):a.prefix+a.path_url.download_url.replace("#resid#",t)}function g(t,e){for(var a=0;a<t.length;a++){var s=t.eq(a).html();s=s.replace(/^\s+|\s+$/,"");var i="";s.length>e&&(i=s.slice(0,e)+"...",t.eq(a).html(i))}}!function(){t.ajax({url:a.htmlHost+"/pf/api/news/getLimit?&limit=4&category=1&isImg=1"+(n.args.orgId?"&orgId="+n.args.orgId:""),type:"GET",success:function(e){if(e&&"success"==e.code)if(""==e.data)t("#pic-news").replaceWith('<p style="line-height:32px;margin-left:15px">暂无数据...</p>');else{t("#pic-news").empty();for(var a=0;a<e.data.length;a++){var s="sitenewsDetail.html?id="+e.data[a].id+"&index="+a+"&category=1&isImg=1"+(n.args.orgId?"&orgId="+n.args.orgId:"");t("#pic-news").append('<li class="pic-list" ><a href='+s+'><img src="'+c(e.data[a].img)+'" alt=""  onerror="this.src=\'../home/images/bg-no-d41c843890.png\'" ></a><p title="'+e.data[a].title+'" class="suspend"  onclick="location.href =\''+s+"'\">"+e.data[a].title+"</p></li>")}g(t(".imp-message .imp-text"),20)}else alert("获取推荐新闻异常")}})}();var p={1:"edunews",2:"result"},d=20;t("#"+p[n.args.tab]).show().siblings(".cont-message").hide(),null==n.args.tab&&(n.args.tab="1"),null==n.args.currentPage&&(n.args.currentPage=1),"1"==n.args.tab?t("#newstab").addClass("news-title-active").siblings().removeClass("news-title-active"):t("#newstab").removeClass("news-title-active").siblings().addClass("news-title-active"),function(){t.ajax({url:a.htmlHost+"/pf/api/news/getLimit?limit=6&isComm=1&category=1",type:"GET",success:function(e){if(e&&"success"==e.code)if(t("#toplistnews").empty(),e.data&&e.data.length>0){for(var a=0;a<e.data.length;a++)t("#toplistnews").append('<li class="imp-list"><a class="imp-text" title="'+e.data[a].title+'" href="sitenewsDetail.html?id='+e.data[a].id+"&index="+a+'&category=1&isComm=1">'+e.data[a].title+"</a></li>");g(t(".imp-text"),18)}else t("#toplistnews").html("<p id='no-content'>没有您查看的内容</p>");else layer.alert("获取推荐新闻异常",{icon:0})},error:function(t){layer.alert("获取推荐新闻异常。",{icon:0})}})}(),o(n.args.tab,n.args.currentPage,!1),t(".news-top .news-title").click(function(e){n.args.currentPage=1,n.args.tab=t(this).attr("category"),t(this).addClass("news-title-active").siblings().removeClass("news-title-active"),t("#"+p[n.args.tab]).show().siblings(".cont-message").hide(),o(n.args.tab,n.args.currentPage,!1)})})});