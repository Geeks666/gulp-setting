"use strict";require.config({baseUrl:"../",paths:{platformConf:"public/js/platformConf-6e48d40e05.js"}}),require(["platformConf"],function(t){require.config(t),define("",["jquery","template","echarts","layer","service","orgConfig","tools","banner","textScroll","tab","ajaxBanner","secondNav","footer","header"],function(t,a,e,i,n,s,r,o,l,c,d,p,u,m){function f(t,a){for(var i=e.init(document.getElementById(a)),n={title:{},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},color:_.slice(0,t.length),legend:{left:"30",bottom:"30",data:[]},series:[{name:"教师活跃度",type:"pie",radius:"55%",center:["50%","38%"],data:t,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},s=0;s<t.length;s++)n.legend.data[s]=t[s].name,n.series[0].data[s].label={},n.series[0].data[s].label.normal={},n.series[0].data[s].label.normal.formatter=r.hideTextByLen(t[s].name,12);i.setOption(n)}function h(a,e,s,r){var o={orgCode:e,phaseId:s};t.ajax({url:n.htmlHost+"/pf/api/direct/resI_subResRanking",type:"GET",data:o,success:function(t){t&&1==t.success?t.data&&t.data.length>0?g(t.data,r):a.html("<p id='no-content'>没有您查看的内容</p>"):i.alert("获取资源贡献排行数据异常",{icon:0})},error:function(t){i.alert("获取资源贡献排行数据异常。",{icon:0})}})}function g(t,a){var i=e.init(document.getElementById(a));option={title:{},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},color:_.slice(0,t.length),legend:{orient:"vertical",x:"70",y:"middle",itemGap:25,data:[]},series:[{name:"资源贡献数",type:"pie",radius:[30,110],center:["70%","50%"],roseType:"area",data:t}]};for(var n=0;n<t.length;n++)n<10?(option.legend.data[n]=t[n].name,option.series[0].data[n].label={},option.series[0].data[n].label.normal={},option.series[0].data[n].label.normal.formatter=r.hideTextByLen(t[n].name,12)):10==n?(option.legend.data[n]="其它",option.series[0].data[n].name="其它"):option.series[0].data[10].value+=t[n].value;option.series[0].data=option.series[0].data.slice(0,11),i.setOption(option)}function v(t,a){var i=e.init(document.getElementById(a));option={title:{},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},color:_.slice(0,t.length),series:[{name:"活动参与度排行",type:"pie",radius:[25,100],center:["50%","50%"],roseType:"area",data:t}]};for(var n=0;n<t.length;n++)option.series[0].data[n].label={},option.series[0].data[n].label.normal={},option.series[0].data[n].label.normal.formatter=r.hideTextByLen(t[n].name,12);i.setOption(option)}function y(t,a){var i=e.init(document.getElementById(a));option={title:{},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},color:_.slice(0,t.length),series:[{name:"作品数",type:"pie",radius:[25,100],center:["50%","50%"],roseType:"area",data:t}]};for(var n=0;n<t.length;n++)option.series[0].data[n].label={},option.series[0].data[n].label.normal={},option.series[0].data[n].label.normal.formatter=r.hideTextByLen(t[n].name,12);i.setOption(option)}var _=["#f16c32","#f19d32","#f3d753","#81ca4c","#35a95d","#14c7e0","#4e8fe8","#426db8","#9053cf","#cf539f","#d7423d"];!function(e,s){t.ajax({url:n.htmlHost+"/pf/api/rank/teaR",type:"GET",success:function(n){if(n&&"success"==n.code){var o="";if(n.data&&n.data.list&&n.data.list.length>0){for(var l=0;l<n.data.list.length;l++)n.data.list[l].showName=r.hideTextByLen(n.data.list[l].name,16);o=a(s,{data:n.data.list}),t(".teacher_rank .total_num span").text(n.data.count)}else o="<p id='no-content'>没有您查看的内容</p>";e.html(o)}else i.alert(n.msg,{icon:0})},error:function(t){i.alert("获取教师数量排行异常。",{icon:0})}})}(t(".teacher_list"),"teacherRank"),function(a,e){t.ajax({url:n.htmlHost+"/pf/api/rank/useR",type:"GET",success:function(n){if(console.log(n),n&&"success"==n.code)if(n.data&&n.data.list&&n.data.list.length>0){for(var s=0;s<n.data.list.length;s++)n.data.list[s].name=n.data.list[s].name;t(".user_rank .total_num span").text(n.data.count),f(n.data.list,e)}else a.html("<p id='no-content'>没有您查看的内容</p>");else i.alert(n.msg,{icon:0})},error:function(t){i.alert("获取教师活跃度异常。",{icon:0})}})}(t(".user_rank_echart"),"userRankEchart"),h(t(".resource_rank_echart"),n.appIds.byqjyjg_appId,"140","resourceRankEchart"),function(a,e){t.ajax({url:n.htmlHost+"/pf/api/direct/activity_teachers",type:"GET",success:function(n){if(console.log(n),n&&"success"==n.code)if(n.data&&n.data.list&&n.data.list.length>0){for(var s=0;s<n.data.list.length;s++)n.data.list[s].name=n.data.list[s].activityName,n.data.list[s].value=n.data.list[s].teacherCount;t(".activity_rank .total_num span").text(n.data.teacherCount),v(n.data.list.slice(0,10),e)}else a.html("<p id='no-content'>没有您查看的内容</p>");else i.alert(n.msg,{icon:0})},error:function(t){i.alert("获取活动参与度排行异常。",{icon:0})}})}(t(".activity_rank_echart"),"activityRankEchart"),function(a,e){t.ajax({url:n.htmlHost+"/pf/api/direct/activity_works",type:"GET",success:function(n){if(console.log(n),n&&"success"==n.code)if(n.data&&n.data.list&&n.data.list.length>0){for(var s=0;s<n.data.list.length;s++)n.data.list[s].name=n.data.list[s].activityName,n.data.list[s].value=n.data.list[s].worksCount;t(".activity_works_rank .total_num span").text(n.data.worksCount),y(n.data.list.slice(0,10),e)}else a.html("<p id='no-content'>没有您查看的内容</p>");else i.alert(n.msg,{icon:0})},error:function(t){i.alert("获取活动作品数排行异常。",{icon:0})}})}(t(".activity_works_rank_echart"),"activityWorksRankEchart"),t("body").delegate(".grade_select>span i","click",function(a){a.stopPropagation(),t(this).hasClass("arrow_up")?(t(this).removeClass("arrow_up"),t(this).parents("span").siblings("div").hide()):(t(this).addClass("arrow_up"),t(this).parents("span").siblings("div").show())}),t("body").delegate(".grade_select ul li","click",function(a){a.stopPropagation(),t(this).parents(".grade_select").find("span strong").text(t(this).text()).parents("span").attr("data-value",t(this).attr("data-value")),t(this).parents(".grade_select").find("div").hide().siblings("span").find("i").removeClass("arrow_up"),h(t(".resource_rank_echart"),n.appIds.byqjyjg_appId,t(this).attr("data-value"),"resourceRankEchart")}),t(document).click(function(){t(".grade_select>span i").hasClass("arrow_up")&&(t(".grade_select>span i").removeClass("arrow_up"),t(".grade_select>span i").parents("span").siblings("div").hide())})})});